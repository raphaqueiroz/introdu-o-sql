import{N as Ys,H as pi,n as Zs,i as _r}from"./vueConfig.acb00325.js";import{i as Js}from"./vscodeInject.6e46c6eb.js";var Fr={exports:{}};(function(Y,G){(function(ie,le){Y.exports=le()})(self,function(){return(()=>{var ie={4567:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.AccessibilityManager=void 0;const v=y(9042),f=y(6114),d=y(9924),u=y(3656),C=y(844),m=y(5596),a=y(9631);class t extends C.Disposable{constructor(o,r){super(),this._terminal=o,this._renderService=r,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityTreeRoot=document.createElement("div"),this._accessibilityTreeRoot.classList.add("xterm-accessibility"),this._accessibilityTreeRoot.tabIndex=0,this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let n=0;n<this._terminal.rows;n++)this._rowElements[n]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[n]);if(this._topBoundaryFocusListener=n=>this._handleBoundaryFocus(n,0),this._bottomBoundaryFocusListener=n=>this._handleBoundaryFocus(n,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityTreeRoot.appendChild(this._rowContainer),this._renderRowsDebouncer=new d.TimeBasedDebouncer(this._renderRows.bind(this)),this._refreshRows(),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityTreeRoot.appendChild(this._liveRegion),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityTreeRoot),this.register(this._renderRowsDebouncer),this.register(this._terminal.onResize(n=>this._handleResize(n.rows))),this.register(this._terminal.onRender(n=>this._refreshRows(n.start,n.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(n=>this._handleChar(n))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(n=>this._handleTab(n))),this.register(this._terminal.onKey(n=>this._handleKey(n.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new m.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this.register((0,C.toDisposable)(()=>{(0,a.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0}))}_handleBoundaryFocus(o,r){const n=o.target,_=this._rowElements[r===0?1:this._rowElements.length-2];if(n.getAttribute("aria-posinset")===(r===0?"1":`${this._terminal.buffer.lines.length}`)||o.relatedTarget!==_)return;let g,w;if(r===0?(g=n,w=this._rowElements.pop(),this._rowContainer.removeChild(w)):(g=this._rowElements.shift(),w=n,this._rowContainer.removeChild(g)),g.removeEventListener("focus",this._topBoundaryFocusListener),w.removeEventListener("focus",this._bottomBoundaryFocusListener),r===0){const p=this._createAccessibilityTreeNode();this._rowElements.unshift(p),this._rowContainer.insertAdjacentElement("afterbegin",p)}else{const p=this._createAccessibilityTreeNode();this._rowElements.push(p),this._rowContainer.appendChild(p)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(r===0?-1:1),this._rowElements[r===0?1:this._rowElements.length-2].focus(),o.preventDefault(),o.stopImmediatePropagation()}_handleResize(o){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let r=this._rowContainer.children.length;r<this._terminal.rows;r++)this._rowElements[r]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[r]);for(;this._rowElements.length>o;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const o=document.createElement("div");return o.setAttribute("role","listitem"),o.tabIndex=-1,this._refreshRowDimensions(o),o}_handleTab(o){for(let r=0;r<o;r++)this._handleChar(" ")}_handleChar(o){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==o&&(this._charsToAnnounce+=o):this._charsToAnnounce+=o,o===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=v.tooMuchOutput)),f.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityTreeRoot.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,f.isMac&&(0,a.removeElementFromParent)(this._liveRegion)}_handleKey(o){this._clearLiveRegion(),/\p{Control}/u.test(o)||this._charsToConsume.push(o)}_refreshRows(o,r){this._renderRowsDebouncer.refresh(o,r,this._terminal.rows)}_renderRows(o,r){const n=this._terminal.buffer,_=n.lines.length.toString();for(let g=o;g<=r;g++){const w=n.translateBufferLineToString(n.ydisp+g,!0),p=(n.ydisp+g+1).toString(),S=this._rowElements[g];S&&(w.length===0?S.innerText="\xA0":S.textContent=w,S.setAttribute("aria-posinset",p),S.setAttribute("aria-setsize",_))}this._announceCharacters()}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityTreeRoot.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let o=0;o<this._terminal.rows;o++)this._refreshRowDimensions(this._rowElements[o])}}_refreshRowDimensions(o){o.style.height=`${this._renderService.dimensions.css.cell.height}px`}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}}c.AccessibilityManager=t},3614:(q,c)=>{function y(u){return u.replace(/\r?\n/g,"\r")}function v(u,C){return C?"\x1B[200~"+u+"\x1B[201~":u}function f(u,C,m){u=v(u=y(u),m.decPrivateModes.bracketedPasteMode),m.triggerDataEvent(u,!0),C.value=""}function d(u,C,m){const a=m.getBoundingClientRect(),t=u.clientX-a.left-10,h=u.clientY-a.top-10;C.style.width="20px",C.style.height="20px",C.style.left=`${t}px`,C.style.top=`${h}px`,C.style.zIndex="1000",C.focus()}Object.defineProperty(c,"__esModule",{value:!0}),c.rightClickHandler=c.moveTextAreaUnderMouseCursor=c.paste=c.handlePasteEvent=c.copyHandler=c.bracketTextForPaste=c.prepareTextForTerminal=void 0,c.prepareTextForTerminal=y,c.bracketTextForPaste=v,c.copyHandler=function(u,C){u.clipboardData&&u.clipboardData.setData("text/plain",C.selectionText),u.preventDefault()},c.handlePasteEvent=function(u,C,m){u.stopPropagation(),u.clipboardData&&f(u.clipboardData.getData("text/plain"),C,m)},c.paste=f,c.moveTextAreaUnderMouseCursor=d,c.rightClickHandler=function(u,C,m,a,t){d(u,C,m),t&&a.rightClickSelect(u),C.value=a.selectionText,C.select()}},7239:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ColorContrastCache=void 0;const v=y(1505);c.ColorContrastCache=class{constructor(){this._color=new v.TwoKeyMap,this._css=new v.TwoKeyMap}setCss(f,d,u){this._css.set(f,d,u)}getCss(f,d){return this._css.get(f,d)}setColor(f,d,u){this._color.set(f,d,u)}getColor(f,d){return this._color.get(f,d)}clear(){this._color.clear(),this._css.clear()}}},9631:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.removeElementFromParent=void 0,c.removeElementFromParent=function(...y){var v;for(const f of y)(v=f==null?void 0:f.parentElement)===null||v===void 0||v.removeChild(f)}},3656:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.addDisposableDomListener=void 0,c.addDisposableDomListener=function(y,v,f,d){y.addEventListener(v,f,d);let u=!1;return{dispose:()=>{u||(u=!0,y.removeEventListener(v,f,d))}}}},6465:function(q,c,y){var v=this&&this.__decorate||function(t,h,o,r){var n,_=arguments.length,g=_<3?h:r===null?r=Object.getOwnPropertyDescriptor(h,o):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,h,o,r);else for(var w=t.length-1;w>=0;w--)(n=t[w])&&(g=(_<3?n(g):_>3?n(h,o,g):n(h,o))||g);return _>3&&g&&Object.defineProperty(h,o,g),g},f=this&&this.__param||function(t,h){return function(o,r){h(o,r,t)}};Object.defineProperty(c,"__esModule",{value:!0}),c.Linkifier2=void 0;const d=y(2585),u=y(8460),C=y(844),m=y(3656);let a=class extends C.Disposable{constructor(t){super(),this._bufferService=t,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._activeLine=-1,this._onShowLinkUnderline=this.register(new u.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new u.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,C.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,C.toDisposable)(()=>{this._lastMouseEvent=void 0}))}get currentLink(){return this._currentLink}registerLinkProvider(t){return this._linkProviders.push(t),{dispose:()=>{const h=this._linkProviders.indexOf(t);h!==-1&&this._linkProviders.splice(h,1)}}}attachToDom(t,h,o){this._element=t,this._mouseService=h,this._renderService=o,this.register((0,m.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,m.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,m.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,m.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(t){if(this._lastMouseEvent=t,!this._element||!this._mouseService)return;const h=this._positionFromMouseEvent(t,this._element,this._mouseService);if(!h)return;this._isMouseOut=!1;const o=t.composedPath();for(let r=0;r<o.length;r++){const n=o[r];if(n.classList.contains("xterm"))break;if(n.classList.contains("xterm-hover"))return}this._lastBufferCell&&h.x===this._lastBufferCell.x&&h.y===this._lastBufferCell.y||(this._handleHover(h),this._lastBufferCell=h)}_handleHover(t){if(this._activeLine!==t.y)return this._clearCurrentLink(),void this._askForLink(t,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))}_askForLink(t,h){var o,r;this._activeProviderReplies&&h||((o=this._activeProviderReplies)===null||o===void 0||o.forEach(_=>{_==null||_.forEach(g=>{g.link.dispose&&g.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);let n=!1;for(const[_,g]of this._linkProviders.entries())h?!((r=this._activeProviderReplies)===null||r===void 0)&&r.get(_)&&(n=this._checkLinkProviderResult(_,t,n)):g.provideLinks(t.y,w=>{var p,S;if(this._isMouseOut)return;const x=w==null?void 0:w.map(A=>({link:A}));(p=this._activeProviderReplies)===null||p===void 0||p.set(_,x),n=this._checkLinkProviderResult(_,t,n),((S=this._activeProviderReplies)===null||S===void 0?void 0:S.size)===this._linkProviders.length&&this._removeIntersectingLinks(t.y,this._activeProviderReplies)})}_removeIntersectingLinks(t,h){const o=new Set;for(let r=0;r<h.size;r++){const n=h.get(r);if(n)for(let _=0;_<n.length;_++){const g=n[_],w=g.link.range.start.y<t?0:g.link.range.start.x,p=g.link.range.end.y>t?this._bufferService.cols:g.link.range.end.x;for(let S=w;S<=p;S++){if(o.has(S)){n.splice(_--,1);break}o.add(S)}}}}_checkLinkProviderResult(t,h,o){var r;if(!this._activeProviderReplies)return o;const n=this._activeProviderReplies.get(t);let _=!1;for(let g=0;g<t;g++)this._activeProviderReplies.has(g)&&!this._activeProviderReplies.get(g)||(_=!0);if(!_&&n){const g=n.find(w=>this._linkAtPosition(w.link,h));g&&(o=!0,this._handleNewLink(g))}if(this._activeProviderReplies.size===this._linkProviders.length&&!o)for(let g=0;g<this._activeProviderReplies.size;g++){const w=(r=this._activeProviderReplies.get(g))===null||r===void 0?void 0:r.find(p=>this._linkAtPosition(p.link,h));if(w){o=!0,this._handleNewLink(w);break}}return o}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(t){if(!this._element||!this._mouseService||!this._currentLink)return;const h=this._positionFromMouseEvent(t,this._element,this._mouseService);h&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,h)&&this._currentLink.link.activate(t,this._currentLink.link.text)}_clearCurrentLink(t,h){this._element&&this._currentLink&&this._lastMouseEvent&&(!t||!h||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=h)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,C.disposeArray)(this._linkCacheDisposables))}_handleNewLink(t){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._linkAtPosition(t.link,h)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0||t.link.decorations.underline,pointerCursor:t.link.decorations===void 0||t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:()=>{var o,r;return(r=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||r===void 0?void 0:r.decorations.pointerCursor},set:o=>{var r,n;((r=this._currentLink)===null||r===void 0?void 0:r.state)&&this._currentLink.state.decorations.pointerCursor!==o&&(this._currentLink.state.decorations.pointerCursor=o,this._currentLink.state.isHovered&&((n=this._element)===null||n===void 0||n.classList.toggle("xterm-cursor-pointer",o)))}},underline:{get:()=>{var o,r;return(r=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||r===void 0?void 0:r.decorations.underline},set:o=>{var r,n,_;((r=this._currentLink)===null||r===void 0?void 0:r.state)&&((_=(n=this._currentLink)===null||n===void 0?void 0:n.state)===null||_===void 0?void 0:_.decorations.underline)!==o&&(this._currentLink.state.decorations.underline=o,this._currentLink.state.isHovered&&this._fireUnderlineEvent(t.link,o))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(o=>{const r=o.start===0?0:o.start+1+this._bufferService.buffer.ydisp,n=this._currentLink?this._lastMouseEvent:void 0;if(this._clearCurrentLink(r,o.end+1+this._bufferService.buffer.ydisp),n&&this._element){const _=this._positionFromMouseEvent(n,this._element,this._mouseService);_&&this._askForLink(_,!1)}})))}_linkHover(t,h,o){var r;!((r=this._currentLink)===null||r===void 0)&&r.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),h.hover&&h.hover(o,h.text)}_fireUnderlineEvent(t,h){const o=t.range,r=this._bufferService.buffer.ydisp,n=this._createLinkUnderlineEvent(o.start.x-1,o.start.y-r-1,o.end.x,o.end.y-r-1,void 0);(h?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(n)}_linkLeave(t,h,o){var r;!((r=this._currentLink)===null||r===void 0)&&r.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),h.leave&&h.leave(o,h.text)}_linkAtPosition(t,h){const o=t.range.start.y*this._bufferService.cols+t.range.start.x,r=t.range.end.y*this._bufferService.cols+t.range.end.x,n=h.y*this._bufferService.cols+h.x;return o<=n&&n<=r}_positionFromMouseEvent(t,h,o){const r=o.getCoords(t,h,this._bufferService.cols,this._bufferService.rows);if(r)return{x:r[0],y:r[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(t,h,o,r,n){return{x1:t,y1:h,x2:o,y2:r,cols:this._bufferService.cols,fg:n}}};a=v([f(0,d.IBufferService)],a),c.Linkifier2=a},9042:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.tooMuchOutput=c.promptLabel=void 0,c.promptLabel="Terminal input",c.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(q,c,y){var v=this&&this.__decorate||function(a,t,h,o){var r,n=arguments.length,_=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,h):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(a,t,h,o);else for(var g=a.length-1;g>=0;g--)(r=a[g])&&(_=(n<3?r(_):n>3?r(t,h,_):r(t,h))||_);return n>3&&_&&Object.defineProperty(t,h,_),_},f=this&&this.__param||function(a,t){return function(h,o){t(h,o,a)}};Object.defineProperty(c,"__esModule",{value:!0}),c.OscLinkProvider=void 0;const d=y(511),u=y(2585);let C=class{constructor(a,t,h){this._bufferService=a,this._optionsService=t,this._oscLinkService=h}provideLinks(a,t){var h;const o=this._bufferService.buffer.lines.get(a-1);if(!o)return void t(void 0);const r=[],n=this._optionsService.rawOptions.linkHandler,_=new d.CellData,g=o.getTrimmedLength();let w=-1,p=-1,S=!1;for(let x=0;x<g;x++)if(p!==-1||o.hasContent(x)){if(o.loadCell(x,_),_.hasExtendedAttrs()&&_.extended.urlId){if(p===-1){p=x,w=_.extended.urlId;continue}S=_.extended.urlId!==w}else p!==-1&&(S=!0);if(S||p!==-1&&x===g-1){const A=(h=this._oscLinkService.getLinkData(w))===null||h===void 0?void 0:h.uri;if(A){const T={start:{x:p+1,y:a},end:{x:x+(S||x!==g-1?0:1),y:a}};let B=!1;if(!(n!=null&&n.allowNonHttpProtocols))try{const U=new URL(A);["http:","https:"].includes(U.protocol)||(B=!0)}catch{B=!0}B||r.push({text:A,range:T,activate:(U,D)=>n?n.activate(U,D,T):m(0,D),hover:(U,D)=>{var H;return(H=n==null?void 0:n.hover)===null||H===void 0?void 0:H.call(n,U,D,T)},leave:(U,D)=>{var H;return(H=n==null?void 0:n.leave)===null||H===void 0?void 0:H.call(n,U,D,T)}})}S=!1,_.hasExtendedAttrs()&&_.extended.urlId?(p=x,w=_.extended.urlId):(p=-1,w=-1)}}t(r)}};function m(a,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){const h=window.open();if(h){try{h.opener=null}catch{}h.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}C=v([f(0,u.IBufferService),f(1,u.IOptionsService),f(2,u.IOscLinkService)],C),c.OscLinkProvider=C},6193:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.RenderDebouncer=void 0,c.RenderDebouncer=class{constructor(y,v){this._parentWindow=y,this._renderCallback=v,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(y){return this._refreshCallbacks.push(y),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(y,v,f){this._rowCount=f,y=y!==void 0?y:0,v=v!==void 0?v:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,y):y,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,v):v,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const y=Math.max(this._rowStart,0),v=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(y,v),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const y of this._refreshCallbacks)y(0);this._refreshCallbacks=[]}}},5596:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ScreenDprMonitor=void 0;const v=y(844);class f extends v.Disposable{constructor(u){super(),this._parentWindow=u,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,v.toDisposable)(()=>{this.clearListener()}))}setListener(u){this._listener&&this.clearListener(),this._listener=u,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var u;this._outerListener&&((u=this._resolutionMediaMatchList)===null||u===void 0||u.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}c.ScreenDprMonitor=f},3236:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Terminal=void 0;const v=y(2950),f=y(1680),d=y(3614),u=y(2584),C=y(5435),m=y(9312),a=y(6114),t=y(3656),h=y(9042),o=y(4567),r=y(1296),n=y(7399),_=y(8460),g=y(8437),w=y(3230),p=y(4725),S=y(428),x=y(8934),A=y(6465),T=y(5114),B=y(8969),U=y(8055),D=y(4269),H=y(5941),L=y(3107),O=y(5744),I=y(9074),P=y(2585),Q=y(3730),N=y(844),K=y(6731),V=typeof window<"u"?window.document:null;class re extends B.CoreTerminal{constructor(z={}){super(z),this.browser=a,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._onCursorMove=this.register(new _.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new _.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new _.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new _.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new _.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new _.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new _.EventEmitter),this._onBlur=this.register(new _.EventEmitter),this._onA11yCharEmitter=this.register(new _.EventEmitter),this._onA11yTabEmitter=this.register(new _.EventEmitter),this._onWillOpen=this.register(new _.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(A.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(Q.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(I.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((W,ee)=>this.refresh(W,ee))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(W=>this._reportWindowsOptions(W))),this.register(this._inputHandler.onColor(W=>this._handleColorEvent(W))),this.register((0,_.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,_.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,_.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,_.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(W=>this._afterResize(W.cols,W.rows))),this.register((0,N.toDisposable)(()=>{var W,ee;this._customKeyEventHandler=void 0,(ee=(W=this.element)===null||W===void 0?void 0:W.parentNode)===null||ee===void 0||ee.removeChild(this.element)}))}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(z){if(this._themeService)for(const W of z){let ee,se="";switch(W.index){case 256:ee="foreground",se="10";break;case 257:ee="background",se="11";break;case 258:ee="cursor",se="12";break;default:ee="ansi",se="4;"+W.index}switch(W.type){case 0:const Se=U.color.toColorRGB(ee==="ansi"?this._themeService.colors.ansi[W.index]:this._themeService.colors[ee]);this.coreService.triggerDataEvent(`${u.C0.ESC}]${se};${(0,H.toRgbString)(Se)}${u.C1_ESCAPED.ST}`);break;case 1:if(ee==="ansi")this._themeService.modifyColors(ce=>ce.ansi[W.index]=U.rgba.toColor(...W.color));else{const ce=ee;this._themeService.modifyColors(ke=>ke[ce]=U.rgba.toColor(...W.color))}break;case 2:this._themeService.restoreColor(W.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(z){var W;z?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new o.AccessibilityManager(this,this._renderService)):((W=this._accessibilityManager)===null||W===void 0||W.dispose(),this._accessibilityManager=void 0)}_handleTextAreaFocus(z){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(u.C0.ESC+"[I"),this.updateCursorStyle(z),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var z;return(z=this.textarea)===null||z===void 0?void 0:z.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(u.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const z=this.buffer.ybase+this.buffer.y,W=this.buffer.lines.get(z);if(!W)return;const ee=Math.min(this.buffer.x,this.cols-1),se=this._renderService.dimensions.css.cell.height,Se=W.getWidth(ee),ce=this._renderService.dimensions.css.cell.width*Se,ke=this.buffer.y*this._renderService.dimensions.css.cell.height,J=ee*this._renderService.dimensions.css.cell.width;this.textarea.style.left=J+"px",this.textarea.style.top=ke+"px",this.textarea.style.width=ce+"px",this.textarea.style.height=se+"px",this.textarea.style.lineHeight=se+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,t.addDisposableDomListener)(this.element,"copy",W=>{this.hasSelection()&&(0,d.copyHandler)(W,this._selectionService)}));const z=W=>(0,d.handlePasteEvent)(W,this.textarea,this.coreService);this.register((0,t.addDisposableDomListener)(this.textarea,"paste",z)),this.register((0,t.addDisposableDomListener)(this.element,"paste",z)),a.isFirefox?this.register((0,t.addDisposableDomListener)(this.element,"mousedown",W=>{W.button===2&&(0,d.rightClickHandler)(W,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,t.addDisposableDomListener)(this.element,"contextmenu",W=>{(0,d.rightClickHandler)(W,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),a.isLinux&&this.register((0,t.addDisposableDomListener)(this.element,"auxclick",W=>{W.button===1&&(0,d.moveTextAreaUnderMouseCursor)(W,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,t.addDisposableDomListener)(this.textarea,"keyup",z=>this._keyUp(z),!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"keydown",z=>this._keyDown(z),!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"keypress",z=>this._keyPress(z),!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionupdate",z=>this._compositionHelper.compositionupdate(z))),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,t.addDisposableDomListener)(this.textarea,"input",z=>this._inputEvent(z),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(z){var W;if(!z)throw new Error("Terminal requires a parent element.");z.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=z.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),z.appendChild(this.element);const ee=V.createDocumentFragment();this._viewportElement=V.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),ee.appendChild(this._viewportElement),this._viewportScrollArea=V.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=V.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=V.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),ee.appendChild(this.screenElement),this.textarea=V.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",h.promptLabel),a.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(T.CoreBrowserService,this.textarea,(W=this._document.defaultView)!==null&&W!==void 0?W:window),this._instantiationService.setService(p.ICoreBrowserService,this._coreBrowserService),this.register((0,t.addDisposableDomListener)(this.textarea,"focus",se=>this._handleTextAreaFocus(se))),this.register((0,t.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(S.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(p.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(K.ThemeService),this._instantiationService.setService(p.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(D.CharacterJoinerService),this._instantiationService.setService(p.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(p.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(se=>this._onRender.fire(se))),this.onResize(se=>this._renderService.resize(se.cols,se.rows)),this._compositionView=V.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(v.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(ee);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(p.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(f.Viewport,se=>this.scrollLines(se,!0,1),this._viewportElement,this._viewportScrollArea),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(m.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(p.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(se=>this.scrollLines(se.amount,se.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(se=>this._renderService.handleSelectionChanged(se.start,se.end,se.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(se=>{this.textarea.value=se,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(se=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,t.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(L.BufferDecorationRenderer,this.screenElement)),this.register((0,t.addDisposableDomListener)(this.element,"mousedown",se=>this._selectionService.handleMouseDown(se))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new o.AccessibilityManager(this,this._renderService)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",se=>this._handleScreenReaderModeOptionChange(se))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(O.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",se=>{!this._overviewRulerRenderer&&se&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(O.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(r.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const z=this,W=this.element;function ee(ce){const ke=z._mouseService.getMouseReportCoords(ce,z.screenElement);if(!ke)return!1;let J,Ee;switch(ce.overrideType||ce.type){case"mousemove":Ee=32,ce.buttons===void 0?(J=3,ce.button!==void 0&&(J=ce.button<3?ce.button:3)):J=1&ce.buttons?0:4&ce.buttons?1:2&ce.buttons?2:3;break;case"mouseup":Ee=0,J=ce.button<3?ce.button:3;break;case"mousedown":Ee=1,J=ce.button<3?ce.button:3;break;case"wheel":if(z.viewport.getLinesScrolled(ce)===0)return!1;Ee=ce.deltaY<0?0:1,J=4;break;default:return!1}return!(Ee===void 0||J===void 0||J>4)&&z.coreMouseService.triggerMouseEvent({col:ke.col,row:ke.row,x:ke.x,y:ke.y,button:J,action:Ee,ctrl:ce.ctrlKey,alt:ce.altKey,shift:ce.shiftKey})}const se={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Se={mouseup:ce=>(ee(ce),ce.buttons||(this._document.removeEventListener("mouseup",se.mouseup),se.mousedrag&&this._document.removeEventListener("mousemove",se.mousedrag)),this.cancel(ce)),wheel:ce=>(ee(ce),this.cancel(ce,!0)),mousedrag:ce=>{ce.buttons&&ee(ce)},mousemove:ce=>{ce.buttons||ee(ce)}};this.register(this.coreMouseService.onProtocolChange(ce=>{ce?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ce)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ce?se.mousemove||(W.addEventListener("mousemove",Se.mousemove),se.mousemove=Se.mousemove):(W.removeEventListener("mousemove",se.mousemove),se.mousemove=null),16&ce?se.wheel||(W.addEventListener("wheel",Se.wheel,{passive:!1}),se.wheel=Se.wheel):(W.removeEventListener("wheel",se.wheel),se.wheel=null),2&ce?se.mouseup||(se.mouseup=Se.mouseup):(this._document.removeEventListener("mouseup",se.mouseup),se.mouseup=null),4&ce?se.mousedrag||(se.mousedrag=Se.mousedrag):(this._document.removeEventListener("mousemove",se.mousedrag),se.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,t.addDisposableDomListener)(W,"mousedown",ce=>{if(ce.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ce))return ee(ce),se.mouseup&&this._document.addEventListener("mouseup",se.mouseup),se.mousedrag&&this._document.addEventListener("mousemove",se.mousedrag),this.cancel(ce)})),this.register((0,t.addDisposableDomListener)(W,"wheel",ce=>{if(!se.wheel){if(!this.buffer.hasScrollback){const ke=this.viewport.getLinesScrolled(ce);if(ke===0)return;const J=u.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ce.deltaY<0?"A":"B");let Ee="";for(let de=0;de<Math.abs(ke);de++)Ee+=J;return this.coreService.triggerDataEvent(Ee,!0),this.cancel(ce,!0)}return this.viewport.handleWheel(ce)?this.cancel(ce):void 0}},{passive:!1})),this.register((0,t.addDisposableDomListener)(W,"touchstart",ce=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ce),this.cancel(ce)},{passive:!0})),this.register((0,t.addDisposableDomListener)(W,"touchmove",ce=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ce)?void 0:this.cancel(ce)},{passive:!1}))}refresh(z,W){var ee;(ee=this._renderService)===null||ee===void 0||ee.refreshRows(z,W)}updateCursorStyle(z){var W;!((W=this._selectionService)===null||W===void 0)&&W.shouldColumnSelect(z)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(z,W,ee=0){super.scrollLines(z,W,ee),this.refresh(0,this.rows-1)}paste(z){(0,d.paste)(z,this.textarea,this.coreService)}attachCustomKeyEventHandler(z){this._customKeyEventHandler=z}registerLinkProvider(z){return this.linkifier2.registerLinkProvider(z)}registerCharacterJoiner(z){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const W=this._characterJoinerService.register(z);return this.refresh(0,this.rows-1),W}deregisterCharacterJoiner(z){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(z)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}addMarker(z){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+z)}registerDecoration(z){return this._decorationService.registerDecoration(z)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(z,W,ee){this._selectionService.setSelection(z,W,ee)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var z;(z=this._selectionService)===null||z===void 0||z.clearSelection()}selectAll(){var z;(z=this._selectionService)===null||z===void 0||z.selectAll()}selectLines(z,W){var ee;(ee=this._selectionService)===null||ee===void 0||ee.selectLines(z,W)}_keyDown(z){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(z)===!1)return!1;const W=this.browser.isMac&&this.options.macOptionIsMeta&&z.altKey;if(!W&&!this._compositionHelper.keydown(z))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;W||z.key!=="Dead"&&z.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ee=(0,n.evaluateKeyboardEvent)(z,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(z),ee.type===3||ee.type===2){const se=this.rows-1;return this.scrollLines(ee.type===2?-se:se),this.cancel(z,!0)}return ee.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,z)||(ee.cancel&&this.cancel(z,!0),!ee.key||!!(z.key&&!z.ctrlKey&&!z.altKey&&!z.metaKey&&z.key.length===1&&z.key.charCodeAt(0)>=65&&z.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ee.key!==u.C0.ETX&&ee.key!==u.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ee.key,domEvent:z}),this._showCursor(),this.coreService.triggerDataEvent(ee.key,!0),!this.optionsService.rawOptions.screenReaderMode||z.altKey||z.ctrlKey?this.cancel(z,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(z,W){const ee=z.isMac&&!this.options.macOptionIsMeta&&W.altKey&&!W.ctrlKey&&!W.metaKey||z.isWindows&&W.altKey&&W.ctrlKey&&!W.metaKey||z.isWindows&&W.getModifierState("AltGraph");return W.type==="keypress"?ee:ee&&(!W.keyCode||W.keyCode>47)}_keyUp(z){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(z)===!1||(function(W){return W.keyCode===16||W.keyCode===17||W.keyCode===18}(z)||this.focus(),this.updateCursorStyle(z),this._keyPressHandled=!1)}_keyPress(z){let W;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(z)===!1)return!1;if(this.cancel(z),z.charCode)W=z.charCode;else if(z.which===null||z.which===void 0)W=z.keyCode;else{if(z.which===0||z.charCode===0)return!1;W=z.which}return!(!W||(z.altKey||z.ctrlKey||z.metaKey)&&!this._isThirdLevelShift(this.browser,z)||(W=String.fromCharCode(W),this._onKey.fire({key:W,domEvent:z}),this._showCursor(),this.coreService.triggerDataEvent(W,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(z){if(z.data&&z.inputType==="insertText"&&(!z.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const W=z.data;return this.coreService.triggerDataEvent(W,!0),this.cancel(z),!0}return!1}resize(z,W){z!==this.cols||W!==this.rows?super.resize(z,W):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(z,W){var ee,se;(ee=this._charSizeService)===null||ee===void 0||ee.measure(),(se=this.viewport)===null||se===void 0||se.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let z=1;z<this.rows;z++)this.buffer.lines.push(this.buffer.getBlankLine(g.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}}reset(){var z,W;this.options.rows=this.rows,this.options.cols=this.cols;const ee=this._customKeyEventHandler;this._setup(),super.reset(),(z=this._selectionService)===null||z===void 0||z.reset(),this._decorationService.reset(),this._customKeyEventHandler=ee,this.refresh(0,this.rows-1),(W=this.viewport)===null||W===void 0||W.syncScrollArea()}clearTextureAtlas(){var z;(z=this._renderService)===null||z===void 0||z.clearTextureAtlas()}_reportFocus(){var z;!((z=this.element)===null||z===void 0)&&z.classList.contains("focus")?this.coreService.triggerDataEvent(u.C0.ESC+"[I"):this.coreService.triggerDataEvent(u.C0.ESC+"[O")}_reportWindowsOptions(z){if(this._renderService)switch(z){case C.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const W=this._renderService.dimensions.css.canvas.width.toFixed(0),ee=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${u.C0.ESC}[4;${ee};${W}t`);break;case C.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const se=this._renderService.dimensions.css.cell.width.toFixed(0),Se=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${u.C0.ESC}[6;${Se};${se}t`)}}cancel(z,W){if(this.options.cancelEvents||W)return z.preventDefault(),z.stopPropagation(),!1}}c.Terminal=re},9924:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TimeBasedDebouncer=void 0,c.TimeBasedDebouncer=class{constructor(y,v=1e3){this._renderCallback=y,this._debounceThresholdMS=v,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(y,v,f){this._rowCount=f,y=y!==void 0?y:0,v=v!==void 0?v:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,y):y,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,v):v;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const u=d-this._lastRefreshMs,C=this._debounceThresholdMS-u;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},C)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const y=Math.max(this._rowStart,0),v=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(y,v)}}},1680:function(q,c,y){var v=this&&this.__decorate||function(t,h,o,r){var n,_=arguments.length,g=_<3?h:r===null?r=Object.getOwnPropertyDescriptor(h,o):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,h,o,r);else for(var w=t.length-1;w>=0;w--)(n=t[w])&&(g=(_<3?n(g):_>3?n(h,o,g):n(h,o))||g);return _>3&&g&&Object.defineProperty(h,o,g),g},f=this&&this.__param||function(t,h){return function(o,r){h(o,r,t)}};Object.defineProperty(c,"__esModule",{value:!0}),c.Viewport=void 0;const d=y(844),u=y(3656),C=y(4725),m=y(2585);let a=class extends d.Disposable{constructor(t,h,o,r,n,_,g,w,p){super(),this._scrollLines=t,this._viewportElement=h,this._scrollArea=o,this._bufferService=r,this._optionsService=n,this._charSizeService=_,this._renderService=g,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(S=>this._activeBuffer=S.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(S=>this._renderDimensions=S)),this._handleThemeChange(p.colors),this.register(p.onChangeColors(S=>this._handleThemeChange(S))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea(),0)}_handleThemeChange(t){this._viewportElement.style.backgroundColor=t.background.css}_refresh(t){if(t)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const h=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==h&&(this._lastRecordedBufferHeight=h,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null}syncScrollArea(t=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(t);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(t)}_handleScroll(t){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);const h=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(h)}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const t=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(t*(this._smoothScrollState.target-this._smoothScrollState.origin)),t<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(t,h){const o=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(h<0&&this._viewportElement.scrollTop!==0||h>0&&o<this._lastRecordedBufferHeight)||(t.cancelable&&t.preventDefault(),!1)}handleWheel(t){const h=this._getPixelsScrolled(t);return h!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+h:this._smoothScrollState.target+=h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=h,this._bubbleScroll(t,h))}_getPixelsScrolled(t){if(t.deltaY===0||t.shiftKey)return 0;let h=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_LINE?h*=this._currentRowHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._currentRowHeight*this._bufferService.rows),h}getLinesScrolled(t){if(t.deltaY===0||t.shiftKey)return 0;let h=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(h/=this._currentRowHeight+0,this._wheelPartialScroll+=h,h=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._bufferService.rows),h}_applyScrollModifier(t,h){const o=this._optionsService.rawOptions.fastScrollModifier;return o==="alt"&&h.altKey||o==="ctrl"&&h.ctrlKey||o==="shift"&&h.shiftKey?t*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:t*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(t){this._lastTouchY=t.touches[0].pageY}handleTouchMove(t){const h=this._lastTouchY-t.touches[0].pageY;return this._lastTouchY=t.touches[0].pageY,h!==0&&(this._viewportElement.scrollTop+=h,this._bubbleScroll(t,h))}};a=v([f(3,m.IBufferService),f(4,m.IOptionsService),f(5,C.ICharSizeService),f(6,C.IRenderService),f(7,C.ICoreBrowserService),f(8,C.IThemeService)],a),c.Viewport=a},3107:function(q,c,y){var v=this&&this.__decorate||function(t,h,o,r){var n,_=arguments.length,g=_<3?h:r===null?r=Object.getOwnPropertyDescriptor(h,o):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,h,o,r);else for(var w=t.length-1;w>=0;w--)(n=t[w])&&(g=(_<3?n(g):_>3?n(h,o,g):n(h,o))||g);return _>3&&g&&Object.defineProperty(h,o,g),g},f=this&&this.__param||function(t,h){return function(o,r){h(o,r,t)}};Object.defineProperty(c,"__esModule",{value:!0}),c.BufferDecorationRenderer=void 0;const d=y(3656),u=y(4725),C=y(844),m=y(2585);let a=class extends C.Disposable{constructor(t,h,o,r){super(),this._screenElement=t,this._bufferService=h,this._decorationService=o,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,d.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(n=>this._removeDecoration(n))),this.register((0,C.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const t of this._decorationService.decorations)this._renderDecoration(t);this._dimensionsChanged=!1}_renderDecoration(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)}_createElement(t){var h;const o=document.createElement("div");o.classList.add("xterm-decoration"),o.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,o.style.height=(t.options.height||1)*this._renderService.dimensions.css.cell.height+"px",o.style.top=(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",o.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const r=(h=t.options.x)!==null&&h!==void 0?h:0;return r&&r>this._bufferService.cols&&(o.style.display="none"),this._refreshXPosition(t,o),o}_refreshStyle(t){const h=t.marker.line-this._bufferService.buffers.active.ydisp;if(h<0||h>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{let o=this._decorationElements.get(t);o||(o=this._createElement(t),t.element=o,this._decorationElements.set(t,o),this._container.appendChild(o)),o.style.top=h*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",t.onRenderEmitter.fire(o)}}_refreshXPosition(t,h=t.element){var o;if(!h)return;const r=(o=t.options.x)!==null&&o!==void 0?o:0;(t.options.anchor||"left")==="right"?h.style.right=r?r*this._renderService.dimensions.css.cell.width+"px":"":h.style.left=r?r*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(t){var h;(h=this._decorationElements.get(t))===null||h===void 0||h.remove(),this._decorationElements.delete(t),t.dispose()}};a=v([f(1,m.IBufferService),f(2,m.IDecorationService),f(3,u.IRenderService)],a),c.BufferDecorationRenderer=a},5871:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ColorZoneStore=void 0,c.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(y){if(y.options.overviewRulerOptions){for(const v of this._zones)if(v.color===y.options.overviewRulerOptions.color&&v.position===y.options.overviewRulerOptions.position){if(this._lineIntersectsZone(v,y.marker.line))return;if(this._lineAdjacentToZone(v,y.marker.line,y.options.overviewRulerOptions.position))return void this._addLineToZone(v,y.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=y.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=y.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=y.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=y.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:y.options.overviewRulerOptions.color,position:y.options.overviewRulerOptions.position,startBufferLine:y.marker.line,endBufferLine:y.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(y){this._linePadding=y}_lineIntersectsZone(y,v){return v>=y.startBufferLine&&v<=y.endBufferLine}_lineAdjacentToZone(y,v,f){return v>=y.startBufferLine-this._linePadding[f||"full"]&&v<=y.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(y,v){y.startBufferLine=Math.min(y.startBufferLine,v),y.endBufferLine=Math.max(y.endBufferLine,v)}}},5744:function(q,c,y){var v=this&&this.__decorate||function(n,_,g,w){var p,S=arguments.length,x=S<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,g):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,_,g,w);else for(var A=n.length-1;A>=0;A--)(p=n[A])&&(x=(S<3?p(x):S>3?p(_,g,x):p(_,g))||x);return S>3&&x&&Object.defineProperty(_,g,x),x},f=this&&this.__param||function(n,_){return function(g,w){_(g,w,n)}};Object.defineProperty(c,"__esModule",{value:!0}),c.OverviewRulerRenderer=void 0;const d=y(5871),u=y(3656),C=y(4725),m=y(844),a=y(2585),t={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let r=class extends m.Disposable{constructor(n,_,g,w,p,S,x){var A;super(),this._viewportElement=n,this._screenElement=_,this._bufferService=g,this._decorationService=w,this._renderService=p,this._optionsService=S,this._coreBrowseService=x,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(A=this._viewportElement.parentElement)===null||A===void 0||A.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{var B;(B=this._canvas)===null||B===void 0||B.remove()}))}get _width(){return this._optionsService.options.overviewRulerWidth||0}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,u.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const n=Math.floor(this._canvas.width/3),_=Math.ceil(this._canvas.width/3);h.full=this._canvas.width,h.left=n,h.center=_,h.right=n,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=h.left,o.right=h.left+h.center}_refreshDrawHeightConstants(){t.full=Math.round(2*this._coreBrowseService.dpr);const n=this._canvas.height/this._bufferService.buffer.lines.length,_=Math.round(Math.max(Math.min(n,12),6)*this._coreBrowseService.dpr);t.left=_,t.center=_,t.right=_}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const _ of this._decorationService.decorations)this._colorZoneStore.addDecoration(_);this._ctx.lineWidth=1;const n=this._colorZoneStore.zones;for(const _ of n)_.position!=="full"&&this._renderColorZone(_);for(const _ of n)_.position==="full"&&this._renderColorZone(_);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(n){this._ctx.fillStyle=n.color,this._ctx.fillRect(o[n.position||"full"],Math.round((this._canvas.height-1)*(n.startBufferLine/this._bufferService.buffers.active.lines.length)-t[n.position||"full"]/2),h[n.position||"full"],Math.round((this._canvas.height-1)*((n.endBufferLine-n.startBufferLine)/this._bufferService.buffers.active.lines.length)+t[n.position||"full"]))}_queueRefresh(n,_){this._shouldUpdateDimensions=n||this._shouldUpdateDimensions,this._shouldUpdateAnchor=_||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};r=v([f(2,a.IBufferService),f(3,a.IDecorationService),f(4,C.IRenderService),f(5,a.IOptionsService),f(6,C.ICoreBrowserService)],r),c.OverviewRulerRenderer=r},2950:function(q,c,y){var v=this&&this.__decorate||function(a,t,h,o){var r,n=arguments.length,_=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,h):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(a,t,h,o);else for(var g=a.length-1;g>=0;g--)(r=a[g])&&(_=(n<3?r(_):n>3?r(t,h,_):r(t,h))||_);return n>3&&_&&Object.defineProperty(t,h,_),_},f=this&&this.__param||function(a,t){return function(h,o){t(h,o,a)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CompositionHelper=void 0;const d=y(4725),u=y(2585),C=y(2584);let m=class{constructor(a,t,h,o,r,n){this._textarea=a,this._compositionView=t,this._bufferService=h,this._optionsService=o,this._coreService=r,this._renderService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(a){this._compositionView.textContent=a.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(a){if(this._isComposing||this._isSendingComposition){if(a.keyCode===229||a.keyCode===16||a.keyCode===17||a.keyCode===18)return!1;this._finalizeComposition(!1)}return a.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(a){if(this._compositionView.classList.remove("active"),this._isComposing=!1,a){const t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,t.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(t.start,t.end):this._textarea.value.substring(t.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}},0)}else{this._isSendingComposition=!1;const t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){const a=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const t=this._textarea.value,h=t.replace(a,"");this._dataAlreadySent=h,t.length>a.length?this._coreService.triggerDataEvent(h,!0):t.length<a.length?this._coreService.triggerDataEvent(`${C.C0.DEL}`,!0):t.length===a.length&&t!==a&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(a){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,o=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const n=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=o+"px",this._textarea.style.width=Math.max(n.width,1)+"px",this._textarea.style.height=Math.max(n.height,1)+"px",this._textarea.style.lineHeight=n.height+"px"}a||setTimeout(()=>this.updateCompositionElements(!0),0)}}};m=v([f(2,u.IBufferService),f(3,u.IOptionsService),f(4,u.ICoreService),f(5,d.IRenderService)],m),c.CompositionHelper=m},9806:(q,c)=>{function y(v,f,d){const u=d.getBoundingClientRect(),C=v.getComputedStyle(d),m=parseInt(C.getPropertyValue("padding-left")),a=parseInt(C.getPropertyValue("padding-top"));return[f.clientX-u.left-m,f.clientY-u.top-a]}Object.defineProperty(c,"__esModule",{value:!0}),c.getCoords=c.getCoordsRelativeToElement=void 0,c.getCoordsRelativeToElement=y,c.getCoords=function(v,f,d,u,C,m,a,t,h){if(!m)return;const o=y(v,f,d);return o?(o[0]=Math.ceil((o[0]+(h?a/2:0))/a),o[1]=Math.ceil(o[1]/t),o[0]=Math.min(Math.max(o[0],1),u+(h?1:0)),o[1]=Math.min(Math.max(o[1],1),C),o):void 0}},9504:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.moveToCellSequence=void 0;const v=y(2584);function f(t,h,o,r){const n=t-d(t,o),_=h-d(h,o),g=Math.abs(n-_)-function(w,p,S){let x=0;const A=w-d(w,S),T=p-d(p,S);for(let B=0;B<Math.abs(A-T);B++){const U=u(w,p)==="A"?-1:1,D=S.buffer.lines.get(A+U*B);D!=null&&D.isWrapped&&x++}return x}(t,h,o);return a(g,m(u(t,h),r))}function d(t,h){let o=0,r=h.buffer.lines.get(t),n=r==null?void 0:r.isWrapped;for(;n&&t>=0&&t<h.rows;)o++,r=h.buffer.lines.get(--t),n=r==null?void 0:r.isWrapped;return o}function u(t,h){return t>h?"A":"B"}function C(t,h,o,r,n,_){let g=t,w=h,p="";for(;g!==o||w!==r;)g+=n?1:-1,n&&g>_.cols-1?(p+=_.buffer.translateBufferLineToString(w,!1,t,g),g=0,t=0,w++):!n&&g<0&&(p+=_.buffer.translateBufferLineToString(w,!1,0,t+1),g=_.cols-1,t=g,w--);return p+_.buffer.translateBufferLineToString(w,!1,t,g)}function m(t,h){const o=h?"O":"[";return v.C0.ESC+o+t}function a(t,h){t=Math.floor(t);let o="";for(let r=0;r<t;r++)o+=h;return o}c.moveToCellSequence=function(t,h,o,r){const n=o.buffer.x,_=o.buffer.y;if(!o.buffer.hasScrollback)return function(p,S,x,A,T,B){return f(S,A,T,B).length===0?"":a(C(p,S,p,S-d(S,T),!1,T).length,m("D",B))}(n,_,0,h,o,r)+f(_,h,o,r)+function(p,S,x,A,T,B){let U;U=f(S,A,T,B).length>0?A-d(A,T):S;const D=A,H=function(L,O,I,P,Q,N){let K;return K=f(I,P,Q,N).length>0?P-d(P,Q):O,L<I&&K<=P||L>=I&&K<P?"C":"D"}(p,S,x,A,T,B);return a(C(p,U,x,D,H==="C",T).length,m(H,B))}(n,_,t,h,o,r);let g;if(_===h)return g=n>t?"D":"C",a(Math.abs(n-t),m(g,r));g=_>h?"D":"C";const w=Math.abs(_-h);return a(function(p,S){return S.cols-p}(_>h?t:n,o)+(w-1)*o.cols+1+((_>h?n:t)-1),m(g,r))}},1296:function(q,c,y){var v=this&&this.__decorate||function(p,S,x,A){var T,B=arguments.length,U=B<3?S:A===null?A=Object.getOwnPropertyDescriptor(S,x):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(p,S,x,A);else for(var D=p.length-1;D>=0;D--)(T=p[D])&&(U=(B<3?T(U):B>3?T(S,x,U):T(S,x))||U);return B>3&&U&&Object.defineProperty(S,x,U),U},f=this&&this.__param||function(p,S){return function(x,A){S(x,A,p)}};Object.defineProperty(c,"__esModule",{value:!0}),c.DomRenderer=void 0;const d=y(9631),u=y(3787),C=y(2223),m=y(6171),a=y(4725),t=y(8055),h=y(8460),o=y(844),r=y(2585),n="xterm-dom-renderer-owner-",_="xterm-focus";let g=1,w=class extends o.Disposable{constructor(p,S,x,A,T,B,U,D,H,L){super(),this._element=p,this._screenElement=S,this._viewportElement=x,this._linkifier2=A,this._charSizeService=B,this._optionsService=U,this._bufferService=D,this._coreBrowserService=H,this._terminalClass=g++,this._rowElements=[],this._cellToRowElements=[],this.onRequestRedraw=this.register(new h.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add("xterm-rows"),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add("xterm-selection"),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,m.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(L.onChangeColors(O=>this._injectCss(O))),this._injectCss(L.colors),this._rowFactory=T.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(n+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(O=>this._handleLinkHover(O))),this.register(this._linkifier2.onHideLinkUnderline(O=>this._handleLinkLeave(O))),this.register((0,o.toDisposable)(()=>{this._element.classList.remove(n+this._terminalClass),(0,d.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement)}))}_updateDimensions(){const p=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*p,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*p),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/p),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/p),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const x of this._rowElements)x.style.width=`${this.dimensions.css.canvas.width}px`,x.style.height=`${this.dimensions.css.cell.height}px`,x.style.lineHeight=`${this.dimensions.css.cell.height}px`,x.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const S=`${this._terminalSelector} .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: ${this.dimensions.css.cell.width}px}`;this._dimensionsStyleElement.textContent=S,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(p){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let S=`${this._terminalSelector} .xterm-rows { color: ${p.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px;}`;S+=`${this._terminalSelector} span:not(.${u.BOLD_CLASS}) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.${u.BOLD_CLASS} { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.${u.ITALIC_CLASS} { font-style: italic;}`,S+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",S+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${p.cursor.css};  color: ${p.cursorAccent.css}; } 50% {  background-color: ${p.cursorAccent.css};  color: ${p.cursor.css}; }}`,S+=`${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${u.CURSOR_CLASS}.${u.CURSOR_STYLE_BLOCK_CLASS} { outline: 1px solid ${p.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .xterm-rows.xterm-focus .${u.CURSOR_CLASS}.${u.CURSOR_BLINK_CLASS}:not(.${u.CURSOR_STYLE_BLOCK_CLASS}) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${u.CURSOR_CLASS}.${u.CURSOR_BLINK_CLASS}.${u.CURSOR_STYLE_BLOCK_CLASS} { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${u.CURSOR_CLASS}.${u.CURSOR_STYLE_BLOCK_CLASS} { background-color: ${p.cursor.css}; color: ${p.cursorAccent.css};}${this._terminalSelector} .xterm-rows .${u.CURSOR_CLASS}.${u.CURSOR_STYLE_BAR_CLASS} { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${p.cursor.css} inset;}${this._terminalSelector} .xterm-rows .${u.CURSOR_CLASS}.${u.CURSOR_STYLE_UNDERLINE_CLASS} { box-shadow: 0 -1px 0 ${p.cursor.css} inset;}`,S+=`${this._terminalSelector} .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .xterm-selection div { position: absolute; background-color: ${p.selectionBackgroundOpaque.css};}${this._terminalSelector} .xterm-selection div { position: absolute; background-color: ${p.selectionInactiveBackgroundOpaque.css};}`;for(const[x,A]of p.ansi.entries())S+=`${this._terminalSelector} .xterm-fg-${x} { color: ${A.css}; }${this._terminalSelector} .xterm-bg-${x} { background-color: ${A.css}; }`;S+=`${this._terminalSelector} .xterm-fg-${C.INVERTED_DEFAULT_COLOR} { color: ${t.color.opaque(p.background).css}; }${this._terminalSelector} .xterm-bg-${C.INVERTED_DEFAULT_COLOR} { background-color: ${p.foreground.css}; }`,this._themeStyleElement.textContent=S}handleDevicePixelRatioChange(){this._updateDimensions()}_refreshRowElements(p,S){for(let x=this._rowElements.length;x<=S;x++){const A=document.createElement("div");this._rowContainer.appendChild(A),this._rowElements.push(A)}for(;this._rowElements.length>S;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(p,S){this._refreshRowElements(p,S),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions()}handleBlur(){this._rowContainer.classList.remove(_)}handleFocus(){this._rowContainer.classList.add(_)}handleSelectionChanged(p,S,x){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.handleSelectionChanged(p,S,x),this.renderRows(0,this._bufferService.rows-1),!p||!S)return;const A=p[1]-this._bufferService.buffer.ydisp,T=S[1]-this._bufferService.buffer.ydisp,B=Math.max(A,0),U=Math.min(T,this._bufferService.rows-1);if(B>=this._bufferService.rows||U<0)return;const D=document.createDocumentFragment();if(x){const H=p[0]>S[0];D.appendChild(this._createSelectionElement(B,H?S[0]:p[0],H?p[0]:S[0],U-B+1))}else{const H=A===B?p[0]:0,L=B===T?S[0]:this._bufferService.cols;D.appendChild(this._createSelectionElement(B,H,L));const O=U-B-1;if(D.appendChild(this._createSelectionElement(B+1,0,this._bufferService.cols,O)),B!==U){const I=T===U?S[0]:this._bufferService.cols;D.appendChild(this._createSelectionElement(U,0,I))}}this._selectionContainer.appendChild(D)}_createSelectionElement(p,S,x,A=1){const T=document.createElement("div");return T.style.height=A*this.dimensions.css.cell.height+"px",T.style.top=p*this.dimensions.css.cell.height+"px",T.style.left=S*this.dimensions.css.cell.width+"px",T.style.width=this.dimensions.css.cell.width*(x-S)+"px",T}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions()}clear(){for(const p of this._rowElements)p.replaceChildren()}renderRows(p,S){const x=this._bufferService.buffer.ybase+this._bufferService.buffer.y,A=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),T=this._optionsService.rawOptions.cursorBlink;for(let B=p;B<=S;B++){const U=this._rowElements[B],D=B+this._bufferService.buffer.ydisp,H=this._bufferService.buffer.lines.get(D),L=this._optionsService.rawOptions.cursorStyle;this._cellToRowElements[B]&&this._cellToRowElements[B].length===this._bufferService.cols||(this._cellToRowElements[B]=new Int16Array(this._bufferService.cols)),U.replaceChildren(this._rowFactory.createRow(H,D,D===x,L,A,T,this.dimensions.css.cell.width,this._bufferService.cols,this._cellToRowElements[B]))}}get _terminalSelector(){return`.${n}${this._terminalClass}`}_handleLinkHover(p){this._setCellUnderline(p.x1,p.x2,p.y1,p.y2,p.cols,!0)}_handleLinkLeave(p){this._setCellUnderline(p.x1,p.x2,p.y1,p.y2,p.cols,!1)}_setCellUnderline(p,S,x,A,T,B){if(p=this._cellToRowElements[x][p],S=this._cellToRowElements[A][S],p!==-1&&S!==-1)for(;p!==S||x!==A;){const U=this._rowElements[x];if(!U)return;const D=U.children[p];D&&(D.style.textDecoration=B?"underline":"none"),++p>=T&&(p=0,x++)}}};w=v([f(4,r.IInstantiationService),f(5,a.ICharSizeService),f(6,r.IOptionsService),f(7,r.IBufferService),f(8,a.ICoreBrowserService),f(9,a.IThemeService)],w),c.DomRenderer=w},3787:function(q,c,y){var v=this&&this.__decorate||function(g,w,p,S){var x,A=arguments.length,T=A<3?w:S===null?S=Object.getOwnPropertyDescriptor(w,p):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(g,w,p,S);else for(var B=g.length-1;B>=0;B--)(x=g[B])&&(T=(A<3?x(T):A>3?x(w,p,T):x(w,p))||T);return A>3&&T&&Object.defineProperty(w,p,T),T},f=this&&this.__param||function(g,w){return function(p,S){w(p,S,g)}};Object.defineProperty(c,"__esModule",{value:!0}),c.DomRendererRowFactory=c.CURSOR_STYLE_UNDERLINE_CLASS=c.CURSOR_STYLE_BAR_CLASS=c.CURSOR_STYLE_BLOCK_CLASS=c.CURSOR_BLINK_CLASS=c.CURSOR_CLASS=c.STRIKETHROUGH_CLASS=c.UNDERLINE_CLASS=c.ITALIC_CLASS=c.DIM_CLASS=c.BOLD_CLASS=void 0;const d=y(2223),u=y(643),C=y(511),m=y(2585),a=y(8055),t=y(4725),h=y(4269),o=y(6171),r=y(3734);c.BOLD_CLASS="xterm-bold",c.DIM_CLASS="xterm-dim",c.ITALIC_CLASS="xterm-italic",c.UNDERLINE_CLASS="xterm-underline",c.STRIKETHROUGH_CLASS="xterm-strikethrough",c.CURSOR_CLASS="xterm-cursor",c.CURSOR_BLINK_CLASS="xterm-cursor-blink",c.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",c.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",c.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";let n=class{constructor(g,w,p,S,x,A,T){this._document=g,this._characterJoinerService=w,this._optionsService=p,this._coreBrowserService=S,this._coreService=x,this._decorationService=A,this._themeService=T,this._workCell=new C.CellData,this._columnSelectMode=!1}handleSelectionChanged(g,w,p){this._selectionStart=g,this._selectionEnd=w,this._columnSelectMode=p}createRow(g,w,p,S,x,A,T,B,U){const D=this._document.createDocumentFragment(),H=this._characterJoinerService.getJoinedCharacters(w);let L=0;for(let Q=Math.min(g.length,B)-1;Q>=0;Q--)if(g.loadCell(Q,this._workCell).getCode()!==u.NULL_CELL_CODE||p&&Q===x){L=Q+1;break}const O=this._themeService.colors;let I=-1,P=0;for(;P<L;P++){g.loadCell(P,this._workCell);let Q=this._workCell.getWidth();if(Q===0){U[P]=I;continue}let N=!1,K=P,V=this._workCell;if(H.length>0&&P===H[0][0]){N=!0;const de=H.shift();V=new h.JoinedCellData(this._workCell,g.translateToString(!0,de[0],de[1]),de[1]-de[0]),K=de[1]-1,Q=V.getWidth()}const re=this._document.createElement("span");if(Q>1&&(re.style.width=T*Q+"px"),N&&(re.style.display="inline",x>=P&&x<=K&&(x=P)),!this._coreService.isCursorHidden&&p&&P===x)switch(re.classList.add(c.CURSOR_CLASS),A&&re.classList.add(c.CURSOR_BLINK_CLASS),S){case"bar":re.classList.add(c.CURSOR_STYLE_BAR_CLASS);break;case"underline":re.classList.add(c.CURSOR_STYLE_UNDERLINE_CLASS);break;default:re.classList.add(c.CURSOR_STYLE_BLOCK_CLASS)}if(V.isBold()&&re.classList.add(c.BOLD_CLASS),V.isItalic()&&re.classList.add(c.ITALIC_CLASS),V.isDim()&&re.classList.add(c.DIM_CLASS),V.isInvisible()?re.textContent=u.WHITESPACE_CELL_CHAR:re.textContent=V.getChars()||u.WHITESPACE_CELL_CHAR,V.isUnderline()&&(re.classList.add(`${c.UNDERLINE_CLASS}-${V.extended.underlineStyle}`),re.textContent===" "&&(re.textContent="\xA0"),!V.isUnderlineColorDefault()))if(V.isUnderlineColorRGB())re.style.textDecorationColor=`rgb(${r.AttributeData.toColorRGB(V.getUnderlineColor()).join(",")})`;else{let de=V.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&V.isBold()&&de<8&&(de+=8),re.style.textDecorationColor=O.ansi[de].css}V.isStrikethrough()&&re.classList.add(c.STRIKETHROUGH_CLASS);let j=V.getFgColor(),z=V.getFgColorMode(),W=V.getBgColor(),ee=V.getBgColorMode();const se=!!V.isInverse();if(se){const de=j;j=W,W=de;const st=z;z=ee,ee=st}let Se,ce,ke=!1;this._decorationService.forEachDecorationAtCell(P,w,void 0,de=>{de.options.layer!=="top"&&ke||(de.backgroundColorRGB&&(ee=50331648,W=de.backgroundColorRGB.rgba>>8&16777215,Se=de.backgroundColorRGB),de.foregroundColorRGB&&(z=50331648,j=de.foregroundColorRGB.rgba>>8&16777215,ce=de.foregroundColorRGB),ke=de.options.layer==="top")});const J=this._isCellInSelection(P,w);let Ee;switch(ke||O.selectionForeground&&J&&(z=50331648,j=O.selectionForeground.rgba>>8&16777215,ce=O.selectionForeground),J&&(Se=this._coreBrowserService.isFocused?O.selectionBackgroundOpaque:O.selectionInactiveBackgroundOpaque,ke=!0),ke&&re.classList.add("xterm-decoration-top"),ee){case 16777216:case 33554432:Ee=O.ansi[W],re.classList.add(`xterm-bg-${W}`);break;case 50331648:Ee=a.rgba.toColor(W>>16,W>>8&255,255&W),this._addStyle(re,`background-color:#${_((W>>>0).toString(16),"0",6)}`);break;default:se?(Ee=O.foreground,re.classList.add(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):Ee=O.background}switch(Se||V.isDim()&&(Se=a.color.multiplyOpacity(Ee,.5)),z){case 16777216:case 33554432:V.isBold()&&j<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(j+=8),this._applyMinimumContrast(re,Ee,O.ansi[j],V,Se,void 0)||re.classList.add(`xterm-fg-${j}`);break;case 50331648:const de=a.rgba.toColor(j>>16&255,j>>8&255,255&j);this._applyMinimumContrast(re,Ee,de,V,Se,ce)||this._addStyle(re,`color:#${_(j.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(re,Ee,O.foreground,V,Se,void 0)||se&&re.classList.add(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}D.appendChild(re),U[P]=++I,P=K}return P<B-1&&U.subarray(P).fill(++I),D}_applyMinimumContrast(g,w,p,S,x,A){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,o.excludeFromContrastRatioDemands)(S.getCode()))return!1;let T;return x||A||(T=this._themeService.colors.contrastCache.getColor(w.rgba,p.rgba)),T===void 0&&(T=a.color.ensureContrastRatio(x||w,A||p,this._optionsService.rawOptions.minimumContrastRatio),this._themeService.colors.contrastCache.setColor((x||w).rgba,(A||p).rgba,T!=null?T:null)),!!T&&(this._addStyle(g,`color:${T.css}`),!0)}_addStyle(g,w){g.setAttribute("style",`${g.getAttribute("style")||""}${w};`)}_isCellInSelection(g,w){const p=this._selectionStart,S=this._selectionEnd;return!(!p||!S)&&(this._columnSelectMode?p[0]<=S[0]?g>=p[0]&&w>=p[1]&&g<S[0]&&w<=S[1]:g<p[0]&&w>=p[1]&&g>=S[0]&&w<=S[1]:w>p[1]&&w<S[1]||p[1]===S[1]&&w===p[1]&&g>=p[0]&&g<S[0]||p[1]<S[1]&&w===S[1]&&g<S[0]||p[1]<S[1]&&w===p[1]&&g>=p[0])}};function _(g,w,p){for(;g.length<p;)g=w+g;return g}n=v([f(1,t.ICharacterJoinerService),f(2,m.IOptionsService),f(3,t.ICoreBrowserService),f(4,m.ICoreService),f(5,m.IDecorationService),f(6,t.IThemeService)],n),c.DomRendererRowFactory=n},2223:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TEXT_BASELINE=c.DIM_OPACITY=c.INVERTED_DEFAULT_COLOR=void 0;const v=y(6114);c.INVERTED_DEFAULT_COLOR=257,c.DIM_OPACITY=.5,c.TEXT_BASELINE=v.isFirefox||v.isLegacyEdge?"bottom":"ideographic"},6171:(q,c)=>{function y(v){return 57508<=v&&v<=57558}Object.defineProperty(c,"__esModule",{value:!0}),c.createRenderDimensions=c.excludeFromContrastRatioDemands=c.isRestrictedPowerlineGlyph=c.isPowerlineGlyph=c.throwIfFalsy=void 0,c.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v},c.isPowerlineGlyph=y,c.isRestrictedPowerlineGlyph=function(v){return 57520<=v&&v<=57527},c.excludeFromContrastRatioDemands=function(v){return y(v)||function(f){return 9472<=f&&f<=9631}(v)},c.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SelectionModel=void 0,c.SelectionModel=class{constructor(y){this._bufferService=y,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const y=this.selectionStart[0]+this.selectionStartLength;return y>this._bufferService.cols?y%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(y/this._bufferService.cols)-1]:[y%this._bufferService.cols,this.selectionStart[1]+Math.floor(y/this._bufferService.cols)]:[y,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const y=this.selectionStart[0]+this.selectionStartLength;return y>this._bufferService.cols?[y%this._bufferService.cols,this.selectionStart[1]+Math.floor(y/this._bufferService.cols)]:[Math.max(y,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const y=this.selectionStart,v=this.selectionEnd;return!(!y||!v)&&(y[1]>v[1]||y[1]===v[1]&&y[0]>v[0])}handleTrim(y){return this.selectionStart&&(this.selectionStart[1]-=y),this.selectionEnd&&(this.selectionEnd[1]-=y),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(q,c,y){var v=this&&this.__decorate||function(t,h,o,r){var n,_=arguments.length,g=_<3?h:r===null?r=Object.getOwnPropertyDescriptor(h,o):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,h,o,r);else for(var w=t.length-1;w>=0;w--)(n=t[w])&&(g=(_<3?n(g):_>3?n(h,o,g):n(h,o))||g);return _>3&&g&&Object.defineProperty(h,o,g),g},f=this&&this.__param||function(t,h){return function(o,r){h(o,r,t)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CharSizeService=void 0;const d=y(2585),u=y(8460),C=y(844);let m=class extends C.Disposable{constructor(t,h,o){super(),this._optionsService=o,this.width=0,this.height=0,this._onCharSizeChange=this.register(new u.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new a(t,h,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){const t=this._measureStrategy.measure();t.width===this.width&&t.height===this.height||(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};m=v([f(2,d.IOptionsService)],m),c.CharSizeService=m;class a{constructor(h,o,r){this._document=h,this._parentElement=o,this._optionsService=r,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const h=this._measureElement.getBoundingClientRect();return h.width!==0&&h.height!==0&&(this._result.width=h.width,this._result.height=Math.ceil(h.height)),this._result}}},4269:function(q,c,y){var v=this&&this.__decorate||function(h,o,r,n){var _,g=arguments.length,w=g<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(h,o,r,n);else for(var p=h.length-1;p>=0;p--)(_=h[p])&&(w=(g<3?_(w):g>3?_(o,r,w):_(o,r))||w);return g>3&&w&&Object.defineProperty(o,r,w),w},f=this&&this.__param||function(h,o){return function(r,n){o(r,n,h)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CharacterJoinerService=c.JoinedCellData=void 0;const d=y(3734),u=y(643),C=y(511),m=y(2585);class a extends d.AttributeData{constructor(o,r,n){super(),this.content=0,this.combinedData="",this.fg=o.fg,this.bg=o.bg,this.combinedData=r,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(o){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}c.JoinedCellData=a;let t=class Hr{constructor(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(o){const r={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(r),r.id}deregister(o){for(let r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===o)return this._characterJoiners.splice(r,1),!0;return!1}getJoinedCharacters(o){if(this._characterJoiners.length===0)return[];const r=this._bufferService.buffer.lines.get(o);if(!r||r.length===0)return[];const n=[],_=r.translateToString(!0);let g=0,w=0,p=0,S=r.getFg(0),x=r.getBg(0);for(let A=0;A<r.getTrimmedLength();A++)if(r.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==S||this._workCell.bg!==x){if(A-g>1){const T=this._getJoinedRanges(_,p,w,r,g);for(let B=0;B<T.length;B++)n.push(T[B])}g=A,p=w,S=this._workCell.fg,x=this._workCell.bg}w+=this._workCell.getChars().length||u.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-g>1){const A=this._getJoinedRanges(_,p,w,r,g);for(let T=0;T<A.length;T++)n.push(A[T])}return n}_getJoinedRanges(o,r,n,_,g){const w=o.substring(r,n);let p=[];try{p=this._characterJoiners[0].handler(w)}catch(S){console.error(S)}for(let S=1;S<this._characterJoiners.length;S++)try{const x=this._characterJoiners[S].handler(w);for(let A=0;A<x.length;A++)Hr._mergeRanges(p,x[A])}catch(x){console.error(x)}return this._stringRangesToCellRanges(p,_,g),p}_stringRangesToCellRanges(o,r,n){let _=0,g=!1,w=0,p=o[_];if(p){for(let S=n;S<this._bufferService.cols;S++){const x=r.getWidth(S),A=r.getString(S).length||u.WHITESPACE_CELL_CHAR.length;if(x!==0){if(!g&&p[0]<=w&&(p[0]=S,g=!0),p[1]<=w){if(p[1]=S,p=o[++_],!p)break;p[0]<=w?(p[0]=S,g=!0):g=!1}w+=A}}p&&(p[1]=this._bufferService.cols)}}static _mergeRanges(o,r){let n=!1;for(let _=0;_<o.length;_++){const g=o[_];if(n){if(r[1]<=g[0])return o[_-1][1]=r[1],o;if(r[1]<=g[1])return o[_-1][1]=Math.max(r[1],g[1]),o.splice(_,1),o;o.splice(_,1),_--}else{if(r[1]<=g[0])return o.splice(_,0,r),o;if(r[1]<=g[1])return g[0]=Math.min(r[0],g[0]),o;r[0]<g[1]&&(g[0]=Math.min(r[0],g[0]),n=!0)}}return n?o[o.length-1][1]=r[1]:o.push(r),o}};t=v([f(0,m.IBufferService)],t),c.CharacterJoinerService=t},5114:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CoreBrowserService=void 0,c.CoreBrowserService=class{constructor(y,v){this._textarea=y,this.window=v,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(q,c,y){var v=this&&this.__decorate||function(m,a,t,h){var o,r=arguments.length,n=r<3?a:h===null?h=Object.getOwnPropertyDescriptor(a,t):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(m,a,t,h);else for(var _=m.length-1;_>=0;_--)(o=m[_])&&(n=(r<3?o(n):r>3?o(a,t,n):o(a,t))||n);return r>3&&n&&Object.defineProperty(a,t,n),n},f=this&&this.__param||function(m,a){return function(t,h){a(t,h,m)}};Object.defineProperty(c,"__esModule",{value:!0}),c.MouseService=void 0;const d=y(4725),u=y(9806);let C=class{constructor(m,a){this._renderService=m,this._charSizeService=a}getCoords(m,a,t,h,o){return(0,u.getCoords)(window,m,a,t,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(m,a){const t=(0,u.getCoordsRelativeToElement)(window,m,a);if(!(!this._charSizeService.hasValidSize||t[0]<0||t[1]<0||t[0]>=this._renderService.dimensions.css.canvas.width||t[1]>=this._renderService.dimensions.css.canvas.height))return{col:Math.floor(t[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(t[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(t[0]),y:Math.floor(t[1])}}};C=v([f(0,d.IRenderService),f(1,d.ICharSizeService)],C),c.MouseService=C},3230:function(q,c,y){var v=this&&this.__decorate||function(n,_,g,w){var p,S=arguments.length,x=S<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,g):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(n,_,g,w);else for(var A=n.length-1;A>=0;A--)(p=n[A])&&(x=(S<3?p(x):S>3?p(_,g,x):p(_,g))||x);return S>3&&x&&Object.defineProperty(_,g,x),x},f=this&&this.__param||function(n,_){return function(g,w){_(g,w,n)}};Object.defineProperty(c,"__esModule",{value:!0}),c.RenderService=void 0;const d=y(6193),u=y(8460),C=y(844),m=y(5596),a=y(3656),t=y(2585),h=y(4725),o=y(7226);let r=class extends C.Disposable{constructor(n,_,g,w,p,S,x,A){if(super(),this._rowCount=n,this._charSizeService=w,this._pausedResizeTask=new o.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new u.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new u.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new u.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new u.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this.register({dispose:()=>{var T;return(T=this._renderer)===null||T===void 0?void 0:T.dispose()}}),this._renderDebouncer=new d.RenderDebouncer(x.window,(T,B)=>this._renderRows(T,B)),this.register(this._renderDebouncer),this._screenDprMonitor=new m.ScreenDprMonitor(x.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(S.onResize(()=>this._fullRefresh())),this.register(S.buffers.onBufferActivate(()=>{var T;return(T=this._renderer)===null||T===void 0?void 0:T.clear()})),this.register(g.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(p.onDecorationRegistered(()=>this._fullRefresh())),this.register(p.onDecorationRemoved(()=>this._fullRefresh())),this.register(g.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(S.cols,S.rows),this._fullRefresh()})),this.register(g.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(S.buffer.y,S.buffer.y,!0))),this.register((0,a.addDisposableDomListener)(x.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(A.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in x.window){const T=new x.window.IntersectionObserver(B=>this._handleIntersectionChange(B[B.length-1]),{threshold:0});T.observe(_),this.register({dispose:()=>T.disconnect()})}}get dimensions(){return this._renderer.dimensions}_handleIntersectionChange(n){this._isPaused=n.isIntersecting===void 0?n.intersectionRatio===0:!n.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(n,_,g=!1){this._isPaused?this._needsFullRefresh=!0:(g||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(n,_,this._rowCount))}_renderRows(n,_){this._renderer&&(this._renderer.renderRows(n,_),this._needsSelectionRefresh&&(this._renderer.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:n,end:_}),this._onRender.fire({start:n,end:_}),this._isNextRenderRedrawOnly=!0)}resize(n,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer&&(this._renderer.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions))}hasRenderer(){return!!this._renderer}setRenderer(n){var _;(_=this._renderer)===null||_===void 0||_.dispose(),this._renderer=n,this._renderer.onRequestRedraw(g=>this.refreshRows(g.start,g.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(n){return this._renderDebouncer.addRefreshCallback(n)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var n,_;this._renderer&&((_=(n=this._renderer).clearTextureAtlas)===null||_===void 0||_.call(n),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer&&(this._renderer.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(n,_){this._renderer&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.handleResize(n,_)):this._renderer.handleResize(n,_),this._fullRefresh())}handleCharSizeChanged(){var n;(n=this._renderer)===null||n===void 0||n.handleCharSizeChanged()}handleBlur(){var n;(n=this._renderer)===null||n===void 0||n.handleBlur()}handleFocus(){var n;(n=this._renderer)===null||n===void 0||n.handleFocus()}handleSelectionChanged(n,_,g){var w;this._selectionState.start=n,this._selectionState.end=_,this._selectionState.columnSelectMode=g,(w=this._renderer)===null||w===void 0||w.handleSelectionChanged(n,_,g)}handleCursorMove(){var n;(n=this._renderer)===null||n===void 0||n.handleCursorMove()}clear(){var n;(n=this._renderer)===null||n===void 0||n.clear()}};r=v([f(2,t.IOptionsService),f(3,h.ICharSizeService),f(4,t.IDecorationService),f(5,t.IBufferService),f(6,h.ICoreBrowserService),f(7,h.IThemeService)],r),c.RenderService=r},9312:function(q,c,y){var v=this&&this.__decorate||function(p,S,x,A){var T,B=arguments.length,U=B<3?S:A===null?A=Object.getOwnPropertyDescriptor(S,x):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(p,S,x,A);else for(var D=p.length-1;D>=0;D--)(T=p[D])&&(U=(B<3?T(U):B>3?T(S,x,U):T(S,x))||U);return B>3&&U&&Object.defineProperty(S,x,U),U},f=this&&this.__param||function(p,S){return function(x,A){S(x,A,p)}};Object.defineProperty(c,"__esModule",{value:!0}),c.SelectionService=void 0;const d=y(6114),u=y(456),C=y(511),m=y(8460),a=y(4725),t=y(2585),h=y(9806),o=y(9504),r=y(844),n=y(4841),_=String.fromCharCode(160),g=new RegExp(_,"g");let w=class extends r.Disposable{constructor(p,S,x,A,T,B,U,D,H){super(),this._element=p,this._screenElement=S,this._linkifier=x,this._bufferService=A,this._coreService=T,this._mouseService=B,this._optionsService=U,this._renderService=D,this._coreBrowserService=H,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new C.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new m.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new m.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new m.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=L=>this._handleMouseMove(L),this._mouseUpListener=L=>this._handleMouseUp(L),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(L=>this._handleTrim(L)),this.register(this._bufferService.buffers.onBufferActivate(L=>this._handleBufferActivate(L))),this.enable(),this._model=new u.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,r.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const p=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!(!p||!S||p[0]===S[0]&&p[1]===S[1])}get selectionText(){const p=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;if(!p||!S)return"";const x=this._bufferService.buffer,A=[];if(this._activeSelectionMode===3){if(p[0]===S[0])return"";const T=p[0]<S[0]?p[0]:S[0],B=p[0]<S[0]?S[0]:p[0];for(let U=p[1];U<=S[1];U++){const D=x.translateBufferLineToString(U,!0,T,B);A.push(D)}}else{const T=p[1]===S[1]?S[0]:void 0;A.push(x.translateBufferLineToString(p[1],!0,p[0],T));for(let B=p[1]+1;B<=S[1]-1;B++){const U=x.lines.get(B),D=x.translateBufferLineToString(B,!0);U!=null&&U.isWrapped?A[A.length-1]+=D:A.push(D)}if(p[1]!==S[1]){const B=x.lines.get(S[1]),U=x.translateBufferLineToString(S[1],!0,0,S[0]);B&&B.isWrapped?A[A.length-1]+=U:A.push(U)}}return A.map(T=>T.replace(g," ")).join(d.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(p){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),d.isLinux&&p&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(p){const S=this._getMouseBufferCoords(p),x=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!!(x&&A&&S)&&this._areCoordsInSelection(S,x,A)}isCellInSelection(p,S){const x=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!x||!A)&&this._areCoordsInSelection([p,S],x,A)}_areCoordsInSelection(p,S,x){return p[1]>S[1]&&p[1]<x[1]||S[1]===x[1]&&p[1]===S[1]&&p[0]>=S[0]&&p[0]<x[0]||S[1]<x[1]&&p[1]===x[1]&&p[0]<x[0]||S[1]<x[1]&&p[1]===S[1]&&p[0]>=S[0]}_selectWordAtCursor(p,S){var x,A;const T=(A=(x=this._linkifier.currentLink)===null||x===void 0?void 0:x.link)===null||A===void 0?void 0:A.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,n.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const B=this._getMouseBufferCoords(p);return!!B&&(this._selectWordAt(B,S),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(p,S){this._model.clearSelection(),p=Math.max(p,0),S=Math.min(S,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,p],this._model.selectionEnd=[this._bufferService.cols,S],this.refresh(),this._onSelectionChange.fire()}_handleTrim(p){this._model.handleTrim(p)&&this.refresh()}_getMouseBufferCoords(p){const S=this._mouseService.getCoords(p,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(S)return S[0]--,S[1]--,S[1]+=this._bufferService.buffer.ydisp,S}_getMouseEventScrollAmount(p){let S=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,p,this._screenElement)[1];const x=this._renderService.dimensions.css.canvas.height;return S>=0&&S<=x?0:(S>x&&(S-=x),S=Math.min(Math.max(S,-50),50),S/=50,S/Math.abs(S)+Math.round(14*S))}shouldForceSelection(p){return d.isMac?p.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:p.shiftKey}handleMouseDown(p){if(this._mouseDownTimeStamp=p.timeStamp,(p.button!==2||!this.hasSelection)&&p.button===0){if(!this._enabled){if(!this.shouldForceSelection(p))return;p.stopPropagation()}p.preventDefault(),this._dragScrollAmount=0,this._enabled&&p.shiftKey?this._handleIncrementalClick(p):p.detail===1?this._handleSingleClick(p):p.detail===2?this._handleDoubleClick(p):p.detail===3&&this._handleTripleClick(p),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(p){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(p))}_handleSingleClick(p){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(p)?3:0,this._model.selectionStart=this._getMouseBufferCoords(p),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const S=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);S&&S.length!==this._model.selectionStart[0]&&S.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(p){this._selectWordAtCursor(p,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(p){const S=this._getMouseBufferCoords(p);S&&(this._activeSelectionMode=2,this._selectLineAt(S[1]))}shouldColumnSelect(p){return p.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(p){if(p.stopImmediatePropagation(),!this._model.selectionStart)return;const S=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(p),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(p),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const x=this._bufferService.buffer;if(this._model.selectionEnd[1]<x.lines.length){const A=x.lines.get(this._model.selectionEnd[1]);A&&A.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}S&&S[0]===this._model.selectionEnd[0]&&S[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const p=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(p.ydisp+this._bufferService.rows,p.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=p.ydisp),this.refresh()}}_handleMouseUp(p){const S=p.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&S<500&&p.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const x=this._mouseService.getCoords(p,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(x&&x[0]!==void 0&&x[1]!==void 0){const A=(0,o.moveToCellSequence)(x[0]-1,x[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(A,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const p=this._model.finalSelectionStart,S=this._model.finalSelectionEnd,x=!(!p||!S||p[0]===S[0]&&p[1]===S[1]);x?p&&S&&(this._oldSelectionStart&&this._oldSelectionEnd&&p[0]===this._oldSelectionStart[0]&&p[1]===this._oldSelectionStart[1]&&S[0]===this._oldSelectionEnd[0]&&S[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(p,S,x)):this._oldHasSelection&&this._fireOnSelectionChange(p,S,x)}_fireOnSelectionChange(p,S,x){this._oldSelectionStart=p,this._oldSelectionEnd=S,this._oldHasSelection=x,this._onSelectionChange.fire()}_handleBufferActivate(p){this.clearSelection(),this._trimListener.dispose(),this._trimListener=p.activeBuffer.lines.onTrim(S=>this._handleTrim(S))}_convertViewportColToCharacterIndex(p,S){let x=S;for(let A=0;S>=A;A++){const T=p.loadCell(A,this._workCell).getChars().length;this._workCell.getWidth()===0?x--:T>1&&S!==A&&(x+=T-1)}return x}setSelection(p,S,x){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[p,S],this._model.selectionStartLength=x,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(p){this._isClickInSelection(p)||(this._selectWordAtCursor(p,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(p,S,x=!0,A=!0){if(p[0]>=this._bufferService.cols)return;const T=this._bufferService.buffer,B=T.lines.get(p[1]);if(!B)return;const U=T.translateBufferLineToString(p[1],!1);let D=this._convertViewportColToCharacterIndex(B,p[0]),H=D;const L=p[0]-D;let O=0,I=0,P=0,Q=0;if(U.charAt(D)===" "){for(;D>0&&U.charAt(D-1)===" ";)D--;for(;H<U.length&&U.charAt(H+1)===" ";)H++}else{let V=p[0],re=p[0];B.getWidth(V)===0&&(O++,V--),B.getWidth(re)===2&&(I++,re++);const j=B.getString(re).length;for(j>1&&(Q+=j-1,H+=j-1);V>0&&D>0&&!this._isCharWordSeparator(B.loadCell(V-1,this._workCell));){B.loadCell(V-1,this._workCell);const z=this._workCell.getChars().length;this._workCell.getWidth()===0?(O++,V--):z>1&&(P+=z-1,D-=z-1),D--,V--}for(;re<B.length&&H+1<U.length&&!this._isCharWordSeparator(B.loadCell(re+1,this._workCell));){B.loadCell(re+1,this._workCell);const z=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,re++):z>1&&(Q+=z-1,H+=z-1),H++,re++}}H++;let N=D+L-O+P,K=Math.min(this._bufferService.cols,H-D+O+I-P-Q);if(S||U.slice(D,H).trim()!==""){if(x&&N===0&&B.getCodePoint(0)!==32){const V=T.lines.get(p[1]-1);if(V&&B.isWrapped&&V.getCodePoint(this._bufferService.cols-1)!==32){const re=this._getWordAt([this._bufferService.cols-1,p[1]-1],!1,!0,!1);if(re){const j=this._bufferService.cols-re.start;N-=j,K+=j}}}if(A&&N+K===this._bufferService.cols&&B.getCodePoint(this._bufferService.cols-1)!==32){const V=T.lines.get(p[1]+1);if((V==null?void 0:V.isWrapped)&&V.getCodePoint(0)!==32){const re=this._getWordAt([0,p[1]+1],!1,!1,!0);re&&(K+=re.length)}}return{start:N,length:K}}}_selectWordAt(p,S){const x=this._getWordAt(p,S);if(x){for(;x.start<0;)x.start+=this._bufferService.cols,p[1]--;this._model.selectionStart=[x.start,p[1]],this._model.selectionStartLength=x.length}}_selectToWordAt(p){const S=this._getWordAt(p,!0);if(S){let x=p[1];for(;S.start<0;)S.start+=this._bufferService.cols,x--;if(!this._model.areSelectionValuesReversed())for(;S.start+S.length>this._bufferService.cols;)S.length-=this._bufferService.cols,x++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?S.start:S.start+S.length,x]}}_isCharWordSeparator(p){return p.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(p.getChars())>=0}_selectLineAt(p){const S=this._bufferService.buffer.getWrappedRangeForLine(p),x={start:{x:0,y:S.first},end:{x:this._bufferService.cols-1,y:S.last}};this._model.selectionStart=[0,S.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,n.getRangeLength)(x,this._bufferService.cols)}};w=v([f(3,t.IBufferService),f(4,t.ICoreService),f(5,a.IMouseService),f(6,t.IOptionsService),f(7,a.IRenderService),f(8,a.ICoreBrowserService)],w),c.SelectionService=w},4725:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.IThemeService=c.ICharacterJoinerService=c.ISelectionService=c.IRenderService=c.IMouseService=c.ICoreBrowserService=c.ICharSizeService=void 0;const v=y(8343);c.ICharSizeService=(0,v.createDecorator)("CharSizeService"),c.ICoreBrowserService=(0,v.createDecorator)("CoreBrowserService"),c.IMouseService=(0,v.createDecorator)("MouseService"),c.IRenderService=(0,v.createDecorator)("RenderService"),c.ISelectionService=(0,v.createDecorator)("SelectionService"),c.ICharacterJoinerService=(0,v.createDecorator)("CharacterJoinerService"),c.IThemeService=(0,v.createDecorator)("ThemeService")},6731:function(q,c,y){var v=this&&this.__decorate||function(w,p,S,x){var A,T=arguments.length,B=T<3?p:x===null?x=Object.getOwnPropertyDescriptor(p,S):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(w,p,S,x);else for(var U=w.length-1;U>=0;U--)(A=w[U])&&(B=(T<3?A(B):T>3?A(p,S,B):A(p,S))||B);return T>3&&B&&Object.defineProperty(p,S,B),B},f=this&&this.__param||function(w,p){return function(S,x){p(S,x,w)}};Object.defineProperty(c,"__esModule",{value:!0}),c.ThemeService=c.DEFAULT_ANSI_COLORS=void 0;const d=y(7239),u=y(8055),C=y(8460),m=y(844),a=y(2585),t=u.css.toColor("#ffffff"),h=u.css.toColor("#000000"),o=u.css.toColor("#ffffff"),r=u.css.toColor("#000000"),n={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};c.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const w=[u.css.toColor("#2e3436"),u.css.toColor("#cc0000"),u.css.toColor("#4e9a06"),u.css.toColor("#c4a000"),u.css.toColor("#3465a4"),u.css.toColor("#75507b"),u.css.toColor("#06989a"),u.css.toColor("#d3d7cf"),u.css.toColor("#555753"),u.css.toColor("#ef2929"),u.css.toColor("#8ae234"),u.css.toColor("#fce94f"),u.css.toColor("#729fcf"),u.css.toColor("#ad7fa8"),u.css.toColor("#34e2e2"),u.css.toColor("#eeeeec")],p=[0,95,135,175,215,255];for(let S=0;S<216;S++){const x=p[S/36%6|0],A=p[S/6%6|0],T=p[S%6];w.push({css:u.channels.toCss(x,A,T),rgba:u.channels.toRgba(x,A,T)})}for(let S=0;S<24;S++){const x=8+10*S;w.push({css:u.channels.toCss(x,x,x),rgba:u.channels.toRgba(x,x,x)})}return w})());let _=class extends m.Disposable{constructor(w){super(),this._optionsService=w,this._onChangeColors=this.register(new C.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._contrastCache=new d.ColorContrastCache,this._colors={foreground:t,background:h,cursor:o,cursorAccent:r,selectionForeground:void 0,selectionBackgroundTransparent:n,selectionBackgroundOpaque:u.color.blend(h,n),selectionInactiveBackgroundTransparent:n,selectionInactiveBackgroundOpaque:u.color.blend(h,n),ansi:c.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(w={}){const p=this._colors;if(p.foreground=g(w.foreground,t),p.background=g(w.background,h),p.cursor=g(w.cursor,o),p.cursorAccent=g(w.cursorAccent,r),p.selectionBackgroundTransparent=g(w.selectionBackground,n),p.selectionBackgroundOpaque=u.color.blend(p.background,p.selectionBackgroundTransparent),p.selectionInactiveBackgroundTransparent=g(w.selectionInactiveBackground,p.selectionBackgroundTransparent),p.selectionInactiveBackgroundOpaque=u.color.blend(p.background,p.selectionInactiveBackgroundTransparent),p.selectionForeground=w.selectionForeground?g(w.selectionForeground,u.NULL_COLOR):void 0,p.selectionForeground===u.NULL_COLOR&&(p.selectionForeground=void 0),u.color.isOpaque(p.selectionBackgroundTransparent)&&(p.selectionBackgroundTransparent=u.color.opacity(p.selectionBackgroundTransparent,.3)),u.color.isOpaque(p.selectionInactiveBackgroundTransparent)&&(p.selectionInactiveBackgroundTransparent=u.color.opacity(p.selectionInactiveBackgroundTransparent,.3)),p.ansi=c.DEFAULT_ANSI_COLORS.slice(),p.ansi[0]=g(w.black,c.DEFAULT_ANSI_COLORS[0]),p.ansi[1]=g(w.red,c.DEFAULT_ANSI_COLORS[1]),p.ansi[2]=g(w.green,c.DEFAULT_ANSI_COLORS[2]),p.ansi[3]=g(w.yellow,c.DEFAULT_ANSI_COLORS[3]),p.ansi[4]=g(w.blue,c.DEFAULT_ANSI_COLORS[4]),p.ansi[5]=g(w.magenta,c.DEFAULT_ANSI_COLORS[5]),p.ansi[6]=g(w.cyan,c.DEFAULT_ANSI_COLORS[6]),p.ansi[7]=g(w.white,c.DEFAULT_ANSI_COLORS[7]),p.ansi[8]=g(w.brightBlack,c.DEFAULT_ANSI_COLORS[8]),p.ansi[9]=g(w.brightRed,c.DEFAULT_ANSI_COLORS[9]),p.ansi[10]=g(w.brightGreen,c.DEFAULT_ANSI_COLORS[10]),p.ansi[11]=g(w.brightYellow,c.DEFAULT_ANSI_COLORS[11]),p.ansi[12]=g(w.brightBlue,c.DEFAULT_ANSI_COLORS[12]),p.ansi[13]=g(w.brightMagenta,c.DEFAULT_ANSI_COLORS[13]),p.ansi[14]=g(w.brightCyan,c.DEFAULT_ANSI_COLORS[14]),p.ansi[15]=g(w.brightWhite,c.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){const S=Math.min(p.ansi.length-16,w.extendedAnsi.length);for(let x=0;x<S;x++)p.ansi[x+16]=g(w.extendedAnsi[x],c.DEFAULT_ANSI_COLORS[x+16])}this._contrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let p=0;p<this._restoreColors.ansi.length;++p)this._colors.ansi[p]=this._restoreColors.ansi[p]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function g(w,p){if(w!==void 0)try{return u.css.toColor(w)}catch{}return p}_=v([f(0,a.IOptionsService)],_),c.ThemeService=_},6349:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CircularList=void 0;const v=y(8460),f=y(844);class d extends f.Disposable{constructor(C){super(),this._maxLength=C,this.onDeleteEmitter=this.register(new v.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new v.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new v.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(C){if(this._maxLength===C)return;const m=new Array(C);for(let a=0;a<Math.min(C,this.length);a++)m[a]=this._array[this._getCyclicIndex(a)];this._array=m,this._maxLength=C,this._startIndex=0}get length(){return this._length}set length(C){if(C>this._length)for(let m=this._length;m<C;m++)this._array[m]=void 0;this._length=C}get(C){return this._array[this._getCyclicIndex(C)]}set(C,m){this._array[this._getCyclicIndex(C)]=m}push(C){this._array[this._getCyclicIndex(this._length)]=C,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(C,m,...a){if(m){for(let t=C;t<this._length-m;t++)this._array[this._getCyclicIndex(t)]=this._array[this._getCyclicIndex(t+m)];this._length-=m,this.onDeleteEmitter.fire({index:C,amount:m})}for(let t=this._length-1;t>=C;t--)this._array[this._getCyclicIndex(t+a.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<a.length;t++)this._array[this._getCyclicIndex(C+t)]=a[t];if(a.length&&this.onInsertEmitter.fire({index:C,amount:a.length}),this._length+a.length>this._maxLength){const t=this._length+a.length-this._maxLength;this._startIndex+=t,this._length=this._maxLength,this.onTrimEmitter.fire(t)}else this._length+=a.length}trimStart(C){C>this._length&&(C=this._length),this._startIndex+=C,this._length-=C,this.onTrimEmitter.fire(C)}shiftElements(C,m,a){if(!(m<=0)){if(C<0||C>=this._length)throw new Error("start argument out of range");if(C+a<0)throw new Error("Cannot shift elements in list beyond index 0");if(a>0){for(let h=m-1;h>=0;h--)this.set(C+h+a,this.get(C+h));const t=C+m+a-this._length;if(t>0)for(this._length+=t;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let t=0;t<m;t++)this.set(C+t+a,this.get(C+t))}}_getCyclicIndex(C){return(this._startIndex+C)%this._maxLength}}c.CircularList=d},1439:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.clone=void 0,c.clone=function y(v,f=5){if(typeof v!="object")return v;const d=Array.isArray(v)?[]:{};for(const u in v)d[u]=f<=1?v[u]:v[u]&&y(v[u],f-1);return d}},8055:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.contrastRatio=c.toPaddedHex=c.rgba=c.rgb=c.css=c.color=c.channels=c.NULL_COLOR=void 0;const v=y(6114);let f=0,d=0,u=0,C=0;var m,a,t;function h(r){const n=r.toString(16);return n.length<2?"0"+n:n}function o(r,n){return r<n?(n+.05)/(r+.05):(r+.05)/(n+.05)}c.NULL_COLOR={css:"#00000000",rgba:0},function(r){r.toCss=function(n,_,g,w){return w!==void 0?`#${h(n)}${h(_)}${h(g)}${h(w)}`:`#${h(n)}${h(_)}${h(g)}`},r.toRgba=function(n,_,g,w=255){return(n<<24|_<<16|g<<8|w)>>>0}}(m=c.channels||(c.channels={})),function(r){function n(_,g){return C=Math.round(255*g),[f,d,u]=t.toChannels(_.rgba),{css:m.toCss(f,d,u,C),rgba:m.toRgba(f,d,u,C)}}r.blend=function(_,g){if(C=(255&g.rgba)/255,C===1)return{css:g.css,rgba:g.rgba};const w=g.rgba>>24&255,p=g.rgba>>16&255,S=g.rgba>>8&255,x=_.rgba>>24&255,A=_.rgba>>16&255,T=_.rgba>>8&255;return f=x+Math.round((w-x)*C),d=A+Math.round((p-A)*C),u=T+Math.round((S-T)*C),{css:m.toCss(f,d,u),rgba:m.toRgba(f,d,u)}},r.isOpaque=function(_){return(255&_.rgba)==255},r.ensureContrastRatio=function(_,g,w){const p=t.ensureContrastRatio(_.rgba,g.rgba,w);if(p)return t.toColor(p>>24&255,p>>16&255,p>>8&255)},r.opaque=function(_){const g=(255|_.rgba)>>>0;return[f,d,u]=t.toChannels(g),{css:m.toCss(f,d,u),rgba:g}},r.opacity=n,r.multiplyOpacity=function(_,g){return C=255&_.rgba,n(_,C*g/255)},r.toColorRGB=function(_){return[_.rgba>>24&255,_.rgba>>16&255,_.rgba>>8&255]}}(c.color||(c.color={})),function(r){let n,_;if(!v.isNode){const g=document.createElement("canvas");g.width=1,g.height=1;const w=g.getContext("2d",{willReadFrequently:!0});w&&(n=w,n.globalCompositeOperation="copy",_=n.createLinearGradient(0,0,1,1))}r.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return f=parseInt(g.slice(1,2).repeat(2),16),d=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),t.toColor(f,d,u);case 5:return f=parseInt(g.slice(1,2).repeat(2),16),d=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),C=parseInt(g.slice(4,5).repeat(2),16),t.toColor(f,d,u,C);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}const w=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return f=parseInt(w[1]),d=parseInt(w[2]),u=parseInt(w[3]),C=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),t.toColor(f,d,u,C);if(!n||!_)throw new Error("css.toColor: Unsupported css format");if(n.fillStyle=_,n.fillStyle=g,typeof n.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(n.fillRect(0,0,1,1),[f,d,u,C]=n.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(f,d,u,C),css:g}}}(c.css||(c.css={})),function(r){function n(_,g,w){const p=_/255,S=g/255,x=w/255;return .2126*(p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4))+.7152*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.0722*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))}r.relativeLuminance=function(_){return n(_>>16&255,_>>8&255,255&_)},r.relativeLuminance2=n}(a=c.rgb||(c.rgb={})),function(r){function n(g,w,p){const S=g>>24&255,x=g>>16&255,A=g>>8&255;let T=w>>24&255,B=w>>16&255,U=w>>8&255,D=o(a.relativeLuminance2(T,B,U),a.relativeLuminance2(S,x,A));for(;D<p&&(T>0||B>0||U>0);)T-=Math.max(0,Math.ceil(.1*T)),B-=Math.max(0,Math.ceil(.1*B)),U-=Math.max(0,Math.ceil(.1*U)),D=o(a.relativeLuminance2(T,B,U),a.relativeLuminance2(S,x,A));return(T<<24|B<<16|U<<8|255)>>>0}function _(g,w,p){const S=g>>24&255,x=g>>16&255,A=g>>8&255;let T=w>>24&255,B=w>>16&255,U=w>>8&255,D=o(a.relativeLuminance2(T,B,U),a.relativeLuminance2(S,x,A));for(;D<p&&(T<255||B<255||U<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),B=Math.min(255,B+Math.ceil(.1*(255-B))),U=Math.min(255,U+Math.ceil(.1*(255-U))),D=o(a.relativeLuminance2(T,B,U),a.relativeLuminance2(S,x,A));return(T<<24|B<<16|U<<8|255)>>>0}r.ensureContrastRatio=function(g,w,p){const S=a.relativeLuminance(g>>8),x=a.relativeLuminance(w>>8);if(o(S,x)<p){if(x<S){const B=n(g,w,p),U=o(S,a.relativeLuminance(B>>8));if(U<p){const D=_(g,w,p);return U>o(S,a.relativeLuminance(D>>8))?B:D}return B}const A=_(g,w,p),T=o(S,a.relativeLuminance(A>>8));if(T<p){const B=n(g,w,p);return T>o(S,a.relativeLuminance(B>>8))?A:B}return A}},r.reduceLuminance=n,r.increaseLuminance=_,r.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},r.toColor=function(g,w,p,S){return{css:m.toCss(g,w,p,S),rgba:m.toRgba(g,w,p,S)}}}(t=c.rgba||(c.rgba={})),c.toPaddedHex=h,c.contrastRatio=o},8969:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CoreTerminal=void 0;const v=y(844),f=y(2585),d=y(4348),u=y(7866),C=y(744),m=y(7302),a=y(6975),t=y(8460),h=y(1753),o=y(1480),r=y(7994),n=y(9282),_=y(5435),g=y(5981),w=y(2660);let p=!1;class S extends v.Disposable{constructor(A){super(),this._onBinary=this.register(new t.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new t.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new t.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new t.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new t.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new t.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new m.OptionsService(A)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(C.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(u.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(a.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(o.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(r.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new _.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,t.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,t.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,t.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,t.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onSpecificOptionChange("windowsMode",T=>this._handleWindowsModeOptionChange(T))),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new g.WriteBuffer((T,B)=>this._inputHandler.parse(T,B))),this.register((0,t.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed)),this.register((0,v.toDisposable)(()=>{var T;(T=this._windowsMode)===null||T===void 0||T.dispose(),this._windowsMode=void 0}))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new t.EventEmitter),this._onScroll.event(A=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(A.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(A){for(const T in A)this.optionsService.options[T]=A[T]}write(A,T){this._writeBuffer.write(A,T)}writeSync(A,T){this._logService.logLevel<=f.LogLevelEnum.WARN&&!p&&(this._logService.warn("writeSync is unreliable and will be removed soon."),p=!0),this._writeBuffer.writeSync(A,T)}resize(A,T){isNaN(A)||isNaN(T)||(A=Math.max(A,C.MINIMUM_COLS),T=Math.max(T,C.MINIMUM_ROWS),this._bufferService.resize(A,T))}scroll(A,T=!1){this._bufferService.scroll(A,T)}scrollLines(A,T,B){this._bufferService.scrollLines(A,T,B)}scrollPages(A){this._bufferService.scrollPages(A)}scrollToTop(){this._bufferService.scrollToTop()}scrollToBottom(){this._bufferService.scrollToBottom()}scrollToLine(A){this._bufferService.scrollToLine(A)}registerEscHandler(A,T){return this._inputHandler.registerEscHandler(A,T)}registerDcsHandler(A,T){return this._inputHandler.registerDcsHandler(A,T)}registerCsiHandler(A,T){return this._inputHandler.registerCsiHandler(A,T)}registerOscHandler(A,T){return this._inputHandler.registerOscHandler(A,T)}_setup(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsModeOptionChange(A){var T;A?this._enableWindowsMode():((T=this._windowsMode)===null||T===void 0||T.dispose(),this._windowsMode=void 0)}_enableWindowsMode(){if(!this._windowsMode){const A=[];A.push(this.onLineFeed(n.updateWindowsModeWrappedState.bind(null,this._bufferService))),A.push(this.registerCsiHandler({final:"H"},()=>((0,n.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsMode={dispose:()=>{for(const T of A)T.dispose()}}}}}c.CoreTerminal=S},8460:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.forwardEvent=c.EventEmitter=void 0,c.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=y=>(this._listeners.push(y),{dispose:()=>{if(!this._disposed){for(let v=0;v<this._listeners.length;v++)if(this._listeners[v]===y)return void this._listeners.splice(v,1)}}})),this._event}fire(y,v){const f=[];for(let d=0;d<this._listeners.length;d++)f.push(this._listeners[d]);for(let d=0;d<f.length;d++)f[d].call(void 0,y,v)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},c.forwardEvent=function(y,v){return y(f=>v.fire(f))}},5435:function(q,c,y){var v=this&&this.__decorate||function(H,L,O,I){var P,Q=arguments.length,N=Q<3?L:I===null?I=Object.getOwnPropertyDescriptor(L,O):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(H,L,O,I);else for(var K=H.length-1;K>=0;K--)(P=H[K])&&(N=(Q<3?P(N):Q>3?P(L,O,N):P(L,O))||N);return Q>3&&N&&Object.defineProperty(L,O,N),N},f=this&&this.__param||function(H,L){return function(O,I){L(O,I,H)}};Object.defineProperty(c,"__esModule",{value:!0}),c.InputHandler=c.WindowsOptionsReportType=void 0;const d=y(2584),u=y(7116),C=y(2015),m=y(844),a=y(482),t=y(8437),h=y(8460),o=y(643),r=y(511),n=y(3734),_=y(2585),g=y(6242),w=y(6351),p=y(5941),S={"(":0,")":1,"*":2,"+":3,"-":1,".":2},x=131072;function A(H,L){if(H>24)return L.setWinLines||!1;switch(H){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var T;(function(H){H[H.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",H[H.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T=c.WindowsOptionsReportType||(c.WindowsOptionsReportType={}));let B=0;class U extends m.Disposable{constructor(L,O,I,P,Q,N,K,V,re=new C.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=O,this._coreService=I,this._logService=P,this._optionsService=Q,this._oscLinkService=N,this._coreMouseService=K,this._unicodeService=V,this._parser=re,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new a.StringToUtf32,this._utf8Decoder=new a.Utf8ToUtf32,this._workCell=new r.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new D(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(j=>this._activeBuffer=j.activeBuffer)),this._parser.setCsiHandlerFallback((j,z)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(j),params:z.toArray()})}),this._parser.setEscHandlerFallback(j=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(j)})}),this._parser.setExecuteHandlerFallback(j=>{this._logService.debug("Unknown EXECUTE code: ",{code:j})}),this._parser.setOscHandlerFallback((j,z,W)=>{this._logService.debug("Unknown OSC code: ",{identifier:j,action:z,data:W})}),this._parser.setDcsHandlerFallback((j,z,W)=>{z==="HOOK"&&(W=W.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(j),action:z,payload:W})}),this._parser.setPrintHandler((j,z,W)=>this.print(j,z,W)),this._parser.registerCsiHandler({final:"@"},j=>this.insertChars(j)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},j=>this.scrollLeft(j)),this._parser.registerCsiHandler({final:"A"},j=>this.cursorUp(j)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},j=>this.scrollRight(j)),this._parser.registerCsiHandler({final:"B"},j=>this.cursorDown(j)),this._parser.registerCsiHandler({final:"C"},j=>this.cursorForward(j)),this._parser.registerCsiHandler({final:"D"},j=>this.cursorBackward(j)),this._parser.registerCsiHandler({final:"E"},j=>this.cursorNextLine(j)),this._parser.registerCsiHandler({final:"F"},j=>this.cursorPrecedingLine(j)),this._parser.registerCsiHandler({final:"G"},j=>this.cursorCharAbsolute(j)),this._parser.registerCsiHandler({final:"H"},j=>this.cursorPosition(j)),this._parser.registerCsiHandler({final:"I"},j=>this.cursorForwardTab(j)),this._parser.registerCsiHandler({final:"J"},j=>this.eraseInDisplay(j,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},j=>this.eraseInDisplay(j,!0)),this._parser.registerCsiHandler({final:"K"},j=>this.eraseInLine(j,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},j=>this.eraseInLine(j,!0)),this._parser.registerCsiHandler({final:"L"},j=>this.insertLines(j)),this._parser.registerCsiHandler({final:"M"},j=>this.deleteLines(j)),this._parser.registerCsiHandler({final:"P"},j=>this.deleteChars(j)),this._parser.registerCsiHandler({final:"S"},j=>this.scrollUp(j)),this._parser.registerCsiHandler({final:"T"},j=>this.scrollDown(j)),this._parser.registerCsiHandler({final:"X"},j=>this.eraseChars(j)),this._parser.registerCsiHandler({final:"Z"},j=>this.cursorBackwardTab(j)),this._parser.registerCsiHandler({final:"`"},j=>this.charPosAbsolute(j)),this._parser.registerCsiHandler({final:"a"},j=>this.hPositionRelative(j)),this._parser.registerCsiHandler({final:"b"},j=>this.repeatPrecedingCharacter(j)),this._parser.registerCsiHandler({final:"c"},j=>this.sendDeviceAttributesPrimary(j)),this._parser.registerCsiHandler({prefix:">",final:"c"},j=>this.sendDeviceAttributesSecondary(j)),this._parser.registerCsiHandler({final:"d"},j=>this.linePosAbsolute(j)),this._parser.registerCsiHandler({final:"e"},j=>this.vPositionRelative(j)),this._parser.registerCsiHandler({final:"f"},j=>this.hVPosition(j)),this._parser.registerCsiHandler({final:"g"},j=>this.tabClear(j)),this._parser.registerCsiHandler({final:"h"},j=>this.setMode(j)),this._parser.registerCsiHandler({prefix:"?",final:"h"},j=>this.setModePrivate(j)),this._parser.registerCsiHandler({final:"l"},j=>this.resetMode(j)),this._parser.registerCsiHandler({prefix:"?",final:"l"},j=>this.resetModePrivate(j)),this._parser.registerCsiHandler({final:"m"},j=>this.charAttributes(j)),this._parser.registerCsiHandler({final:"n"},j=>this.deviceStatus(j)),this._parser.registerCsiHandler({prefix:"?",final:"n"},j=>this.deviceStatusPrivate(j)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},j=>this.softReset(j)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},j=>this.setCursorStyle(j)),this._parser.registerCsiHandler({final:"r"},j=>this.setScrollRegion(j)),this._parser.registerCsiHandler({final:"s"},j=>this.saveCursor(j)),this._parser.registerCsiHandler({final:"t"},j=>this.windowOptions(j)),this._parser.registerCsiHandler({final:"u"},j=>this.restoreCursor(j)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},j=>this.insertColumns(j)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},j=>this.deleteColumns(j)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},j=>this.selectProtected(j)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},j=>this.requestMode(j,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},j=>this.requestMode(j,!1)),this._parser.setExecuteHandler(d.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(d.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(d.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(d.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(d.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(d.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d.C1.IND,()=>this.index()),this._parser.setExecuteHandler(d.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new g.OscHandler(j=>(this.setTitle(j),this.setIconName(j),!0))),this._parser.registerOscHandler(1,new g.OscHandler(j=>this.setIconName(j))),this._parser.registerOscHandler(2,new g.OscHandler(j=>this.setTitle(j))),this._parser.registerOscHandler(4,new g.OscHandler(j=>this.setOrReportIndexedColor(j))),this._parser.registerOscHandler(8,new g.OscHandler(j=>this.setHyperlink(j))),this._parser.registerOscHandler(10,new g.OscHandler(j=>this.setOrReportFgColor(j))),this._parser.registerOscHandler(11,new g.OscHandler(j=>this.setOrReportBgColor(j))),this._parser.registerOscHandler(12,new g.OscHandler(j=>this.setOrReportCursorColor(j))),this._parser.registerOscHandler(104,new g.OscHandler(j=>this.restoreIndexedColor(j))),this._parser.registerOscHandler(110,new g.OscHandler(j=>this.restoreFgColor(j))),this._parser.registerOscHandler(111,new g.OscHandler(j=>this.restoreBgColor(j))),this._parser.registerOscHandler(112,new g.OscHandler(j=>this.restoreCursorColor(j))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const j in u.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:j},()=>this.selectCharset("("+j)),this._parser.registerEscHandler({intermediates:")",final:j},()=>this.selectCharset(")"+j)),this._parser.registerEscHandler({intermediates:"*",final:j},()=>this.selectCharset("*"+j)),this._parser.registerEscHandler({intermediates:"+",final:j},()=>this.selectCharset("+"+j)),this._parser.registerEscHandler({intermediates:"-",final:j},()=>this.selectCharset("-"+j)),this._parser.registerEscHandler({intermediates:".",final:j},()=>this.selectCharset("."+j)),this._parser.registerEscHandler({intermediates:"/",final:j},()=>this.selectCharset("/"+j));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(j=>(this._logService.error("Parsing error: ",j),j)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new w.DcsHandler((j,z)=>this.requestStatusString(j,z)))}getAttrData(){return this._curAttrData}_preserveStack(L,O,I,P){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=O,this._parseStack.decodedLength=I,this._parseStack.position=P}_logSlowResolvingAsync(L){this._logService.logLevel<=_.LogLevelEnum.WARN&&Promise.race([L,new Promise((O,I)=>setTimeout(()=>I("#SLOW_TIMEOUT"),5e3))]).catch(O=>{if(O!=="#SLOW_TIMEOUT")throw O;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,O){let I,P=this._activeBuffer.x,Q=this._activeBuffer.y,N=0;const K=this._parseStack.paused;if(K){if(I=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,O))return this._logSlowResolvingAsync(I),I;P=this._parseStack.cursorStartX,Q=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>x&&(N=this._parseStack.position+x)}if(this._logService.logLevel<=_.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,V=>String.fromCharCode(V)).join("")}"`),typeof L=="string"?L.split("").map(V=>V.charCodeAt(0)):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<x&&(this._parseBuffer=new Uint32Array(Math.min(L.length,x))),K||this._dirtyRowTracker.clearRange(),L.length>x)for(let V=N;V<L.length;V+=x){const re=V+x<L.length?V+x:L.length,j=typeof L=="string"?this._stringDecoder.decode(L.substring(V,re),this._parseBuffer):this._utf8Decoder.decode(L.subarray(V,re),this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,j))return this._preserveStack(P,Q,j,V),this._logSlowResolvingAsync(I),I}else if(!K){const V=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,V))return this._preserveStack(P,Q,V,0),this._logSlowResolvingAsync(I),I}this._activeBuffer.x===P&&this._activeBuffer.y===Q||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(L,O,I){let P,Q;const N=this._charsetService.charset,K=this._optionsService.rawOptions.screenReaderMode,V=this._bufferService.cols,re=this._coreService.decPrivateModes.wraparound,j=this._coreService.modes.insertMode,z=this._curAttrData;let W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&I-O>0&&W.getWidth(this._activeBuffer.x-1)===2&&W.setCellFromCodePoint(this._activeBuffer.x-1,0,1,z.fg,z.bg,z.extended);for(let ee=O;ee<I;++ee){if(P=L[ee],Q=this._unicodeService.wcwidth(P),P<127&&N){const se=N[String.fromCharCode(P)];se&&(P=se.charCodeAt(0))}if(K&&this._onA11yChar.fire((0,a.stringFromCodePoint)(P)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),Q||!this._activeBuffer.x){if(this._activeBuffer.x+Q-1>=V){if(re){for(;this._activeBuffer.x<V;)W.setCellFromCodePoint(this._activeBuffer.x++,0,1,z.fg,z.bg,z.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=V-1,Q===2)continue}if(j&&(W.insertCells(this._activeBuffer.x,Q,this._activeBuffer.getNullCell(z),z),W.getWidth(V-1)===2&&W.setCellFromCodePoint(V-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,z.fg,z.bg,z.extended)),W.setCellFromCodePoint(this._activeBuffer.x++,P,Q,z.fg,z.bg,z.extended),Q>0)for(;--Q;)W.setCellFromCodePoint(this._activeBuffer.x++,0,0,z.fg,z.bg,z.extended)}else W.getWidth(this._activeBuffer.x-1)?W.addCodepointToCell(this._activeBuffer.x-1,P):W.addCodepointToCell(this._activeBuffer.x-2,P)}I-O>0&&(W.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<V&&I-O>0&&W.getWidth(this._activeBuffer.x)===0&&!W.hasContent(this._activeBuffer.x)&&W.setCellFromCodePoint(this._activeBuffer.x,0,1,z.fg,z.bg,z.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,O){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,O):this._parser.registerCsiHandler(L,I=>!A(I.params[0],this._optionsService.rawOptions.windowOptions)||O(I))}registerDcsHandler(L,O){return this._parser.registerDcsHandler(L,new w.DcsHandler(O))}registerEscHandler(L,O){return this._parser.registerEscHandler(L,O)}registerOscHandler(L,O){return this._parser.registerOscHandler(L,new g.OscHandler(O))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||L===void 0?void 0:L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);O.hasWidth(this._activeBuffer.x)&&!O.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,O){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+O):(this._activeBuffer.x=L,this._activeBuffer.y=O),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,O){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+O)}cursorUp(L){const O=this._activeBuffer.y-this._activeBuffer.scrollTop;return O>=0?this._moveCursor(0,-Math.min(O,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const O=this._activeBuffer.scrollBottom-this._activeBuffer.y;return O>=0?this._moveCursor(0,Math.min(O,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const O=L.params[0];return O===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:O===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let O=L.params[0]||1;for(;O--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let O=L.params[0]||1;for(;O--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const O=L.params[0];return O===1&&(this._curAttrData.bg|=536870912),O!==2&&O!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,O,I,P=!1,Q=!1){const N=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);N.replaceCells(O,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),Q),P&&(N.isWrapped=!1)}_resetBufferLine(L,O=!1){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);I.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),O),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),I.isWrapped=!1}eraseInDisplay(L,O=!1){let I;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,O);I<this._bufferService.rows;I++)this._resetBufferLine(I,O);this._dirtyRowTracker.markDirty(I);break;case 1:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I,0,this._activeBuffer.x+1,!0,O),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(I+1).isWrapped=!1);I--;)this._resetBufferLine(I,O);this._dirtyRowTracker.markDirty(0);break;case 2:for(I=this._bufferService.rows,this._dirtyRowTracker.markDirty(I-1);I--;)this._resetBufferLine(I,O);this._dirtyRowTracker.markDirty(0);break;case 3:const P=this._activeBuffer.lines.length-this._bufferService.rows;P>0&&(this._activeBuffer.lines.trimStart(P),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-P,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-P,0),this._onScroll.fire(0))}return!0}eraseInLine(L,O=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,O);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,O);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,O)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let O=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Q=this._bufferService.rows-1+this._activeBuffer.ybase-P+1;for(;O--;)this._activeBuffer.lines.splice(Q-1,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let O=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=this._activeBuffer.ybase+this._activeBuffer.y;let P;for(P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-P;O--;)this._activeBuffer.lines.splice(I,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let O=L.params[0]||1;for(;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let O=L.params[0]||1;for(;O--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(t.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=L.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);P.deleteCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=L.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);P.insertCells(0,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=L.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);P.insertCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=L.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);P.deleteCells(this._activeBuffer.x,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return O&&(O.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){if(!this._parser.precedingCodepoint)return!0;const O=L.params[0]||1,I=new Uint32Array(O);for(let P=0;P<O;++P)I[P]=this._parser.precedingCodepoint;return this.print(I,0,I.length),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let O=0;O<L.length;O++)switch(L.params[O]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let O=0;O<L.length;O++)switch(L.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,u.DEFAULT_CHARSET),this._charsetService.setgCharset(1,u.DEFAULT_CHARSET),this._charsetService.setgCharset(2,u.DEFAULT_CHARSET),this._charsetService.setgCharset(3,u.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let O=0;O<L.length;O++)switch(L.params[O]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let O=0;O<L.length;O++)switch(L.params[O]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[O]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,O){const I=this._coreService.decPrivateModes,{activeProtocol:P,activeEncoding:Q}=this._coreMouseService,N=this._coreService,{buffers:K,cols:V}=this._bufferService,{active:re,alt:j}=K,z=this._optionsService.rawOptions,W=ce=>ce?1:2,ee=L.params[0];return se=ee,Se=O?ee===2?3:ee===4?W(N.modes.insertMode):ee===12?4:ee===20?W(z.convertEol):0:ee===1?W(I.applicationCursorKeys):ee===3?z.windowOptions.setWinLines?V===80?2:V===132?1:0:0:ee===6?W(I.origin):ee===7?W(I.wraparound):ee===8?3:ee===9?W(P==="X10"):ee===12?W(z.cursorBlink):ee===25?W(!N.isCursorHidden):ee===45?W(I.reverseWraparound):ee===66?W(I.applicationKeypad):ee===1e3?W(P==="VT200"):ee===1002?W(P==="DRAG"):ee===1003?W(P==="ANY"):ee===1004?W(I.sendFocus):ee===1005?4:ee===1006?W(Q==="SGR"):ee===1015?4:ee===1016?W(Q==="SGR_PIXELS"):ee===1048?1:ee===47||ee===1047||ee===1049?W(re===j):ee===2004?W(I.bracketedPasteMode):0,N.triggerDataEvent(`${d.C0.ESC}[${O?"":"?"}${se};${Se}$y`),!0;var se,Se}_updateAttrColor(L,O,I,P,Q){return O===2?(L|=50331648,L&=-16777216,L|=n.AttributeData.fromColorRGB([I,P,Q])):O===5&&(L&=-50331904,L|=33554432|255&I),L}_extractColor(L,O,I){const P=[0,0,-1,0,0,0];let Q=0,N=0;do{if(P[N+Q]=L.params[O+N],L.hasSubParams(O+N)){const K=L.getSubParams(O+N);let V=0;do P[1]===5&&(Q=1),P[N+V+1+Q]=K[V];while(++V<K.length&&V+N+1+Q<P.length);break}if(P[1]===5&&N+Q>=2||P[1]===2&&N+Q>=5)break;P[1]&&(Q=1)}while(++N+O<L.length&&N+Q<P.length);for(let K=2;K<P.length;++K)P[K]===-1&&(P[K]=0);switch(P[0]){case 38:I.fg=this._updateAttrColor(I.fg,P[1],P[3],P[4],P[5]);break;case 48:I.bg=this._updateAttrColor(I.bg,P[1],P[3],P[4],P[5]);break;case 58:I.extended=I.extended.clone(),I.extended.underlineColor=this._updateAttrColor(I.extended.underlineColor,P[1],P[3],P[4],P[5])}return N}_processUnderline(L,O){O.extended=O.extended.clone(),(!~L||L>5)&&(L=1),O.extended.underlineStyle=L,O.fg|=268435456,L===0&&(O.fg&=-268435457),O.updateExtended()}_processSGR0(L){L.fg=t.DEFAULT_ATTR_DATA.fg,L.bg=t.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const O=L.length;let I;const P=this._curAttrData;for(let Q=0;Q<O;Q++)I=L.params[Q],I>=30&&I<=37?(P.fg&=-50331904,P.fg|=16777216|I-30):I>=40&&I<=47?(P.bg&=-50331904,P.bg|=16777216|I-40):I>=90&&I<=97?(P.fg&=-50331904,P.fg|=16777224|I-90):I>=100&&I<=107?(P.bg&=-50331904,P.bg|=16777224|I-100):I===0?this._processSGR0(P):I===1?P.fg|=134217728:I===3?P.bg|=67108864:I===4?(P.fg|=268435456,this._processUnderline(L.hasSubParams(Q)?L.getSubParams(Q)[0]:1,P)):I===5?P.fg|=536870912:I===7?P.fg|=67108864:I===8?P.fg|=1073741824:I===9?P.fg|=2147483648:I===2?P.bg|=134217728:I===21?this._processUnderline(2,P):I===22?(P.fg&=-134217729,P.bg&=-134217729):I===23?P.bg&=-67108865:I===24?(P.fg&=-268435457,this._processUnderline(0,P)):I===25?P.fg&=-536870913:I===27?P.fg&=-67108865:I===28?P.fg&=-1073741825:I===29?P.fg&=2147483647:I===39?(P.fg&=-67108864,P.fg|=16777215&t.DEFAULT_ATTR_DATA.fg):I===49?(P.bg&=-67108864,P.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):I===38||I===48||I===58?Q+=this._extractColor(L,Q,P):I===59?(P.extended=P.extended.clone(),P.extended.underlineColor=-1,P.updateExtended()):I===100?(P.fg&=-67108864,P.fg|=16777215&t.DEFAULT_ATTR_DATA.fg,P.bg&=-67108864,P.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",I);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const O=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${O};${I}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const O=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${O};${I}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const O=L.params[0]||1;switch(O){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const I=O%2==1;return this._optionsService.options.cursorBlink=I,!0}setScrollRegion(L){const O=L.params[0]||1;let I;return(L.length<2||(I=L.params[1])>this._bufferService.rows||I===0)&&(I=this._bufferService.rows),I>O&&(this._activeBuffer.scrollTop=O-1,this._activeBuffer.scrollBottom=I-1,this._setCursor(0,0)),!0}windowOptions(L){if(!A(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const O=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:O!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:O!==0&&O!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),O!==0&&O!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:O!==0&&O!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),O!==0&&O!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const O=[],I=L.split(";");for(;I.length>1;){const P=I.shift(),Q=I.shift();if(/^\d+$/.exec(P)){const N=parseInt(P);if(0<=N&&N<256)if(Q==="?")O.push({type:0,index:N});else{const K=(0,p.parseColor)(Q);K&&O.push({type:1,index:N,color:K})}}}return O.length&&this._onColor.fire(O),!0}setHyperlink(L){const O=L.split(";");return!(O.length<2)&&(O[1]?this._createHyperlink(O[0],O[1]):!O[0]&&this._finishHyperlink())}_createHyperlink(L,O){this._getCurrentLinkId()&&this._finishHyperlink();const I=L.split(":");let P;const Q=I.findIndex(N=>N.startsWith("id="));return Q!==-1&&(P=I[Q].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:P,uri:O}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,O){const I=L.split(";");for(let P=0;P<I.length&&!(O>=this._specialColors.length);++P,++O)if(I[P]==="?")this._onColor.fire([{type:0,index:this._specialColors[O]}]);else{const Q=(0,p.parseColor)(I[P]);Q&&this._onColor.fire([{type:1,index:this._specialColors[O],color:Q}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const O=[],I=L.split(";");for(let P=0;P<I.length;++P)if(/^\d+$/.exec(I[P])){const Q=parseInt(I[P]);0<=Q&&Q<256&&O.push({type:2,index:Q})}return O.length&&this._onColor.fire(O),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,u.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(S[L[0]],u.CHARSETS[L[1]]||u.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new r.CellData;L.content=4194304|"E".charCodeAt(0),L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let O=0;O<this._bufferService.rows;++O){const I=this._activeBuffer.ybase+this._activeBuffer.y+O,P=this._activeBuffer.lines.get(I);P&&(P.fill(L),P.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,O){const I=this._bufferService.buffer,P=this._optionsService.rawOptions;return(Q=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${Q}${d.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${I.scrollTop+1};${I.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[P.cursorStyle]-(P.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,O){this._dirtyRowTracker.markRangeDirty(L,O)}}c.InputHandler=U;let D=class{constructor(H){this._bufferService=H,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(H){H<this.start?this.start=H:H>this.end&&(this.end=H)}markRangeDirty(H,L){H>L&&(B=H,H=L,L=B),H<this.start&&(this.start=H),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};D=v([f(0,_.IBufferService)],D)},844:(q,c)=>{function y(v){for(const f of v)f.dispose();v.length=0}Object.defineProperty(c,"__esModule",{value:!0}),c.getDisposeArrayDisposable=c.disposeArray=c.toDisposable=c.Disposable=void 0,c.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const v of this._disposables)v.dispose();this._disposables.length=0}register(v){return this._disposables.push(v),v}unregister(v){const f=this._disposables.indexOf(v);f!==-1&&this._disposables.splice(f,1)}},c.toDisposable=function(v){return{dispose:v}},c.disposeArray=y,c.getDisposeArrayDisposable=function(v){return{dispose:()=>y(v)}}},1505:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.FourKeyMap=c.TwoKeyMap=void 0;class y{constructor(){this._data={}}set(f,d,u){this._data[f]||(this._data[f]={}),this._data[f][d]=u}get(f,d){return this._data[f]?this._data[f][d]:void 0}clear(){this._data={}}}c.TwoKeyMap=y,c.FourKeyMap=class{constructor(){this._data=new y}set(v,f,d,u,C){this._data.get(v,f)||this._data.set(v,f,new y),this._data.get(v,f).set(d,u,C)}get(v,f,d,u){var C;return(C=this._data.get(v,f))===null||C===void 0?void 0:C.get(d,u)}clear(){this._data.clear()}}},6114:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.isChromeOS=c.isLinux=c.isWindows=c.isIphone=c.isIpad=c.isMac=c.getSafariVersion=c.isSafari=c.isLegacyEdge=c.isFirefox=c.isNode=void 0,c.isNode=typeof navigator>"u";const y=c.isNode?"node":navigator.userAgent,v=c.isNode?"node":navigator.platform;c.isFirefox=y.includes("Firefox"),c.isLegacyEdge=y.includes("Edge"),c.isSafari=/^((?!chrome|android).)*safari/i.test(y),c.getSafariVersion=function(){if(!c.isSafari)return 0;const f=y.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},c.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(v),c.isIpad=v==="iPad",c.isIphone=v==="iPhone",c.isWindows=["Windows","Win16","Win32","WinCE"].includes(v),c.isLinux=v.indexOf("Linux")>=0,c.isChromeOS=/\bCrOS\b/.test(y)},6106:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SortedList=void 0;let y=0;c.SortedList=class{constructor(v){this._getKey=v,this._array=[]}clear(){this._array.length=0}insert(v){this._array.length!==0?(y=this._search(this._getKey(v),0,this._array.length-1),this._array.splice(y,0,v)):this._array.push(v)}delete(v){if(this._array.length===0)return!1;const f=this._getKey(v);if(f===void 0||(y=this._search(f,0,this._array.length-1),y===-1)||this._getKey(this._array[y])!==f)return!1;do if(this._array[y]===v)return this._array.splice(y,1),!0;while(++y<this._array.length&&this._getKey(this._array[y])===f);return!1}*getKeyIterator(v){if(this._array.length!==0&&(y=this._search(v,0,this._array.length-1),!(y<0||y>=this._array.length)&&this._getKey(this._array[y])===v))do yield this._array[y];while(++y<this._array.length&&this._getKey(this._array[y])===v)}forEachByKey(v,f){if(this._array.length!==0&&(y=this._search(v,0,this._array.length-1),!(y<0||y>=this._array.length)&&this._getKey(this._array[y])===v))do f(this._array[y]);while(++y<this._array.length&&this._getKey(this._array[y])===v)}values(){return this._array.values()}_search(v,f,d){if(d<f)return f;let u=Math.floor((f+d)/2);const C=this._getKey(this._array[u]);if(C>v)return this._search(v,f,u-1);if(C<v)return this._search(v,u+1,d);for(;u>0&&this._getKey(this._array[u-1])===v;)u--;return u}}},7226:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DebouncedIdleTask=c.IdleTaskQueue=c.PriorityTaskQueue=void 0;const v=y(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let m=0,a=0,t=C.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(m=Date.now(),this._tasks[this._i]()||this._i++,m=Math.max(1,Date.now()-m),a=Math.max(m,a),h=C.timeRemaining(),1.5*a>h)return t-m<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(t-m))}ms`),void this._start();t=h}this.clear()}}class d extends f{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const m=Date.now()+C;return{timeRemaining:()=>Math.max(0,m-Date.now())}}}c.PriorityTaskQueue=d,c.IdleTaskQueue=!v.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(u){return requestIdleCallback(u)}_cancelCallback(u){cancelIdleCallback(u)}}:d,c.DebouncedIdleTask=class{constructor(){this._queue=new c.IdleTaskQueue}set(u){this._queue.clear(),this._queue.enqueue(u)}flush(){this._queue.flush()}}},9282:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.updateWindowsModeWrappedState=void 0;const v=y(643);c.updateWindowsModeWrappedState=function(f){const d=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),u=d==null?void 0:d.get(f.cols-1),C=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);C&&u&&(C.isWrapped=u[v.CHAR_DATA_CODE_INDEX]!==v.NULL_CELL_CODE&&u[v.CHAR_DATA_CODE_INDEX]!==v.WHITESPACE_CELL_CODE)}},3734:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ExtendedAttrs=c.AttributeData=void 0;class y{constructor(){this.fg=0,this.bg=0,this.extended=new v}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new y;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}c.AttributeData=y;class v{constructor(d=0,u=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=u}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}clone(){return new v(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}c.ExtendedAttrs=v},9092:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferStringIterator=c.Buffer=c.MAX_BUFFER_SIZE=void 0;const v=y(6349),f=y(8437),d=y(511),u=y(643),C=y(4634),m=y(4863),a=y(7116),t=y(3734),h=y(7226);c.MAX_BUFFER_SIZE=4294967295,c.Buffer=class{constructor(r,n,_){this._hasScrollback=r,this._optionsService=n,this._bufferService=_,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=f.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=d.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),this._whitespaceCell=d.CellData.fromCharData([0,u.WHITESPACE_CELL_CHAR,u.WHITESPACE_CELL_WIDTH,u.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new h.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new v.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(r){return r?(this._nullCell.fg=r.fg,this._nullCell.bg=r.bg,this._nullCell.extended=r.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new t.ExtendedAttrs),this._nullCell}getWhitespaceCell(r){return r?(this._whitespaceCell.fg=r.fg,this._whitespaceCell.bg=r.bg,this._whitespaceCell.extended=r.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new t.ExtendedAttrs),this._whitespaceCell}getBlankLine(r,n){return new f.BufferLine(this._bufferService.cols,this.getNullCell(r),n)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const r=this.ybase+this.y-this.ydisp;return r>=0&&r<this._rows}_getCorrectBufferLength(r){if(!this._hasScrollback)return r;const n=r+this._optionsService.rawOptions.scrollback;return n>c.MAX_BUFFER_SIZE?c.MAX_BUFFER_SIZE:n}fillViewportRows(r){if(this.lines.length===0){r===void 0&&(r=f.DEFAULT_ATTR_DATA);let n=this._rows;for(;n--;)this.lines.push(this.getBlankLine(r))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new v.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(r,n){const _=this.getNullCell(f.DEFAULT_ATTR_DATA);let g=0;const w=this._getCorrectBufferLength(n);if(w>this.lines.maxLength&&(this.lines.maxLength=w),this.lines.length>0){if(this._cols<r)for(let S=0;S<this.lines.length;S++)g+=+this.lines.get(S).resize(r,_);let p=0;if(this._rows<n)for(let S=this._rows;S<n;S++)this.lines.length<n+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new f.BufferLine(r,_)):this.ybase>0&&this.lines.length<=this.ybase+this.y+p+1?(this.ybase--,p++,this.ydisp>0&&this.ydisp--):this.lines.push(new f.BufferLine(r,_)));else for(let S=this._rows;S>n;S--)this.lines.length>n+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(w<this.lines.maxLength){const S=this.lines.length-w;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=w}this.x=Math.min(this.x,r-1),this.y=Math.min(this.y,n-1),p&&(this.y+=p),this.savedX=Math.min(this.savedX,r-1),this.scrollTop=0}if(this.scrollBottom=n-1,this._isReflowEnabled&&(this._reflow(r,n),this._cols>r))for(let p=0;p<this.lines.length;p++)g+=+this.lines.get(p).resize(r,_);this._cols=r,this._rows=n,this._memoryCleanupQueue.clear(),g>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let r=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,r=!1);let n=0;for(;this._memoryCleanupPosition<this.lines.length;)if(n+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),n>100)return!0;return r}get _isReflowEnabled(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(r,n){this._cols!==r&&(r>this._cols?this._reflowLarger(r,n):this._reflowSmaller(r,n))}_reflowLarger(r,n){const _=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,r,this.ybase+this.y,this.getNullCell(f.DEFAULT_ATTR_DATA));if(_.length>0){const g=(0,C.reflowLargerCreateNewLayout)(this.lines,_);(0,C.reflowLargerApplyNewLayout)(this.lines,g.layout),this._reflowLargerAdjustViewport(r,n,g.countRemoved)}}_reflowLargerAdjustViewport(r,n,_){const g=this.getNullCell(f.DEFAULT_ATTR_DATA);let w=_;for(;w-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<n&&this.lines.push(new f.BufferLine(r,g))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-_,0)}_reflowSmaller(r,n){const _=this.getNullCell(f.DEFAULT_ATTR_DATA),g=[];let w=0;for(let p=this.lines.length-1;p>=0;p--){let S=this.lines.get(p);if(!S||!S.isWrapped&&S.getTrimmedLength()<=r)continue;const x=[S];for(;S.isWrapped&&p>0;)S=this.lines.get(--p),x.unshift(S);const A=this.ybase+this.y;if(A>=p&&A<p+x.length)continue;const T=x[x.length-1].getTrimmedLength(),B=(0,C.reflowSmallerGetNewLineLengths)(x,this._cols,r),U=B.length-x.length;let D;D=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+U):Math.max(0,this.lines.length-this.lines.maxLength+U);const H=[];for(let N=0;N<U;N++){const K=this.getBlankLine(f.DEFAULT_ATTR_DATA,!0);H.push(K)}H.length>0&&(g.push({start:p+x.length+w,newLines:H}),w+=H.length),x.push(...H);let L=B.length-1,O=B[L];O===0&&(L--,O=B[L]);let I=x.length-U-1,P=T;for(;I>=0;){const N=Math.min(P,O);if(x[L]===void 0)break;if(x[L].copyCellsFrom(x[I],P-N,O-N,N,!0),O-=N,O===0&&(L--,O=B[L]),P-=N,P===0){I--;const K=Math.max(I,0);P=(0,C.getWrappedLineTrimmedLength)(x,K,this._cols)}}for(let N=0;N<x.length;N++)B[N]<r&&x[N].setCell(B[N],_);let Q=U-D;for(;Q-- >0;)this.ybase===0?this.y<n-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+w)-n&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+U,this.ybase+n-1)}if(g.length>0){const p=[],S=[];for(let L=0;L<this.lines.length;L++)S.push(this.lines.get(L));const x=this.lines.length;let A=x-1,T=0,B=g[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+w);let U=0;for(let L=Math.min(this.lines.maxLength-1,x+w-1);L>=0;L--)if(B&&B.start>A+U){for(let O=B.newLines.length-1;O>=0;O--)this.lines.set(L--,B.newLines[O]);L++,p.push({index:A+1,amount:B.newLines.length}),U+=B.newLines.length,B=g[++T]}else this.lines.set(L,S[A--]);let D=0;for(let L=p.length-1;L>=0;L--)p[L].index+=D,this.lines.onInsertEmitter.fire(p[L]),D+=p[L].amount;const H=Math.max(0,x+w-this.lines.maxLength);H>0&&this.lines.onTrimEmitter.fire(H)}}stringIndexToBufferIndex(r,n,_=!1){for(;n;){const g=this.lines.get(r);if(!g)return[-1,-1];const w=_?g.getTrimmedLength():g.length;for(let p=0;p<w;++p)if(g.get(p)[u.CHAR_DATA_WIDTH_INDEX]&&(n-=g.get(p)[u.CHAR_DATA_CHAR_INDEX].length||1),n<0)return[r,p];r++}return[r,0]}translateBufferLineToString(r,n,_=0,g){const w=this.lines.get(r);return w?w.translateToString(n,_,g):""}getWrappedRangeForLine(r){let n=r,_=r;for(;n>0&&this.lines.get(n).isWrapped;)n--;for(;_+1<this.lines.length&&this.lines.get(_+1).isWrapped;)_++;return{first:n,last:_}}setupTabStops(r){for(r!=null?this.tabs[r]||(r=this.prevStop(r)):(this.tabs={},r=0);r<this._cols;r+=this._optionsService.rawOptions.tabStopWidth)this.tabs[r]=!0}prevStop(r){for(r==null&&(r=this.x);!this.tabs[--r]&&r>0;);return r>=this._cols?this._cols-1:r<0?0:r}nextStop(r){for(r==null&&(r=this.x);!this.tabs[++r]&&r<this._cols;);return r>=this._cols?this._cols-1:r<0?0:r}clearMarkers(r){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].line===r&&(this.markers[n].dispose(),this.markers.splice(n--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let r=0;r<this.markers.length;r++)this.markers[r].dispose(),this.markers.splice(r--,1);this._isClearing=!1}addMarker(r){const n=new m.Marker(r);return this.markers.push(n),n.register(this.lines.onTrim(_=>{n.line-=_,n.line<0&&n.dispose()})),n.register(this.lines.onInsert(_=>{n.line>=_.index&&(n.line+=_.amount)})),n.register(this.lines.onDelete(_=>{n.line>=_.index&&n.line<_.index+_.amount&&n.dispose(),n.line>_.index&&(n.line-=_.amount)})),n.register(n.onDispose(()=>this._removeMarker(n))),n}_removeMarker(r){this._isClearing||this.markers.splice(this.markers.indexOf(r),1)}iterator(r,n,_,g,w){return new o(this,r,n,_,g,w)}};class o{constructor(n,_,g=0,w=n.lines.length,p=0,S=0){this._buffer=n,this._trimRight=_,this._startIndex=g,this._endIndex=w,this._startOverscan=p,this._endOverscan=S,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}hasNext(){return this._current<this._endIndex}next(){const n=this._buffer.getWrappedRangeForLine(this._current);n.first<this._startIndex-this._startOverscan&&(n.first=this._startIndex-this._startOverscan),n.last>this._endIndex+this._endOverscan&&(n.last=this._endIndex+this._endOverscan),n.first=Math.max(n.first,0),n.last=Math.min(n.last,this._buffer.lines.length);let _="";for(let g=n.first;g<=n.last;++g)_+=this._buffer.translateBufferLineToString(g,this._trimRight);return this._current=n.last+1,{range:n,content:_}}}c.BufferStringIterator=o},8437:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferLine=c.DEFAULT_ATTR_DATA=void 0;const v=y(482),f=y(643),d=y(511),u=y(3734);c.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let C=0;class m{constructor(t,h,o=!1){this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*t);const r=h||d.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let n=0;n<t;++n)this.setCell(n,r);this.length=t}get(t){const h=this._data[3*t+0],o=2097151&h;return[this._data[3*t+1],2097152&h?this._combined[t]:o?(0,v.stringFromCodePoint)(o):"",h>>22,2097152&h?this._combined[t].charCodeAt(this._combined[t].length-1):o]}set(t,h){this._data[3*t+1]=h[f.CHAR_DATA_ATTR_INDEX],h[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[t]=h[1],this._data[3*t+0]=2097152|t|h[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t+0]=h[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(t){return this._data[3*t+0]>>22}hasWidth(t){return 12582912&this._data[3*t+0]}getFg(t){return this._data[3*t+1]}getBg(t){return this._data[3*t+2]}hasContent(t){return 4194303&this._data[3*t+0]}getCodePoint(t){const h=this._data[3*t+0];return 2097152&h?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&h}isCombined(t){return 2097152&this._data[3*t+0]}getString(t){const h=this._data[3*t+0];return 2097152&h?this._combined[t]:2097151&h?(0,v.stringFromCodePoint)(2097151&h):""}isProtected(t){return 536870912&this._data[3*t+2]}loadCell(t,h){return C=3*t,h.content=this._data[C+0],h.fg=this._data[C+1],h.bg=this._data[C+2],2097152&h.content&&(h.combinedData=this._combined[t]),268435456&h.bg&&(h.extended=this._extendedAttrs[t]),h}setCell(t,h){2097152&h.content&&(this._combined[t]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[t]=h.extended),this._data[3*t+0]=h.content,this._data[3*t+1]=h.fg,this._data[3*t+2]=h.bg}setCellFromCodePoint(t,h,o,r,n,_){268435456&n&&(this._extendedAttrs[t]=_),this._data[3*t+0]=h|o<<22,this._data[3*t+1]=r,this._data[3*t+2]=n}addCodepointToCell(t,h){let o=this._data[3*t+0];2097152&o?this._combined[t]+=(0,v.stringFromCodePoint)(h):(2097151&o?(this._combined[t]=(0,v.stringFromCodePoint)(2097151&o)+(0,v.stringFromCodePoint)(h),o&=-2097152,o|=2097152):o=h|4194304,this._data[3*t+0]=o)}insertCells(t,h,o,r){if((t%=this.length)&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new u.ExtendedAttrs),h<this.length-t){const n=new d.CellData;for(let _=this.length-t-h-1;_>=0;--_)this.setCell(t+h+_,this.loadCell(t+_,n));for(let _=0;_<h;++_)this.setCell(t+_,o)}else for(let n=t;n<this.length;++n)this.setCell(n,o);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new u.ExtendedAttrs)}deleteCells(t,h,o,r){if(t%=this.length,h<this.length-t){const n=new d.CellData;for(let _=0;_<this.length-t-h;++_)this.setCell(t+_,this.loadCell(t+h+_,n));for(let _=this.length-h;_<this.length;++_)this.setCell(_,o)}else for(let n=t;n<this.length;++n)this.setCell(n,o);t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new u.ExtendedAttrs),this.getWidth(t)!==0||this.hasContent(t)||this.setCellFromCodePoint(t,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new u.ExtendedAttrs)}replaceCells(t,h,o,r,n=!1){if(n)for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodePoint(t-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new u.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodePoint(h,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new u.ExtendedAttrs);t<h&&t<this.length;)this.isProtected(t)||this.setCell(t,o),t++;else for(t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new u.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new u.ExtendedAttrs);t<h&&t<this.length;)this.setCell(t++,o)}resize(t,h){if(t===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const o=3*t;if(t>this.length){if(this._data.buffer.byteLength>=4*o)this._data=new Uint32Array(this._data.buffer,0,o);else{const r=new Uint32Array(o);r.set(this._data),this._data=r}for(let r=this.length;r<t;++r)this.setCell(r,h)}else{this._data=this._data.subarray(0,o);const r=Object.keys(this._combined);for(let _=0;_<r.length;_++){const g=parseInt(r[_],10);g>=t&&delete this._combined[g]}const n=Object.keys(this._extendedAttrs);for(let _=0;_<n.length;_++){const g=parseInt(n[_],10);g>=t&&delete this._extendedAttrs[g]}}return this.length=t,4*o*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,h=!1){if(h)for(let o=0;o<this.length;++o)this.isProtected(o)||this.setCell(o,t);else{this._combined={},this._extendedAttrs={};for(let o=0;o<this.length;++o)this.setCell(o,t)}}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(const h in t._combined)this._combined[h]=t._combined[h];this._extendedAttrs={};for(const h in t._extendedAttrs)this._extendedAttrs[h]=t._extendedAttrs[h];this.isWrapped=t.isWrapped}clone(){const t=new m(0);t._data=new Uint32Array(this._data),t.length=this.length;for(const h in this._combined)t._combined[h]=this._combined[h];for(const h in this._extendedAttrs)t._extendedAttrs[h]=this._extendedAttrs[h];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0])return t+(this._data[3*t+0]>>22);return 0}copyCellsFrom(t,h,o,r,n){const _=t._data;if(n)for(let w=r-1;w>=0;w--){for(let p=0;p<3;p++)this._data[3*(o+w)+p]=_[3*(h+w)+p];268435456&_[3*(h+w)+2]&&(this._extendedAttrs[o+w]=t._extendedAttrs[h+w])}else for(let w=0;w<r;w++){for(let p=0;p<3;p++)this._data[3*(o+w)+p]=_[3*(h+w)+p];268435456&_[3*(h+w)+2]&&(this._extendedAttrs[o+w]=t._extendedAttrs[h+w])}const g=Object.keys(t._combined);for(let w=0;w<g.length;w++){const p=parseInt(g[w],10);p>=h&&(this._combined[p-h+o]=t._combined[p])}}translateToString(t=!1,h=0,o=this.length){t&&(o=Math.min(o,this.getTrimmedLength()));let r="";for(;h<o;){const n=this._data[3*h+0],_=2097151&n;r+=2097152&n?this._combined[h]:_?(0,v.stringFromCodePoint)(_):f.WHITESPACE_CELL_CHAR,h+=n>>22||1}return r}}c.BufferLine=m},4841:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.getRangeLength=void 0,c.getRangeLength=function(y,v){if(y.start.y>y.end.y)throw new Error(`Buffer range end (${y.end.x}, ${y.end.y}) cannot be before start (${y.start.x}, ${y.start.y})`);return v*(y.end.y-y.start.y)+(y.end.x-y.start.x+1)}},4634:(q,c)=>{function y(v,f,d){if(f===v.length-1)return v[f].getTrimmedLength();const u=!v[f].hasContent(d-1)&&v[f].getWidth(d-1)===1,C=v[f+1].getWidth(0)===2;return u&&C?d-1:d}Object.defineProperty(c,"__esModule",{value:!0}),c.getWrappedLineTrimmedLength=c.reflowSmallerGetNewLineLengths=c.reflowLargerApplyNewLayout=c.reflowLargerCreateNewLayout=c.reflowLargerGetLinesToRemove=void 0,c.reflowLargerGetLinesToRemove=function(v,f,d,u,C){const m=[];for(let a=0;a<v.length-1;a++){let t=a,h=v.get(++t);if(!h.isWrapped)continue;const o=[v.get(a)];for(;t<v.length&&h.isWrapped;)o.push(h),h=v.get(++t);if(u>=a&&u<t){a+=o.length-1;continue}let r=0,n=y(o,r,f),_=1,g=0;for(;_<o.length;){const p=y(o,_,f),S=p-g,x=d-n,A=Math.min(S,x);o[r].copyCellsFrom(o[_],g,n,A,!1),n+=A,n===d&&(r++,n=0),g+=A,g===p&&(_++,g=0),n===0&&r!==0&&o[r-1].getWidth(d-1)===2&&(o[r].copyCellsFrom(o[r-1],d-1,n++,1,!1),o[r-1].setCell(d-1,C))}o[r].replaceCells(n,d,C);let w=0;for(let p=o.length-1;p>0&&(p>r||o[p].getTrimmedLength()===0);p--)w++;w>0&&(m.push(a+o.length-w),m.push(w)),a+=o.length-1}return m},c.reflowLargerCreateNewLayout=function(v,f){const d=[];let u=0,C=f[u],m=0;for(let a=0;a<v.length;a++)if(C===a){const t=f[++u];v.onDeleteEmitter.fire({index:a-m,amount:t}),a+=t-1,m+=t,C=f[++u]}else d.push(a);return{layout:d,countRemoved:m}},c.reflowLargerApplyNewLayout=function(v,f){const d=[];for(let u=0;u<f.length;u++)d.push(v.get(f[u]));for(let u=0;u<d.length;u++)v.set(u,d[u]);v.length=f.length},c.reflowSmallerGetNewLineLengths=function(v,f,d){const u=[],C=v.map((h,o)=>y(v,o,f)).reduce((h,o)=>h+o);let m=0,a=0,t=0;for(;t<C;){if(C-t<d){u.push(C-t);break}m+=d;const h=y(v,a,f);m>h&&(m-=h,a++);const o=v[a].getWidth(m-1)===2;o&&m--;const r=o?d-1:d;u.push(r),t+=r}return u},c.getWrappedLineTrimmedLength=y},5295:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferSet=void 0;const v=y(9092),f=y(8460),d=y(844);class u extends d.Disposable{constructor(m,a){super(),this._optionsService=m,this._bufferService=a,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new v.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new v.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(m){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(m),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(m,a){this._normal.resize(m,a),this._alt.resize(m,a),this.setupTabStops(m)}setupTabStops(m){this._normal.setupTabStops(m),this._alt.setupTabStops(m)}}c.BufferSet=u},511:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CellData=void 0;const v=y(482),f=y(643),d=y(3734);class u extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(m){const a=new u;return a.setFromCharData(m),a}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,v.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(m){this.fg=m[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let a=!1;if(m[f.CHAR_DATA_CHAR_INDEX].length>2)a=!0;else if(m[f.CHAR_DATA_CHAR_INDEX].length===2){const t=m[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){const h=m[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(t-55296)+h-56320+65536|m[f.CHAR_DATA_WIDTH_INDEX]<<22:a=!0}else a=!0}else this.content=m[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|m[f.CHAR_DATA_WIDTH_INDEX]<<22;a&&(this.combinedData=m[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|m[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}c.CellData=u},643:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WHITESPACE_CELL_CODE=c.WHITESPACE_CELL_WIDTH=c.WHITESPACE_CELL_CHAR=c.NULL_CELL_CODE=c.NULL_CELL_WIDTH=c.NULL_CELL_CHAR=c.CHAR_DATA_CODE_INDEX=c.CHAR_DATA_WIDTH_INDEX=c.CHAR_DATA_CHAR_INDEX=c.CHAR_DATA_ATTR_INDEX=c.DEFAULT_EXT=c.DEFAULT_ATTR=c.DEFAULT_COLOR=void 0,c.DEFAULT_COLOR=0,c.DEFAULT_ATTR=256|c.DEFAULT_COLOR<<9,c.DEFAULT_EXT=0,c.CHAR_DATA_ATTR_INDEX=0,c.CHAR_DATA_CHAR_INDEX=1,c.CHAR_DATA_WIDTH_INDEX=2,c.CHAR_DATA_CODE_INDEX=3,c.NULL_CELL_CHAR="",c.NULL_CELL_WIDTH=1,c.NULL_CELL_CODE=0,c.WHITESPACE_CELL_CHAR=" ",c.WHITESPACE_CELL_WIDTH=1,c.WHITESPACE_CELL_CODE=32},4863:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Marker=void 0;const v=y(8460),f=y(844);class d{constructor(C){this.line=C,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(C){return this._disposables.push(C),C}}c.Marker=d,d._nextId=1},7116:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_CHARSET=c.CHARSETS=void 0,c.CHARSETS={},c.DEFAULT_CHARSET=c.CHARSETS.B,c.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},c.CHARSETS.A={"#":"\xA3"},c.CHARSETS.B=void 0,c.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},c.CHARSETS.C=c.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},c.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},c.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},c.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},c.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},c.CHARSETS.E=c.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},c.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},c.CHARSETS.H=c.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},c.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(q,c)=>{var y,v;Object.defineProperty(c,"__esModule",{value:!0}),c.C1_ESCAPED=c.C1=c.C0=void 0,function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL="\x7F"}(y=c.C0||(c.C0={})),(v=c.C1||(c.C1={})).PAD="\x80",v.HOP="\x81",v.BPH="\x82",v.NBH="\x83",v.IND="\x84",v.NEL="\x85",v.SSA="\x86",v.ESA="\x87",v.HTS="\x88",v.HTJ="\x89",v.VTS="\x8A",v.PLD="\x8B",v.PLU="\x8C",v.RI="\x8D",v.SS2="\x8E",v.SS3="\x8F",v.DCS="\x90",v.PU1="\x91",v.PU2="\x92",v.STS="\x93",v.CCH="\x94",v.MW="\x95",v.SPA="\x96",v.EPA="\x97",v.SOS="\x98",v.SGCI="\x99",v.SCI="\x9A",v.CSI="\x9B",v.ST="\x9C",v.OSC="\x9D",v.PM="\x9E",v.APC="\x9F",(c.C1_ESCAPED||(c.C1_ESCAPED={})).ST=`${y.ESC}\\`},7399:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.evaluateKeyboardEvent=void 0;const v=y(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};c.evaluateKeyboardEvent=function(d,u,C,m){const a={type:0,cancel:!1,key:void 0},t=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?a.key=u?v.C0.ESC+"OA":v.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?a.key=u?v.C0.ESC+"OD":v.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?a.key=u?v.C0.ESC+"OC":v.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(a.key=u?v.C0.ESC+"OB":v.C0.ESC+"[B");break;case 8:if(d.altKey){a.key=v.C0.ESC+v.C0.DEL;break}a.key=v.C0.DEL;break;case 9:if(d.shiftKey){a.key=v.C0.ESC+"[Z";break}a.key=v.C0.HT,a.cancel=!0;break;case 13:a.key=d.altKey?v.C0.ESC+v.C0.CR:v.C0.CR,a.cancel=!0;break;case 27:a.key=v.C0.ESC,d.altKey&&(a.key=v.C0.ESC+v.C0.ESC),a.cancel=!0;break;case 37:if(d.metaKey)break;t?(a.key=v.C0.ESC+"[1;"+(t+1)+"D",a.key===v.C0.ESC+"[1;3D"&&(a.key=v.C0.ESC+(C?"b":"[1;5D"))):a.key=u?v.C0.ESC+"OD":v.C0.ESC+"[D";break;case 39:if(d.metaKey)break;t?(a.key=v.C0.ESC+"[1;"+(t+1)+"C",a.key===v.C0.ESC+"[1;3C"&&(a.key=v.C0.ESC+(C?"f":"[1;5C"))):a.key=u?v.C0.ESC+"OC":v.C0.ESC+"[C";break;case 38:if(d.metaKey)break;t?(a.key=v.C0.ESC+"[1;"+(t+1)+"A",C||a.key!==v.C0.ESC+"[1;3A"||(a.key=v.C0.ESC+"[1;5A")):a.key=u?v.C0.ESC+"OA":v.C0.ESC+"[A";break;case 40:if(d.metaKey)break;t?(a.key=v.C0.ESC+"[1;"+(t+1)+"B",C||a.key!==v.C0.ESC+"[1;3B"||(a.key=v.C0.ESC+"[1;5B")):a.key=u?v.C0.ESC+"OB":v.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(a.key=v.C0.ESC+"[2~");break;case 46:a.key=t?v.C0.ESC+"[3;"+(t+1)+"~":v.C0.ESC+"[3~";break;case 36:a.key=t?v.C0.ESC+"[1;"+(t+1)+"H":u?v.C0.ESC+"OH":v.C0.ESC+"[H";break;case 35:a.key=t?v.C0.ESC+"[1;"+(t+1)+"F":u?v.C0.ESC+"OF":v.C0.ESC+"[F";break;case 33:d.shiftKey?a.type=2:d.ctrlKey?a.key=v.C0.ESC+"[5;"+(t+1)+"~":a.key=v.C0.ESC+"[5~";break;case 34:d.shiftKey?a.type=3:d.ctrlKey?a.key=v.C0.ESC+"[6;"+(t+1)+"~":a.key=v.C0.ESC+"[6~";break;case 112:a.key=t?v.C0.ESC+"[1;"+(t+1)+"P":v.C0.ESC+"OP";break;case 113:a.key=t?v.C0.ESC+"[1;"+(t+1)+"Q":v.C0.ESC+"OQ";break;case 114:a.key=t?v.C0.ESC+"[1;"+(t+1)+"R":v.C0.ESC+"OR";break;case 115:a.key=t?v.C0.ESC+"[1;"+(t+1)+"S":v.C0.ESC+"OS";break;case 116:a.key=t?v.C0.ESC+"[15;"+(t+1)+"~":v.C0.ESC+"[15~";break;case 117:a.key=t?v.C0.ESC+"[17;"+(t+1)+"~":v.C0.ESC+"[17~";break;case 118:a.key=t?v.C0.ESC+"[18;"+(t+1)+"~":v.C0.ESC+"[18~";break;case 119:a.key=t?v.C0.ESC+"[19;"+(t+1)+"~":v.C0.ESC+"[19~";break;case 120:a.key=t?v.C0.ESC+"[20;"+(t+1)+"~":v.C0.ESC+"[20~";break;case 121:a.key=t?v.C0.ESC+"[21;"+(t+1)+"~":v.C0.ESC+"[21~";break;case 122:a.key=t?v.C0.ESC+"[23;"+(t+1)+"~":v.C0.ESC+"[23~";break;case 123:a.key=t?v.C0.ESC+"[24;"+(t+1)+"~":v.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(C&&!m||!d.altKey||d.metaKey)!C||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?a.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(a.key=v.C0.US),d.key==="@"&&(a.key=v.C0.NUL)):d.keyCode===65&&(a.type=1);else{const h=f[d.keyCode],o=h==null?void 0:h[d.shiftKey?1:0];if(o)a.key=v.C0.ESC+o;else if(d.keyCode>=65&&d.keyCode<=90){const r=d.ctrlKey?d.keyCode-64:d.keyCode+32;let n=String.fromCharCode(r);d.shiftKey&&(n=n.toUpperCase()),a.key=v.C0.ESC+n}else if(d.keyCode===32)a.key=v.C0.ESC+(d.ctrlKey?v.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let r=d.code.slice(3,4);d.shiftKey||(r=r.toLowerCase()),a.key=v.C0.ESC+r,a.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?a.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?a.key=v.C0.NUL:d.keyCode>=51&&d.keyCode<=55?a.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?a.key=v.C0.DEL:d.keyCode===219?a.key=v.C0.ESC:d.keyCode===220?a.key=v.C0.FS:d.keyCode===221&&(a.key=v.C0.GS)}return a}},482:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Utf8ToUtf32=c.StringToUtf32=c.utf32ToString=c.stringFromCodePoint=void 0,c.stringFromCodePoint=function(y){return y>65535?(y-=65536,String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):String.fromCharCode(y)},c.utf32ToString=function(y,v=0,f=y.length){let d="";for(let u=v;u<f;++u){let C=y[u];C>65535?(C-=65536,d+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):d+=String.fromCharCode(C)}return d},c.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(y,v){const f=y.length;if(!f)return 0;let d=0,u=0;if(this._interim){const C=y.charCodeAt(u++);56320<=C&&C<=57343?v[d++]=1024*(this._interim-55296)+C-56320+65536:(v[d++]=this._interim,v[d++]=C),this._interim=0}for(let C=u;C<f;++C){const m=y.charCodeAt(C);if(55296<=m&&m<=56319){if(++C>=f)return this._interim=m,d;const a=y.charCodeAt(C);56320<=a&&a<=57343?v[d++]=1024*(m-55296)+a-56320+65536:(v[d++]=m,v[d++]=a)}else m!==65279&&(v[d++]=m)}return d}},c.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(y,v){const f=y.length;if(!f)return 0;let d,u,C,m,a=0,t=0,h=0;if(this.interim[0]){let n=!1,_=this.interim[0];_&=(224&_)==192?31:(240&_)==224?15:7;let g,w=0;for(;(g=63&this.interim[++w])&&w<4;)_<<=6,_|=g;const p=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,S=p-w;for(;h<S;){if(h>=f)return 0;if(g=y[h++],(192&g)!=128){h--,n=!0;break}this.interim[w++]=g,_<<=6,_|=63&g}n||(p===2?_<128?h--:v[a++]=_:p===3?_<2048||_>=55296&&_<=57343||_===65279||(v[a++]=_):_<65536||_>1114111||(v[a++]=_)),this.interim.fill(0)}const o=f-4;let r=h;for(;r<f;){for(;!(!(r<o)||128&(d=y[r])||128&(u=y[r+1])||128&(C=y[r+2])||128&(m=y[r+3]));)v[a++]=d,v[a++]=u,v[a++]=C,v[a++]=m,r+=4;if(d=y[r++],d<128)v[a++]=d;else if((224&d)==192){if(r>=f)return this.interim[0]=d,a;if(u=y[r++],(192&u)!=128){r--;continue}if(t=(31&d)<<6|63&u,t<128){r--;continue}v[a++]=t}else if((240&d)==224){if(r>=f)return this.interim[0]=d,a;if(u=y[r++],(192&u)!=128){r--;continue}if(r>=f)return this.interim[0]=d,this.interim[1]=u,a;if(C=y[r++],(192&C)!=128){r--;continue}if(t=(15&d)<<12|(63&u)<<6|63&C,t<2048||t>=55296&&t<=57343||t===65279)continue;v[a++]=t}else if((248&d)==240){if(r>=f)return this.interim[0]=d,a;if(u=y[r++],(192&u)!=128){r--;continue}if(r>=f)return this.interim[0]=d,this.interim[1]=u,a;if(C=y[r++],(192&C)!=128){r--;continue}if(r>=f)return this.interim[0]=d,this.interim[1]=u,this.interim[2]=C,a;if(m=y[r++],(192&m)!=128){r--;continue}if(t=(7&d)<<18|(63&u)<<12|(63&C)<<6|63&m,t<65536||t>1114111)continue;v[a++]=t}}return a}}},225:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeV6=void 0;const y=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],v=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;c.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let d=0;d<y.length;++d)f.fill(0,y[d][0],y[d][1]+1)}}wcwidth(d){return d<32?0:d<127?1:d<65536?f[d]:function(u,C){let m,a=0,t=C.length-1;if(u<C[0][0]||u>C[t][1])return!1;for(;t>=a;)if(m=a+t>>1,u>C[m][1])a=m+1;else{if(!(u<C[m][0]))return!0;t=m-1}return!1}(d,v)?0:d>=131072&&d<=196605||d>=196608&&d<=262141?2:1}}},5981:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WriteBuffer=void 0;const v=y(8460),f=y(844);class d extends f.Disposable{constructor(C){super(),this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new v.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(C,m){if(m!==void 0&&this._syncCalls>m)return void(this._syncCalls=0);if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let a;for(this._isSyncWriting=!0;a=this._writeBuffer.shift();){this._action(a);const t=this._callbacks.shift();t&&t()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(C,m){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(m),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(m)}_innerWrite(C=0,m=!0){const a=C||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const t=this._writeBuffer[this._bufferOffset],h=this._action(t,m);if(h){const r=n=>Date.now()-a>=12?setTimeout(()=>this._innerWrite(0,n)):this._innerWrite(a,n);return void h.catch(n=>(queueMicrotask(()=>{throw n}),Promise.resolve(!1))).then(r)}const o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=t.length,Date.now()-a>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}c.WriteBuffer=d},5941:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.toRgbString=c.parseColor=void 0;const y=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,v=/^[\da-f]+$/;function f(d,u){const C=d.toString(16),m=C.length<2?"0"+C:C;switch(u){case 4:return C[0];case 8:return m;case 12:return(m+m).slice(0,3);default:return m+m}}c.parseColor=function(d){if(!d)return;let u=d.toLowerCase();if(u.indexOf("rgb:")===0){u=u.slice(4);const C=y.exec(u);if(C){const m=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/m*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/m*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/m*255)]}}else if(u.indexOf("#")===0&&(u=u.slice(1),v.exec(u)&&[3,6,9,12].includes(u.length))){const C=u.length/3,m=[0,0,0];for(let a=0;a<3;++a){const t=parseInt(u.slice(C*a,C*a+C),16);m[a]=C===1?t<<4:C===2?t:C===3?t>>4:t>>8}return m}},c.toRgbString=function(d,u=16){const[C,m,a]=d;return`rgb:${f(C,u)}/${f(m,u)}/${f(a,u)}`}},5770:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PAYLOAD_LIMIT=void 0,c.PAYLOAD_LIMIT=1e7},6351:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DcsHandler=c.DcsParser=void 0;const v=y(482),f=y(8742),d=y(5770),u=[];c.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=u,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}registerHandler(m,a){this._handlers[m]===void 0&&(this._handlers[m]=[]);const t=this._handlers[m];return t.push(a),{dispose:()=>{const h=t.indexOf(a);h!==-1&&t.splice(h,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}reset(){if(this._active.length)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].unhook(!1);this._stack.paused=!1,this._active=u,this._ident=0}hook(m,a){if(this.reset(),this._ident=m,this._active=this._handlers[m]||u,this._active.length)for(let t=this._active.length-1;t>=0;t--)this._active[t].hook(a);else this._handlerFb(this._ident,"HOOK",a)}put(m,a,t){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(m,a,t);else this._handlerFb(this._ident,"PUT",(0,v.utf32ToString)(m,a,t))}unhook(m,a=!0){if(this._active.length){let t=!1,h=this._active.length-1,o=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,t=a,o=this._stack.fallThrough,this._stack.paused=!1),!o&&t===!1){for(;h>=0&&(t=this._active[h].unhook(m),t!==!0);h--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,t;h--}for(;h>=0;h--)if(t=this._active[h].unhook(!1),t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",m);this._active=u,this._ident=0}};const C=new f.Params;C.addParam(0),c.DcsHandler=class{constructor(m){this._handler=m,this._data="",this._params=C,this._hitLimit=!1}hook(m){this._params=m.length>1||m.params[0]?m.clone():C,this._data="",this._hitLimit=!1}put(m,a,t){this._hitLimit||(this._data+=(0,v.utf32ToString)(m,a,t),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(m){let a=!1;if(this._hitLimit)a=!1;else if(m&&(a=this._handler(this._data,this._params),a instanceof Promise))return a.then(t=>(this._params=C,this._data="",this._hitLimit=!1,t));return this._params=C,this._data="",this._hitLimit=!1,a}}},2015:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.EscapeSequenceParser=c.VT500_TRANSITION_TABLE=c.TransitionTable=void 0;const v=y(844),f=y(8742),d=y(6242),u=y(6351);class C{constructor(h){this.table=new Uint8Array(h)}setDefault(h,o){this.table.fill(h<<4|o)}add(h,o,r,n){this.table[o<<8|h]=r<<4|n}addMany(h,o,r,n){for(let _=0;_<h.length;_++)this.table[o<<8|h[_]]=r<<4|n}}c.TransitionTable=C;const m=160;c.VT500_TRANSITION_TABLE=function(){const t=new C(4095),h=Array.apply(null,Array(256)).map((w,p)=>p),o=(w,p)=>h.slice(w,p),r=o(32,127),n=o(0,24);n.push(25),n.push.apply(n,o(28,32));const _=o(0,14);let g;for(g in t.setDefault(1,0),t.addMany(r,0,2,0),_)t.addMany([24,26,153,154],g,3,0),t.addMany(o(128,144),g,3,0),t.addMany(o(144,152),g,3,0),t.add(156,g,0,0),t.add(27,g,11,1),t.add(157,g,4,8),t.addMany([152,158,159],g,0,7),t.add(155,g,11,3),t.add(144,g,11,9);return t.addMany(n,0,3,0),t.addMany(n,1,3,1),t.add(127,1,0,1),t.addMany(n,8,0,8),t.addMany(n,3,3,3),t.add(127,3,0,3),t.addMany(n,4,3,4),t.add(127,4,0,4),t.addMany(n,6,3,6),t.addMany(n,5,3,5),t.add(127,5,0,5),t.addMany(n,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(r,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(o(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(r,7,0,7),t.addMany(n,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(o(64,127),3,7,0),t.addMany(o(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(o(48,60),4,8,4),t.addMany(o(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(o(32,64),6,0,6),t.add(127,6,0,6),t.addMany(o(64,127),6,0,0),t.addMany(o(32,48),3,9,5),t.addMany(o(32,48),5,9,5),t.addMany(o(48,64),5,0,6),t.addMany(o(64,127),5,7,0),t.addMany(o(32,48),4,9,5),t.addMany(o(32,48),1,9,2),t.addMany(o(32,48),2,9,2),t.addMany(o(48,127),2,10,0),t.addMany(o(48,80),1,10,0),t.addMany(o(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(o(96,127),1,10,0),t.add(80,1,11,9),t.addMany(n,9,0,9),t.add(127,9,0,9),t.addMany(o(28,32),9,0,9),t.addMany(o(32,48),9,9,12),t.addMany(o(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(n,11,0,11),t.addMany(o(32,128),11,0,11),t.addMany(o(28,32),11,0,11),t.addMany(n,10,0,10),t.add(127,10,0,10),t.addMany(o(28,32),10,0,10),t.addMany(o(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(o(32,48),10,9,12),t.addMany(n,12,0,12),t.add(127,12,0,12),t.addMany(o(28,32),12,0,12),t.addMany(o(32,48),12,9,12),t.addMany(o(48,64),12,0,11),t.addMany(o(64,127),12,12,13),t.addMany(o(64,127),10,12,13),t.addMany(o(64,127),9,12,13),t.addMany(n,13,13,13),t.addMany(r,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(m,0,2,0),t.add(m,8,5,8),t.add(m,6,0,6),t.add(m,11,0,11),t.add(m,13,13,13),t}();class a extends v.Disposable{constructor(h=c.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(o,r,n)=>{},this._executeHandlerFb=o=>{},this._csiHandlerFb=(o,r)=>{},this._escHandlerFb=o=>{},this._errorHandlerFb=o=>o,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,v.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new u.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(h,o=[64,126]){let r=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=h.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let _=0;_<h.intermediates.length;++_){const g=h.intermediates.charCodeAt(_);if(32>g||g>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=g}}if(h.final.length!==1)throw new Error("final must be a single byte");const n=h.final.charCodeAt(0);if(o[0]>n||n>o[1])throw new Error(`final must be in range ${o[0]} .. ${o[1]}`);return r<<=8,r|=n,r}identToString(h){const o=[];for(;h;)o.push(String.fromCharCode(255&h)),h>>=8;return o.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,o){const r=this._identifier(h,[48,126]);this._escHandlers[r]===void 0&&(this._escHandlers[r]=[]);const n=this._escHandlers[r];return n.push(o),{dispose:()=>{const _=n.indexOf(o);_!==-1&&n.splice(_,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,o){this._executeHandlers[h.charCodeAt(0)]=o}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,o){const r=this._identifier(h);this._csiHandlers[r]===void 0&&(this._csiHandlers[r]=[]);const n=this._csiHandlers[r];return n.push(o),{dispose:()=>{const _=n.indexOf(o);_!==-1&&n.splice(_,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,o){return this._dcsParser.registerHandler(this._identifier(h),o)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,o){return this._oscParser.registerHandler(h,o)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,o,r,n,_){this._parseStack.state=h,this._parseStack.handlers=o,this._parseStack.handlerPos=r,this._parseStack.transition=n,this._parseStack.chunkPos=_}parse(h,o,r){let n,_=0,g=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(r===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const p=this._parseStack.handlers;let S=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(r===!1&&S>-1){for(;S>=0&&(n=p[S](this._params),n!==!0);S--)if(n instanceof Promise)return this._parseStack.handlerPos=S,n}this._parseStack.handlers=[];break;case 4:if(r===!1&&S>-1){for(;S>=0&&(n=p[S](),n!==!0);S--)if(n instanceof Promise)return this._parseStack.handlerPos=S,n}this._parseStack.handlers=[];break;case 6:if(_=h[this._parseStack.chunkPos],n=this._dcsParser.unhook(_!==24&&_!==26,r),n)return n;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(_=h[this._parseStack.chunkPos],n=this._oscParser.end(_!==24&&_!==26,r),n)return n;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let p=w;p<o;++p){switch(_=h[p],g=this._transitions.table[this.currentState<<8|(_<160?_:m)],g>>4){case 2:for(let B=p+1;;++B){if(B>=o||(_=h[B])<32||_>126&&_<m){this._printHandler(h,p,B),p=B-1;break}if(++B>=o||(_=h[B])<32||_>126&&_<m){this._printHandler(h,p,B),p=B-1;break}if(++B>=o||(_=h[B])<32||_>126&&_<m){this._printHandler(h,p,B),p=B-1;break}if(++B>=o||(_=h[B])<32||_>126&&_<m){this._printHandler(h,p,B),p=B-1;break}}break;case 3:this._executeHandlers[_]?this._executeHandlers[_]():this._executeHandlerFb(_),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:p,code:_,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const S=this._csiHandlers[this._collect<<8|_];let x=S?S.length-1:-1;for(;x>=0&&(n=S[x](this._params),n!==!0);x--)if(n instanceof Promise)return this._preserveStack(3,S,x,g,p),n;x<0&&this._csiHandlerFb(this._collect<<8|_,this._params),this.precedingCodepoint=0;break;case 8:do switch(_){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(_-48)}while(++p<o&&(_=h[p])>47&&_<60);p--;break;case 9:this._collect<<=8,this._collect|=_;break;case 10:const A=this._escHandlers[this._collect<<8|_];let T=A?A.length-1:-1;for(;T>=0&&(n=A[T](),n!==!0);T--)if(n instanceof Promise)return this._preserveStack(4,A,T,g,p),n;T<0&&this._escHandlerFb(this._collect<<8|_),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|_,this._params);break;case 13:for(let B=p+1;;++B)if(B>=o||(_=h[B])===24||_===26||_===27||_>127&&_<m){this._dcsParser.put(h,p,B),p=B-1;break}break;case 14:if(n=this._dcsParser.unhook(_!==24&&_!==26),n)return this._preserveStack(6,[],0,g,p),n;_===27&&(g|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let B=p+1;;B++)if(B>=o||(_=h[B])<32||_>127&&_<m){this._oscParser.put(h,p,B),p=B-1;break}break;case 6:if(n=this._oscParser.end(_!==24&&_!==26),n)return this._preserveStack(5,[],0,g,p),n;_===27&&(g|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&g}}}c.EscapeSequenceParser=a},6242:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.OscHandler=c.OscParser=void 0;const v=y(5770),f=y(482),d=[];c.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(u,C){this._handlers[u]===void 0&&(this._handlers[u]=[]);const m=this._handlers[u];return m.push(C),{dispose:()=>{const a=m.indexOf(C);a!==-1&&m.splice(a,1)}}}clearHandler(u){this._handlers[u]&&delete this._handlers[u]}setHandlerFallback(u){this._handlerFb=u}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].start();else this._handlerFb(this._id,"START")}_put(u,C,m){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(u,C,m);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(u,C,m))}start(){this.reset(),this._state=1}put(u,C,m){if(this._state!==3){if(this._state===1)for(;C<m;){const a=u[C++];if(a===59){this._state=2,this._start();break}if(a<48||57<a)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+a-48}this._state===2&&m-C>0&&this._put(u,C,m)}}end(u,C=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let m=!1,a=this._active.length-1,t=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,m=C,t=this._stack.fallThrough,this._stack.paused=!1),!t&&m===!1){for(;a>=0&&(m=this._active[a].end(u),m!==!0);a--)if(m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,m;a--}for(;a>=0;a--)if(m=this._active[a].end(!1),m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,m}else this._handlerFb(this._id,"END",u);this._active=d,this._id=-1,this._state=0}}},c.OscHandler=class{constructor(u){this._handler=u,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(u,C,m){this._hitLimit||(this._data+=(0,f.utf32ToString)(u,C,m),this._data.length>v.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(u){let C=!1;if(this._hitLimit)C=!1;else if(u&&(C=this._handler(this._data),C instanceof Promise))return C.then(m=>(this._data="",this._hitLimit=!1,m));return this._data="",this._hitLimit=!1,C}}},8742:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Params=void 0;const y=2147483647;class v{constructor(d=32,u=32){if(this.maxLength=d,this.maxSubParamsLength=u,u>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(u),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(d){const u=new v;if(!d.length)return u;for(let C=Array.isArray(d[0])?1:0;C<d.length;++C){const m=d[C];if(Array.isArray(m))for(let a=0;a<m.length;++a)u.addSubParam(m[a]);else u.addParam(m)}return u}clone(){const d=new v(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let u=0;u<this.length;++u){d.push(this.params[u]);const C=this._subParamsIdx[u]>>8,m=255&this._subParamsIdx[u];m-C>0&&d.push(Array.prototype.slice.call(this._subParams,C,m))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>y?y:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>y?y:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const u=this._subParamsIdx[d]>>8,C=255&this._subParamsIdx[d];return C-u>0?this._subParams.subarray(u,C):null}getSubParamsAll(){const d={};for(let u=0;u<this.length;++u){const C=this._subParamsIdx[u]>>8,m=255&this._subParamsIdx[u];m-C>0&&(d[u]=this._subParams.slice(C,m))}return d}addDigit(d){let u;if(this._rejectDigits||!(u=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const C=this._digitIsSub?this._subParams:this.params,m=C[u-1];C[u-1]=~m?Math.min(10*m+d,y):d}}c.Params=v},5741:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.AddonManager=void 0,c.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let y=this._addons.length-1;y>=0;y--)this._addons[y].instance.dispose()}loadAddon(y,v){const f={instance:v,dispose:v.dispose,isDisposed:!1};this._addons.push(f),v.dispose=()=>this._wrappedAddonDispose(f),v.activate(y)}_wrappedAddonDispose(y){if(y.isDisposed)return;let v=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===y){v=f;break}if(v===-1)throw new Error("Could not dispose an addon that has not been loaded");y.isDisposed=!0,y.dispose.apply(y.instance),this._addons.splice(v,1)}}},8771:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferApiView=void 0;const v=y(3785),f=y(511);c.BufferApiView=class{constructor(d,u){this._buffer=d,this.type=u}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const u=this._buffer.lines.get(d);if(u)return new v.BufferLineApiView(u)}getNullCell(){return new f.CellData}}},3785:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferLineApiView=void 0;const v=y(511);c.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,d){if(!(f<0||f>=this._line.length))return d?(this._line.loadCell(f,d),d):this._line.loadCell(f,new v.CellData)}translateToString(f,d,u){return this._line.translateToString(f,d,u)}}},8285:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BufferNamespaceApi=void 0;const v=y(8771),f=y(8460);c.BufferNamespaceApi=class{constructor(d){this._core=d,this._onBufferChange=new f.EventEmitter,this.onBufferChange=this._onBufferChange.event,this._normal=new v.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new v.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}},7975:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ParserApi=void 0,c.ParserApi=class{constructor(y){this._core=y}registerCsiHandler(y,v){return this._core.registerCsiHandler(y,f=>v(f.toArray()))}addCsiHandler(y,v){return this.registerCsiHandler(y,v)}registerDcsHandler(y,v){return this._core.registerDcsHandler(y,(f,d)=>v(f,d.toArray()))}addDcsHandler(y,v){return this.registerDcsHandler(y,v)}registerEscHandler(y,v){return this._core.registerEscHandler(y,v)}addEscHandler(y,v){return this.registerEscHandler(y,v)}registerOscHandler(y,v){return this._core.registerOscHandler(y,v)}addOscHandler(y,v){return this.registerOscHandler(y,v)}}},7090:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeApi=void 0,c.UnicodeApi=class{constructor(y){this._core=y}register(y){this._core.unicodeService.register(y)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(y){this._core.unicodeService.activeVersion=y}}},744:function(q,c,y){var v=this&&this.__decorate||function(t,h,o,r){var n,_=arguments.length,g=_<3?h:r===null?r=Object.getOwnPropertyDescriptor(h,o):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,h,o,r);else for(var w=t.length-1;w>=0;w--)(n=t[w])&&(g=(_<3?n(g):_>3?n(h,o,g):n(h,o))||g);return _>3&&g&&Object.defineProperty(h,o,g),g},f=this&&this.__param||function(t,h){return function(o,r){h(o,r,t)}};Object.defineProperty(c,"__esModule",{value:!0}),c.BufferService=c.MINIMUM_ROWS=c.MINIMUM_COLS=void 0;const d=y(2585),u=y(5295),C=y(8460),m=y(844);c.MINIMUM_COLS=2,c.MINIMUM_ROWS=1;let a=class extends m.Disposable{constructor(t){super(),this.isUserScrolling=!1,this._onResize=this.register(new C.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new C.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,c.MINIMUM_COLS),this.rows=Math.max(t.rawOptions.rows||0,c.MINIMUM_ROWS),this.buffers=this.register(new u.BufferSet(t,this))}get buffer(){return this.buffers.active}resize(t,h){this.cols=t,this.rows=h,this.buffers.resize(t,h),this._onResize.fire({cols:t,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,h=!1){const o=this.buffer;let r;r=this._cachedBlankLine,r&&r.length===this.cols&&r.getFg(0)===t.fg&&r.getBg(0)===t.bg||(r=o.getBlankLine(t,h),this._cachedBlankLine=r),r.isWrapped=h;const n=o.ybase+o.scrollTop,_=o.ybase+o.scrollBottom;if(o.scrollTop===0){const g=o.lines.isFull;_===o.lines.length-1?g?o.lines.recycle().copyFrom(r):o.lines.push(r.clone()):o.lines.splice(_+1,0,r.clone()),g?this.isUserScrolling&&(o.ydisp=Math.max(o.ydisp-1,0)):(o.ybase++,this.isUserScrolling||o.ydisp++)}else{const g=_-n+1;o.lines.shiftElements(n+1,g-1,-1),o.lines.set(_,r.clone())}this.isUserScrolling||(o.ydisp=o.ybase),this._onScroll.fire(o.ydisp)}scrollLines(t,h,o){const r=this.buffer;if(t<0){if(r.ydisp===0)return;this.isUserScrolling=!0}else t+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);const n=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+t,r.ybase),0),n!==r.ydisp&&(h||this._onScroll.fire(r.ydisp))}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this.buffer.ydisp)}scrollToBottom(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)}scrollToLine(t){const h=t-this.buffer.ydisp;h!==0&&this.scrollLines(h)}};a=v([f(0,d.IOptionsService)],a),c.BufferService=a},7994:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CharsetService=void 0,c.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(y){this.glevel=y,this.charset=this._charsets[y]}setgCharset(y,v){this._charsets[y]=v,this.glevel===y&&(this.charset=v)}}},1753:function(q,c,y){var v=this&&this.__decorate||function(r,n,_,g){var w,p=arguments.length,S=p<3?n:g===null?g=Object.getOwnPropertyDescriptor(n,_):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,n,_,g);else for(var x=r.length-1;x>=0;x--)(w=r[x])&&(S=(p<3?w(S):p>3?w(n,_,S):w(n,_))||S);return p>3&&S&&Object.defineProperty(n,_,S),S},f=this&&this.__param||function(r,n){return function(_,g){n(_,g,r)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CoreMouseService=void 0;const d=y(2585),u=y(8460),C=y(844),m={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:r=>r.button!==4&&r.action===1&&(r.ctrl=!1,r.alt=!1,r.shift=!1,!0)},VT200:{events:19,restrict:r=>r.action!==32},DRAG:{events:23,restrict:r=>r.action!==32||r.button!==3},ANY:{events:31,restrict:r=>!0}};function a(r,n){let _=(r.ctrl?16:0)|(r.shift?4:0)|(r.alt?8:0);return r.button===4?(_|=64,_|=r.action):(_|=3&r.button,4&r.button&&(_|=64),8&r.button&&(_|=128),r.action===32?_|=32:r.action!==0||n||(_|=3)),_}const t=String.fromCharCode,h={DEFAULT:r=>{const n=[a(r,!1)+32,r.col+32,r.row+32];return n[0]>255||n[1]>255||n[2]>255?"":`\x1B[M${t(n[0])}${t(n[1])}${t(n[2])}`},SGR:r=>{const n=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${a(r,!0)};${r.col};${r.row}${n}`},SGR_PIXELS:r=>{const n=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${a(r,!0)};${r.x};${r.y}${n}`}};let o=class extends C.Disposable{constructor(r,n){super(),this._bufferService=r,this._coreService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new u.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const _ of Object.keys(m))this.addProtocol(_,m[_]);for(const _ of Object.keys(h))this.addEncoding(_,h[_]);this.reset()}addProtocol(r,n){this._protocols[r]=n}addEncoding(r,n){this._encodings[r]=n}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(r){if(!this._protocols[r])throw new Error(`unknown protocol "${r}"`);this._activeProtocol=r,this._onProtocolChange.fire(this._protocols[r].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(r){if(!this._encodings[r])throw new Error(`unknown encoding "${r}"`);this._activeEncoding=r}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,r,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(r))return!1;const n=this._encodings[this._activeEncoding](r);return n&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(n):this._coreService.triggerDataEvent(n,!0)),this._lastEvent=r,!0}explainEvents(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}}_equalEvents(r,n,_){if(_){if(r.x!==n.x||r.y!==n.y)return!1}else if(r.col!==n.col||r.row!==n.row)return!1;return r.button===n.button&&r.action===n.action&&r.ctrl===n.ctrl&&r.alt===n.alt&&r.shift===n.shift}};o=v([f(0,d.IBufferService),f(1,d.ICoreService)],o),c.CoreMouseService=o},6975:function(q,c,y){var v=this&&this.__decorate||function(o,r,n,_){var g,w=arguments.length,p=w<3?r:_===null?_=Object.getOwnPropertyDescriptor(r,n):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(o,r,n,_);else for(var S=o.length-1;S>=0;S--)(g=o[S])&&(p=(w<3?g(p):w>3?g(r,n,p):g(r,n))||p);return w>3&&p&&Object.defineProperty(r,n,p),p},f=this&&this.__param||function(o,r){return function(n,_){r(n,_,o)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CoreService=void 0;const d=y(2585),u=y(8460),C=y(1439),m=y(844),a=Object.freeze({insertMode:!1}),t=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let h=class extends m.Disposable{constructor(o,r,n){super(),this._bufferService=o,this._logService=r,this._optionsService=n,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new u.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new u.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new u.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new u.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,C.clone)(a),this.decPrivateModes=(0,C.clone)(t)}reset(){this.modes=(0,C.clone)(a),this.decPrivateModes=(0,C.clone)(t)}triggerDataEvent(o,r=!1){if(this._optionsService.rawOptions.disableStdin)return;const n=this._bufferService.buffer;r&&this._optionsService.rawOptions.scrollOnUserInput&&n.ybase!==n.ydisp&&this._onRequestScrollToBottom.fire(),r&&this._onUserInput.fire(),this._logService.debug(`sending data "${o}"`,()=>o.split("").map(_=>_.charCodeAt(0))),this._onData.fire(o)}triggerBinaryEvent(o){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${o}"`,()=>o.split("").map(r=>r.charCodeAt(0))),this._onBinary.fire(o))}};h=v([f(0,d.IBufferService),f(1,d.ILogService),f(2,d.IOptionsService)],h),c.CoreService=h},9074:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DecorationService=void 0;const v=y(8055),f=y(8460),d=y(844),u=y(6106);let C=0,m=0;class a extends d.Disposable{constructor(){super(),this._decorations=new u.SortedList(o=>o==null?void 0:o.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)(()=>{for(const o of this._decorations.values())this._onDecorationRemoved.fire(o);this.reset()}))}get decorations(){return this._decorations.values()}registerDecoration(o){if(o.marker.isDisposed)return;const r=new t(o);if(r){const n=r.marker.onDispose(()=>r.dispose());r.onDispose(()=>{r&&(this._decorations.delete(r)&&this._onDecorationRemoved.fire(r),n.dispose())}),this._decorations.insert(r),this._onDecorationRegistered.fire(r)}return r}reset(){for(const o of this._decorations.values())o.dispose();this._decorations.clear()}*getDecorationsAtCell(o,r,n){var _,g,w;let p=0,S=0;for(const x of this._decorations.getKeyIterator(r))p=(_=x.options.x)!==null&&_!==void 0?_:0,S=p+((g=x.options.width)!==null&&g!==void 0?g:1),o>=p&&o<S&&(!n||((w=x.options.layer)!==null&&w!==void 0?w:"bottom")===n)&&(yield x)}forEachDecorationAtCell(o,r,n,_){this._decorations.forEachByKey(r,g=>{var w,p,S;C=(w=g.options.x)!==null&&w!==void 0?w:0,m=C+((p=g.options.width)!==null&&p!==void 0?p:1),o>=C&&o<m&&(!n||((S=g.options.layer)!==null&&S!==void 0?S:"bottom")===n)&&_(g)})}dispose(){for(const o of this._decorations.values())this._onDecorationRemoved.fire(o);this.reset()}}c.DecorationService=a;class t extends d.Disposable{constructor(o){super(),this.options=o,this.isDisposed=!1,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=o.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=v.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=v.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.InstantiationService=c.ServiceCollection=void 0;const v=y(2585),f=y(8343);class d{constructor(...C){this._entries=new Map;for(const[m,a]of C)this.set(m,a)}set(C,m){const a=this._entries.get(C);return this._entries.set(C,m),a}forEach(C){for(const[m,a]of this._entries.entries())C(m,a)}has(C){return this._entries.has(C)}get(C){return this._entries.get(C)}}c.ServiceCollection=d,c.InstantiationService=class{constructor(){this._services=new d,this._services.set(v.IInstantiationService,this)}setService(u,C){this._services.set(u,C)}getService(u){return this._services.get(u)}createInstance(u,...C){const m=(0,f.getServiceDependencies)(u).sort((h,o)=>h.index-o.index),a=[];for(const h of m){const o=this._services.get(h.id);if(!o)throw new Error(`[createInstance] ${u.name} depends on UNKNOWN service ${h.id}.`);a.push(o)}const t=m.length>0?m[0].index:C.length;if(C.length!==t)throw new Error(`[createInstance] First service dependency of ${u.name} at position ${t+1} conflicts with ${C.length} static arguments`);return new u(...C,...a)}}},7866:function(q,c,y){var v=this&&this.__decorate||function(a,t,h,o){var r,n=arguments.length,_=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,h):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(a,t,h,o);else for(var g=a.length-1;g>=0;g--)(r=a[g])&&(_=(n<3?r(_):n>3?r(t,h,_):r(t,h))||_);return n>3&&_&&Object.defineProperty(t,h,_),_},f=this&&this.__param||function(a,t){return function(h,o){t(h,o,a)}};Object.defineProperty(c,"__esModule",{value:!0}),c.LogService=void 0;const d=y(844),u=y(2585),C={debug:u.LogLevelEnum.DEBUG,info:u.LogLevelEnum.INFO,warn:u.LogLevelEnum.WARN,error:u.LogLevelEnum.ERROR,off:u.LogLevelEnum.OFF};let m=class extends d.Disposable{constructor(a){super(),this._optionsService=a,this.logLevel=u.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}_updateLogLevel(){this.logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let t=0;t<a.length;t++)typeof a[t]=="function"&&(a[t]=a[t]())}_log(a,t,h){this._evalLazyOptionalParams(h),a.call(console,"xterm.js: "+t,...h)}debug(a,...t){this.logLevel<=u.LogLevelEnum.DEBUG&&this._log(console.log,a,t)}info(a,...t){this.logLevel<=u.LogLevelEnum.INFO&&this._log(console.info,a,t)}warn(a,...t){this.logLevel<=u.LogLevelEnum.WARN&&this._log(console.warn,a,t)}error(a,...t){this.logLevel<=u.LogLevelEnum.ERROR&&this._log(console.error,a,t)}};m=v([f(0,u.IOptionsService)],m),c.LogService=m},7302:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.OptionsService=c.DEFAULT_OPTIONS=void 0;const v=y(8460),f=y(6114),d=y(844);c.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const u=["normal","bold","100","200","300","400","500","600","700","800","900"];class C extends d.Disposable{constructor(a){super(),this._onOptionChange=this.register(new v.EventEmitter),this.onOptionChange=this._onOptionChange.event;const t=Object.assign({},c.DEFAULT_OPTIONS);for(const h in a)if(h in t)try{const o=a[h];t[h]=this._sanitizeAndValidateOption(h,o)}catch(o){console.error(o)}this.rawOptions=t,this.options=Object.assign({},t),this._setupOptions()}onSpecificOptionChange(a,t){return this.onOptionChange(h=>{h===a&&t(this.rawOptions[a])})}onMultipleOptionChange(a,t){return this.onOptionChange(h=>{a.indexOf(h)!==-1&&t()})}_setupOptions(){const a=h=>{if(!(h in c.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},t=(h,o)=>{if(!(h in c.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);o=this._sanitizeAndValidateOption(h,o),this.rawOptions[h]!==o&&(this.rawOptions[h]=o,this._onOptionChange.fire(h))};for(const h in this.rawOptions){const o={get:a.bind(this,h),set:t.bind(this,h)};Object.defineProperty(this.options,h,o)}}_sanitizeAndValidateOption(a,t){switch(a){case"cursorStyle":if(t||(t=c.DEFAULT_OPTIONS[a]),!function(h){return h==="block"||h==="underline"||h==="bar"}(t))throw new Error(`"${t}" is not a valid value for ${a}`);break;case"wordSeparator":t||(t=c.DEFAULT_OPTIONS[a]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=u.includes(t)?t:c.DEFAULT_OPTIONS[a];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${a} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(10*t)/10));break;case"scrollback":if((t=Math.min(t,4294967295))<0)throw new Error(`${a} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${a} cannot be less than or equal to 0, value: ${t}`);case"rows":case"cols":if(!t&&t!==0)throw new Error(`${a} must be numeric, value: ${t}`)}return t}}c.OptionsService=C},2660:function(q,c,y){var v=this&&this.__decorate||function(C,m,a,t){var h,o=arguments.length,r=o<3?m:t===null?t=Object.getOwnPropertyDescriptor(m,a):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(C,m,a,t);else for(var n=C.length-1;n>=0;n--)(h=C[n])&&(r=(o<3?h(r):o>3?h(m,a,r):h(m,a))||r);return o>3&&r&&Object.defineProperty(m,a,r),r},f=this&&this.__param||function(C,m){return function(a,t){m(a,t,C)}};Object.defineProperty(c,"__esModule",{value:!0}),c.OscLinkService=void 0;const d=y(2585);let u=class{constructor(C){this._bufferService=C,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(C){const m=this._bufferService.buffer;if(C.id===void 0){const n=m.addMarker(m.ybase+m.y),_={data:C,id:this._nextId++,lines:[n]};return n.onDispose(()=>this._removeMarkerFromLink(_,n)),this._dataByLinkId.set(_.id,_),_.id}const a=C,t=this._getEntryIdKey(a),h=this._entriesWithId.get(t);if(h)return this.addLineToLink(h.id,m.ybase+m.y),h.id;const o=m.addMarker(m.ybase+m.y),r={id:this._nextId++,key:this._getEntryIdKey(a),data:a,lines:[o]};return o.onDispose(()=>this._removeMarkerFromLink(r,o)),this._entriesWithId.set(r.key,r),this._dataByLinkId.set(r.id,r),r.id}addLineToLink(C,m){const a=this._dataByLinkId.get(C);if(a&&a.lines.every(t=>t.line!==m)){const t=this._bufferService.buffer.addMarker(m);a.lines.push(t),t.onDispose(()=>this._removeMarkerFromLink(a,t))}}getLinkData(C){var m;return(m=this._dataByLinkId.get(C))===null||m===void 0?void 0:m.data}_getEntryIdKey(C){return`${C.id};;${C.uri}`}_removeMarkerFromLink(C,m){const a=C.lines.indexOf(m);a!==-1&&(C.lines.splice(a,1),C.lines.length===0&&(C.data.id!==void 0&&this._entriesWithId.delete(C.key),this._dataByLinkId.delete(C.id)))}};u=v([f(0,d.IBufferService)],u),c.OscLinkService=u},8343:(q,c)=>{function y(v,f,d){f.di$target===f?f.di$dependencies.push({id:v,index:d}):(f.di$dependencies=[{id:v,index:d}],f.di$target=f)}Object.defineProperty(c,"__esModule",{value:!0}),c.createDecorator=c.getServiceDependencies=c.serviceRegistry=void 0,c.serviceRegistry=new Map,c.getServiceDependencies=function(v){return v.di$dependencies||[]},c.createDecorator=function(v){if(c.serviceRegistry.has(v))return c.serviceRegistry.get(v);const f=function(d,u,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");y(f,d,C)};return f.toString=()=>v,c.serviceRegistry.set(v,f),f}},2585:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.IDecorationService=c.IUnicodeService=c.IOscLinkService=c.IOptionsService=c.ILogService=c.LogLevelEnum=c.IInstantiationService=c.ICharsetService=c.ICoreService=c.ICoreMouseService=c.IBufferService=void 0;const v=y(8343);var f;c.IBufferService=(0,v.createDecorator)("BufferService"),c.ICoreMouseService=(0,v.createDecorator)("CoreMouseService"),c.ICoreService=(0,v.createDecorator)("CoreService"),c.ICharsetService=(0,v.createDecorator)("CharsetService"),c.IInstantiationService=(0,v.createDecorator)("InstantiationService"),(f=c.LogLevelEnum||(c.LogLevelEnum={}))[f.DEBUG=0]="DEBUG",f[f.INFO=1]="INFO",f[f.WARN=2]="WARN",f[f.ERROR=3]="ERROR",f[f.OFF=4]="OFF",c.ILogService=(0,v.createDecorator)("LogService"),c.IOptionsService=(0,v.createDecorator)("OptionsService"),c.IOscLinkService=(0,v.createDecorator)("OscLinkService"),c.IUnicodeService=(0,v.createDecorator)("UnicodeService"),c.IDecorationService=(0,v.createDecorator)("DecorationService")},1480:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.UnicodeService=void 0;const v=y(8460),f=y(225);c.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new v.EventEmitter,this.onChange=this._onChange.event;const d=new f.UnicodeV6;this.register(d),this._active=d.version,this._activeProvider=d}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(d){if(!this._providers[d])throw new Error(`unknown Unicode version "${d}"`);this._active=d,this._activeProvider=this._providers[d],this._onChange.fire(d)}register(d){this._providers[d.version]=d}wcwidth(d){return this._activeProvider.wcwidth(d)}getStringCellWidth(d){let u=0;const C=d.length;for(let m=0;m<C;++m){let a=d.charCodeAt(m);if(55296<=a&&a<=56319){if(++m>=C)return u+this.wcwidth(a);const t=d.charCodeAt(m);56320<=t&&t<=57343?a=1024*(a-55296)+t-56320+65536:u+=this.wcwidth(t)}u+=this.wcwidth(a)}return u}}}},le={};function fe(q){var c=le[q];if(c!==void 0)return c.exports;var y=le[q]={exports:{}};return ie[q].call(y.exports,y,y.exports,fe),y.exports}var pe={};return(()=>{var q=pe;Object.defineProperty(q,"__esModule",{value:!0}),q.Terminal=void 0;const c=fe(3236),y=fe(9042),v=fe(7975),f=fe(7090),d=fe(5741),u=fe(8285),C=["cols","rows"];q.Terminal=class{constructor(m){this._core=new c.Terminal(m),this._addonManager=new d.AddonManager,this._publicOptions=Object.assign({},this._core.options);const a=h=>this._core.options[h],t=(h,o)=>{this._checkReadonlyOptions(h),this._core.options[h]=o};for(const h in this._core.options){const o={get:a.bind(this,h),set:t.bind(this,h)};Object.defineProperty(this._publicOptions,h,o)}}_checkReadonlyOptions(m){if(C.includes(m))throw new Error(`Option "${m}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=new u.BufferNamespaceApi(this._core)),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const m=this._core.coreService.decPrivateModes;let a="none";switch(this._core.coreMouseService.activeProtocol){case"X10":a="x10";break;case"VT200":a="vt200";break;case"DRAG":a="drag";break;case"ANY":a="any"}return{applicationCursorKeysMode:m.applicationCursorKeys,applicationKeypadMode:m.applicationKeypad,bracketedPasteMode:m.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:a,originMode:m.origin,reverseWraparoundMode:m.reverseWraparound,sendFocusMode:m.sendFocus,wraparoundMode:m.wraparound}}get options(){return this._publicOptions}set options(m){for(const a in m)this._publicOptions[a]=m[a]}blur(){this._core.blur()}focus(){this._core.focus()}resize(m,a){this._verifyIntegers(m,a),this._core.resize(m,a)}open(m){this._core.open(m)}attachCustomKeyEventHandler(m){this._core.attachCustomKeyEventHandler(m)}registerLinkProvider(m){return this._core.registerLinkProvider(m)}registerCharacterJoiner(m){return this._checkProposedApi(),this._core.registerCharacterJoiner(m)}deregisterCharacterJoiner(m){this._checkProposedApi(),this._core.deregisterCharacterJoiner(m)}registerMarker(m=0){return this._verifyIntegers(m),this._core.addMarker(m)}registerDecoration(m){var a,t,h;return this._checkProposedApi(),this._verifyPositiveIntegers((a=m.x)!==null&&a!==void 0?a:0,(t=m.width)!==null&&t!==void 0?t:0,(h=m.height)!==null&&h!==void 0?h:0),this._core.registerDecoration(m)}hasSelection(){return this._core.hasSelection()}select(m,a,t){this._verifyIntegers(m,a,t),this._core.select(m,a,t)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(m,a){this._verifyIntegers(m,a),this._core.selectLines(m,a)}dispose(){this._addonManager.dispose(),this._core.dispose()}scrollLines(m){this._verifyIntegers(m),this._core.scrollLines(m)}scrollPages(m){this._verifyIntegers(m),this._core.scrollPages(m)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(m){this._verifyIntegers(m),this._core.scrollToLine(m)}clear(){this._core.clear()}write(m,a){this._core.write(m,a)}writeln(m,a){this._core.write(m),this._core.write(`\r
`,a)}paste(m){this._core.paste(m)}refresh(m,a){this._verifyIntegers(m,a),this._core.refresh(m,a)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(m){return this._addonManager.loadAddon(this,m)}static get strings(){return y}_verifyIntegers(...m){for(const a of m)if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...m){for(const a of m)if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}}})(),pe})()})})(Fr);var Nr={exports:{}};(function(Y,G){(function(ie,le){Y.exports=le()})(self,function(){return(()=>{var ie={903:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BaseRenderLayer=void 0;const v=y(503),f=y(627),d=y(237),u=y(860),C=y(374),m=y(296),a=y(855),t=y(274),h=y(859),o=y(399),r=y(345);class n extends h.Disposable{constructor(w,p,S,x,A,T,B,U,D,H){super(),this._terminal=w,this._container=p,this._alpha=A,this._themeService=T,this._bufferService=B,this._optionsService=U,this._decorationService=D,this._coreBrowserService=H,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,m.createSelectionRenderModel)(),this._bitmapGenerator=[],this._onAddTextureAtlasCanvas=this.register(new r.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new t.CellColorResolver(this._terminal,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${S}-layer`),this._canvas.style.zIndex=x.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors(L=>{this._refreshCharAtlas(L),this.reset()})),this.register((0,h.toDisposable)(()=>{var L;(0,v.removeElementFromParent)(this._canvas),(L=this._charAtlas)===null||L===void 0||L.dispose()}))}get canvas(){return this._canvas}get cacheCanvas(){var w;return(w=this._charAtlas)===null||w===void 0?void 0:w.pages[0].canvas}_initCanvas(){this._ctx=(0,C.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(w,p){}handleSelectionChanged(w,p,S=!1){this._selectionModel.update(this._terminal,w,p,S)}_setTransparency(w){if(w===this._alpha)return;const p=this._canvas;this._alpha=w,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,p),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(w){var p;if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){(p=this._charAtlasDisposable)===null||p===void 0||p.dispose(),this._charAtlas=(0,f.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,w,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable=(0,r.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let S=0;S<this._charAtlas.pages.length;S++)this._bitmapGenerator[S]=new _(this._charAtlas.pages[S].canvas)}}resize(w){this._deviceCellWidth=w.device.cell.width,this._deviceCellHeight=w.device.cell.height,this._deviceCharWidth=w.device.char.width,this._deviceCharHeight=w.device.char.height,this._deviceCharLeft=w.device.char.left,this._deviceCharTop=w.device.char.top,this._canvas.width=w.device.canvas.width,this._canvas.height=w.device.canvas.height,this._canvas.style.width=`${w.css.canvas.width}px`,this._canvas.style.height=`${w.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){var w;(w=this._charAtlas)===null||w===void 0||w.clearTexture()}_fillCells(w,p,S,x){this._ctx.fillRect(w*this._deviceCellWidth,p*this._deviceCellHeight,S*this._deviceCellWidth,x*this._deviceCellHeight)}_fillMiddleLineAtCells(w,p,S=1){const x=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(w*this._deviceCellWidth,(p+1)*this._deviceCellHeight-x-this._coreBrowserService.dpr,S*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(w,p,S=1,x=0){this._ctx.fillRect(w*this._deviceCellWidth,(p+1)*this._deviceCellHeight+x-this._coreBrowserService.dpr-1,S*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(w,p,S=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const x=this._coreBrowserService.dpr;this._ctx.lineWidth=x;for(let A=0;A<S;A++){const T=(w+A)*this._deviceCellWidth,B=(w+A+.5)*this._deviceCellWidth,U=(w+A+1)*this._deviceCellWidth,D=(p+1)*this._deviceCellHeight-x-1,H=D-x,L=D+x;this._ctx.moveTo(T,D),this._ctx.bezierCurveTo(T,H,B,H,B,D),this._ctx.bezierCurveTo(B,L,U,L,U,D)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(w,p,S=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const x=this._coreBrowserService.dpr;this._ctx.lineWidth=x,this._ctx.setLineDash([2*x,x]);const A=w*this._deviceCellWidth,T=(p+1)*this._deviceCellHeight-x-1;this._ctx.moveTo(A,T);for(let B=0;B<S;B++){const U=(w+S+B)*this._deviceCellWidth;this._ctx.lineTo(U,T)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(w,p,S=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;const x=this._coreBrowserService.dpr;this._ctx.lineWidth=x,this._ctx.setLineDash([4*x,3*x]);const A=w*this._deviceCellWidth,T=(w+S)*this._deviceCellWidth,B=(p+1)*this._deviceCellHeight-x-1;this._ctx.moveTo(A,B),this._ctx.lineTo(T,B),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(w,p,S){this._ctx.fillRect(w*this._deviceCellWidth,p*this._deviceCellHeight,this._coreBrowserService.dpr*S,this._deviceCellHeight)}_strokeRectAtCell(w,p,S,x){const A=this._coreBrowserService.dpr;this._ctx.lineWidth=A,this._ctx.strokeRect(w*this._deviceCellWidth+A/2,p*this._deviceCellHeight+A/2,S*this._deviceCellWidth-A,x*this._deviceCellHeight-A)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(w,p,S,x){this._alpha?this._ctx.clearRect(w*this._deviceCellWidth,p*this._deviceCellHeight,S*this._deviceCellWidth,x*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(w*this._deviceCellWidth,p*this._deviceCellHeight,S*this._deviceCellWidth,x*this._deviceCellHeight))}_fillCharTrueColor(w,p,S){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=d.TEXT_BASELINE,this._clipRow(S);let x=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(x=(0,u.tryDrawCustomChar)(this._ctx,w.getChars(),p*this._deviceCellWidth,S*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),x||this._ctx.fillText(w.getChars(),p*this._deviceCellWidth+this._deviceCharLeft,S*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(w,p,S){var x,A;const T=w.getChars();let B;this._cellColorResolver.resolve(w,p,this._bufferService.buffer.ydisp+S),B=T&&T.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(T,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext):this._charAtlas.getRasterizedGlyph(w.getCode()||a.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext),B.size.x&&B.size.y&&(this._ctx.save(),this._clipRow(S),this._charAtlas.pages[B.texturePage].version!==((x=this._bitmapGenerator[B.texturePage])===null||x===void 0?void 0:x.version)&&(this._bitmapGenerator[B.texturePage]||(this._bitmapGenerator[B.texturePage]=new _(this._charAtlas.pages[B.texturePage].canvas)),this._bitmapGenerator[B.texturePage].refresh(),this._bitmapGenerator[B.texturePage].version=this._charAtlas.pages[B.texturePage].version),this._ctx.drawImage(((A=this._bitmapGenerator[B.texturePage])===null||A===void 0?void 0:A.bitmap)||this._charAtlas.pages[B.texturePage].canvas,B.texturePosition.x,B.texturePosition.y,B.size.x,B.size.y,p*this._deviceCellWidth+this._deviceCharLeft-B.offset.x,S*this._deviceCellHeight+this._deviceCharTop-B.offset.y,B.size.x,B.size.y),this._ctx.restore())}_clipRow(w){this._ctx.beginPath(),this._ctx.rect(0,w*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(w,p){return`${p?"italic":""} ${w?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}c.BaseRenderLayer=n;class _{constructor(w){this._canvas=w,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}get bitmap(){return this._bitmap}refresh(){this._bitmap=void 0,o.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){this._state===0&&(this._bitmap=void 0,this._state=1,window.createImageBitmap(this._canvas).then(w=>{this._state===2?this.refresh():this._bitmap=w,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CanvasRenderer=void 0;const v=y(627),f=y(56),d=y(374),u=y(345),C=y(859),m=y(873),a=y(43),t=y(630),h=y(744);class o extends C.Disposable{constructor(n,_,g,w,p,S,x,A,T,B,U){super(),this._terminal=n,this._screenElement=_,this._bufferService=w,this._charSizeService=p,this._optionsService=S,this._coreBrowserService=T,this._themeService=U,this._onRequestRedraw=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new u.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new u.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;const D=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new h.TextRenderLayer(this._terminal,this._screenElement,0,D,this._bufferService,this._optionsService,x,B,this._coreBrowserService,U),new t.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,B,this._optionsService,U),new a.LinkRenderLayer(this._terminal,this._screenElement,2,g,this._bufferService,this._optionsService,B,this._coreBrowserService,U),new m.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,A,this._coreBrowserService,B,U)];for(const H of this._renderLayers)(0,u.forwardEvent)(H.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,d.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register((0,f.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,(H,L)=>this._setCanvasDevicePixelDimensions(H,L))),this.register((0,C.toDisposable)(()=>{for(const H of this._renderLayers)H.dispose();(0,v.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(n,_){this._updateDimensions();for(const g of this._renderLayers)g.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(n=>n.handleBlur())}handleFocus(){this._runOperation(n=>n.handleFocus())}handleSelectionChanged(n,_,g=!1){this._runOperation(w=>w.handleSelectionChanged(n,_,g)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(n=>n.handleCursorMove())}clear(){this._runOperation(n=>n.reset())}_runOperation(n){for(const _ of this._renderLayers)n(_)}renderRows(n,_){for(const g of this._renderLayers)g.handleGridChanged(n,_)}clearTextureAtlas(){for(const n of this._renderLayers)n.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;const n=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*n),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*n),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/n),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/n),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(n,_){this.dimensions.device.canvas.height=_,this.dimensions.device.canvas.width=n;for(const g of this._renderLayers)g.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}c.CanvasRenderer=o},873:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CursorRenderLayer=void 0;const v=y(903),f=y(782),d=y(859);class u extends v.BaseRenderLayer{constructor(a,t,h,o,r,n,_,g,w,p){super(a,t,"cursor",h,!0,p,r,n,w,g),this._onRequestRedraw=o,this._coreService=_,this._cell=new f.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this)},this.register(n.onOptionChange(()=>this._handleOptionsChanged())),this.register((0,d.toDisposable)(()=>{var S;(S=this._cursorBlinkStateManager)===null||S===void 0||S.dispose(),this._cursorBlinkStateManager=void 0}))}resize(a){super.resize(a),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){var a;this._clearCursor(),(a=this._cursorBlinkStateManager)===null||a===void 0||a.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){var a;(a=this._cursorBlinkStateManager)===null||a===void 0||a.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){var a;(a=this._cursorBlinkStateManager)===null||a===void 0||a.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){var a;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new C(this._coreBrowserService.isFocused,()=>{this._render(!0)},this._coreBrowserService)):((a=this._cursorBlinkStateManager)===null||a===void 0||a.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){var a;(a=this._cursorBlinkStateManager)===null||a===void 0||a.restartBlinkAnimation()}handleGridChanged(a,t){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()}_render(a){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const t=this._bufferService.buffer.ybase+this._bufferService.buffer.y,h=t-this._bufferService.buffer.ydisp;if(h<0||h>=this._bufferService.rows)return void this._clearCursor();const o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(t).loadCell(o,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const r=this._optionsService.rawOptions.cursorStyle;return r&&r!=="block"?this._cursorRenderers[r](o,h,this._cell):this._renderBlurCursor(o,h,this._cell),this._ctx.restore(),this._state.x=o,this._state.y=h,this._state.isFocused=!1,this._state.style=r,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===o&&this._state.y===h&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](o,h,this._cell),this._ctx.restore(),this._state.x=o,this._state.y=h,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(a,t,h){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(a,t,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(a,t,h){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(a,t,h.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(h,a,t),this._ctx.restore()}_renderUnderlineCursor(a,t,h){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(a,t),this._ctx.restore()}_renderBlurCursor(a,t,h){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(a,t,h.getWidth(),1),this._ctx.restore()}}c.CursorRenderLayer=u;class C{constructor(a,t,h){this._renderCallback=t,this._coreBrowserService=h,this.isCursorVisible=!0,a&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(a=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const t=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,t>0)return void this._restartInterval(t)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const t=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(t)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},a)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},574:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.GridCache=void 0,c.GridCache=class{constructor(){this.cache=[]}resize(y,v){for(let f=0;f<y;f++){this.cache.length<=f&&this.cache.push([]);for(let d=this.cache[f].length;d<v;d++)this.cache[f].push(void 0);this.cache[f].length=v}this.cache.length=y}clear(){for(let y=0;y<this.cache.length;y++)for(let v=0;v<this.cache[y].length;v++)this.cache[y][v]=void 0}}},43:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.LinkRenderLayer=void 0;const v=y(903),f=y(237),d=y(197);class u extends v.BaseRenderLayer{constructor(m,a,t,h,o,r,n,_,g){super(m,a,"link",t,!0,g,o,r,n,_),this.register(h.onShowLinkUnderline(w=>this._handleShowLinkUnderline(w))),this.register(h.onHideLinkUnderline(w=>this._handleHideLinkUnderline(w)))}resize(m){super.resize(m),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const m=this._state.y2-this._state.y1-1;m>0&&this._clearCells(0,this._state.y1+1,this._state.cols,m),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(m){if(m.fg===f.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:m.fg&&(0,d.is256Color)(m.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[m.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,m.y1===m.y2)this._fillBottomLineAtCells(m.x1,m.y1,m.x2-m.x1);else{this._fillBottomLineAtCells(m.x1,m.y1,m.cols-m.x1);for(let a=m.y1+1;a<m.y2;a++)this._fillBottomLineAtCells(0,a,m.cols);this._fillBottomLineAtCells(0,m.y2,m.x2)}this._state=m}_handleHideLinkUnderline(m){this._clearCurrentLink()}}c.LinkRenderLayer=u},630:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SelectionRenderLayer=void 0;const v=y(903);class f extends v.BaseRenderLayer{constructor(u,C,m,a,t,h,o,r){super(u,C,"selection",m,!0,r,a,o,h,t),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(u){super.resize(u),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(u,C,m){super.handleSelectionChanged(u,C,m),this._redrawSelection(u,C,m)}_redrawSelection(u,C,m){if(!this._didStateChange(u,C,m,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!u||!C)return void this._clearState();const a=u[1]-this._bufferService.buffer.ydisp,t=C[1]-this._bufferService.buffer.ydisp,h=Math.max(a,0),o=Math.min(t,this._bufferService.rows-1);if(h>=this._bufferService.rows||o<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,m){const r=u[0],n=C[0]-r,_=o-h+1;this._fillCells(r,h,n,_)}else{const r=a===h?u[0]:0,n=h===t?C[0]:this._bufferService.cols;this._fillCells(r,h,n-r,1);const _=Math.max(o-h-1,0);if(this._fillCells(0,h+1,this._bufferService.cols,_),h!==o){const g=t===o?C[0]:this._bufferService.cols;this._fillCells(0,o,g,1)}}this._state.start=[u[0],u[1]],this._state.end=[C[0],C[1]],this._state.columnSelectMode=m,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(u,C,m,a){return!this._areCoordinatesEqual(u,this._state.start)||!this._areCoordinatesEqual(C,this._state.end)||m!==this._state.columnSelectMode||a!==this._state.ydisp}_areCoordinatesEqual(u,C){return!(!u||!C)&&u[0]===C[0]&&u[1]===C[1]}}c.SelectionRenderLayer=f},744:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TextRenderLayer=void 0;const v=y(574),f=y(903),d=y(147),u=y(855),C=y(782),m=y(577),a=y(160);class t extends f.BaseRenderLayer{constructor(o,r,n,_,g,w,p,S,x,A){super(o,r,"text",n,_,A,g,w,S,x),this._characterJoinerService=p,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new C.CellData,this._state=new v.GridCache,this.register(w.onSpecificOptionChange("allowTransparency",T=>this._setTransparency(T)))}resize(o){super.resize(o);const r=this._getFont(!1,!1);this._characterWidth===o.device.char.width&&this._characterFont===r||(this._characterWidth=o.device.char.width,this._characterFont=r,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(o,r,n){for(let _=o;_<=r;_++){const g=_+this._bufferService.buffer.ydisp,w=this._bufferService.buffer.lines.get(g),p=this._characterJoinerService.getJoinedCharacters(g);for(let S=0;S<this._bufferService.cols;S++){w.loadCell(S,this._workCell);let x=this._workCell,A=!1,T=S;if(x.getWidth()===0)continue;const B=x.getCode();if(B!==0&&B!==32){if(p.length>0&&S===p[0][0]){A=!0;const U=p.shift();x=new m.JoinedCellData(this._workCell,w.translateToString(!0,U[0],U[1]),U[1]-U[0]),T=U[1]-1}!A&&this._isOverlapping(x)&&T<w.length-1&&w.getCodePoint(T+1)===u.NULL_CELL_CODE&&(x.content&=-12582913,x.content|=8388608),n(x,S,_),S=T}}}}_drawBackground(o,r){const n=this._ctx,_=this._bufferService.cols;let g=0,w=0,p=null;n.save(),this._forEachCell(o,r,(S,x,A)=>{let T=null;S.isInverse()?T=S.isFgDefault()?this._themeService.colors.foreground.css:S.isFgRGB()?`rgb(${d.AttributeData.toColorRGB(S.getFgColor()).join(",")})`:this._themeService.colors.ansi[S.getFgColor()].css:S.isBgRGB()?T=`rgb(${d.AttributeData.toColorRGB(S.getBgColor()).join(",")})`:S.isBgPalette()&&(T=this._themeService.colors.ansi[S.getBgColor()].css),T&&S.isDim()&&(T=a.color.multiplyOpacity(a.css.toColor(T),.5).css);let B=!1;this._decorationService.forEachDecorationAtCell(x,this._bufferService.buffer.ydisp+A,void 0,U=>{U.options.layer!=="top"&&B||(U.backgroundColorRGB&&(T=U.backgroundColorRGB.css),B=U.options.layer==="top")}),p===null&&(g=x,w=A),A!==w?(n.fillStyle=p||"",this._fillCells(g,w,_-g,1),g=x,w=A):p!==T&&(n.fillStyle=p||"",this._fillCells(g,w,x-g,1),g=x,w=A),p=T}),p!==null&&(n.fillStyle=p,this._fillCells(g,w,_-g,1)),n.restore()}_drawForeground(o,r){this._forEachCell(o,r,(n,_,g)=>this._drawChars(n,_,g))}handleGridChanged(o,r){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,o,this._bufferService.cols,r-o+1),this._drawBackground(o,r),this._drawForeground(o,r))}_isOverlapping(o){if(o.getWidth()!==1||o.getCode()<256)return!1;const r=o.getChars();if(this._characterOverlapCache.hasOwnProperty(r))return this._characterOverlapCache[r];this._ctx.save(),this._ctx.font=this._characterFont;const n=Math.floor(this._ctx.measureText(r).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[r]=n,n}}c.TextRenderLayer=t},503:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.removeElementFromParent=void 0,c.removeElementFromParent=function(...y){var v;for(const f of y)(v=f==null?void 0:f.parentElement)===null||v===void 0||v.removeChild(f)}},274:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CellColorResolver=void 0;let y,v=0,f=0,d=!1,u=!1,C=!1;c.CellColorResolver=class{constructor(m,a,t,h,o){this._terminal=m,this._selectionRenderModel=a,this._decorationService=t,this._coreBrowserService=h,this._themeService=o,this.result={fg:0,bg:0,ext:0}}resolve(m,a,t){this.result.bg=m.bg,this.result.fg=m.fg,this.result.ext=268435456&m.bg?m.extended.ext:0,f=0,v=0,u=!1,d=!1,C=!1,y=this._themeService.colors,this._decorationService.forEachDecorationAtCell(a,t,"bottom",h=>{h.backgroundColorRGB&&(f=h.backgroundColorRGB.rgba>>8&16777215,u=!0),h.foregroundColorRGB&&(v=h.foregroundColorRGB.rgba>>8&16777215,d=!0)}),C=this._selectionRenderModel.isCellSelected(this._terminal,a,t),C&&(f=(this._coreBrowserService.isFocused?y.selectionBackgroundOpaque:y.selectionInactiveBackgroundOpaque).rgba>>8&16777215,u=!0,y.selectionForeground&&(v=y.selectionForeground.rgba>>8&16777215,d=!0)),this._decorationService.forEachDecorationAtCell(a,t,"top",h=>{h.backgroundColorRGB&&(f=h.backgroundColorRGB.rgba>>8&16777215,u=!0),h.foregroundColorRGB&&(v=h.foregroundColorRGB.rgba>>8&16777215,d=!0)}),u&&(f=C?-16777216&m.bg&-134217729|f|50331648:-16777216&m.bg|f|50331648),d&&(v=-16777216&m.fg&-67108865|v|50331648),67108864&this.result.fg&&(u&&!d&&(v=(50331648&this.result.bg)==0?-134217728&this.result.fg|16777215&y.background.rgba>>8|50331648:-134217728&this.result.fg|67108863&this.result.bg,d=!0),!u&&d&&(f=(50331648&this.result.fg)==0?-67108864&this.result.bg|16777215&y.foreground.rgba>>8|50331648:-67108864&this.result.bg|67108863&this.result.fg,u=!0)),y=void 0,this.result.bg=u?f:this.result.bg,this.result.fg=d?v:this.result.fg}}},627:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.removeTerminalFromCache=c.acquireTextureAtlas=void 0;const v=y(509),f=y(197),d=[];c.acquireTextureAtlas=function(u,C,m,a,t,h,o,r){const n=(0,f.generateConfig)(a,t,h,o,C,m,r);for(let w=0;w<d.length;w++){const p=d[w],S=p.ownedBy.indexOf(u);if(S>=0){if((0,f.configEquals)(p.config,n))return p.atlas;p.ownedBy.length===1?(p.atlas.dispose(),d.splice(w,1)):p.ownedBy.splice(S,1);break}}for(let w=0;w<d.length;w++){const p=d[w];if((0,f.configEquals)(p.config,n))return p.ownedBy.push(u),p.atlas}const _=u._core,g={atlas:new v.TextureAtlas(document,n,_.unicodeService),config:n,ownedBy:[u]};return d.push(g),g.atlas},c.removeTerminalFromCache=function(u){for(let C=0;C<d.length;C++){const m=d[C].ownedBy.indexOf(u);if(m!==-1){d[C].ownedBy.length===1?(d[C].atlas.dispose(),d.splice(C,1)):d[C].ownedBy.splice(m,1);break}}}},197:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.is256Color=c.configEquals=c.generateConfig=void 0;const v=y(160);c.generateConfig=function(f,d,u,C,m,a,t){const h={foreground:a.foreground,background:a.background,cursor:v.NULL_COLOR,cursorAccent:v.NULL_COLOR,selectionForeground:v.NULL_COLOR,selectionBackgroundTransparent:v.NULL_COLOR,selectionBackgroundOpaque:v.NULL_COLOR,selectionInactiveBackgroundTransparent:v.NULL_COLOR,selectionInactiveBackgroundOpaque:v.NULL_COLOR,ansi:a.ansi.slice(),contrastCache:a.contrastCache};return{customGlyphs:m.customGlyphs,devicePixelRatio:t,letterSpacing:m.letterSpacing,lineHeight:m.lineHeight,deviceCellWidth:f,deviceCellHeight:d,deviceCharWidth:u,deviceCharHeight:C,fontFamily:m.fontFamily,fontSize:m.fontSize,fontWeight:m.fontWeight,fontWeightBold:m.fontWeightBold,allowTransparency:m.allowTransparency,drawBoldTextInBrightColors:m.drawBoldTextInBrightColors,minimumContrastRatio:m.minimumContrastRatio,colors:h}},c.configEquals=function(f,d){for(let u=0;u<f.colors.ansi.length;u++)if(f.colors.ansi[u].rgba!==d.colors.ansi[u].rgba)return!1;return f.devicePixelRatio===d.devicePixelRatio&&f.customGlyphs===d.customGlyphs&&f.lineHeight===d.lineHeight&&f.letterSpacing===d.letterSpacing&&f.fontFamily===d.fontFamily&&f.fontSize===d.fontSize&&f.fontWeight===d.fontWeight&&f.fontWeightBold===d.fontWeightBold&&f.allowTransparency===d.allowTransparency&&f.deviceCharWidth===d.deviceCharWidth&&f.deviceCharHeight===d.deviceCharHeight&&f.drawBoldTextInBrightColors===d.drawBoldTextInBrightColors&&f.minimumContrastRatio===d.minimumContrastRatio&&f.colors.foreground.rgba===d.colors.foreground.rgba&&f.colors.background.rgba===d.colors.background.rgba},c.is256Color=function(f){return(50331648&f)==16777216||(50331648&f)==33554432}},237:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TEXT_BASELINE=c.DIM_OPACITY=c.INVERTED_DEFAULT_COLOR=void 0;const v=y(399);c.INVERTED_DEFAULT_COLOR=257,c.DIM_OPACITY=.5,c.TEXT_BASELINE=v.isFirefox||v.isLegacyEdge?"bottom":"ideographic"},860:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.tryDrawCustomChar=c.powerlineDefinitions=c.boxDrawingDefinitions=c.blockElementDefinitions=void 0;const v=y(374);c.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const f={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};c.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(a,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"\u2551":{1:(a,t)=>`M${.5-a},0 L${.5-a},1 M${.5+a},0 L${.5+a},1`},"\u2552":{1:(a,t)=>`M.5,1 L.5,${.5-t} L1,${.5-t} M.5,${.5+t} L1,${.5+t}`},"\u2553":{1:(a,t)=>`M${.5-a},1 L${.5-a},.5 L1,.5 M${.5+a},.5 L${.5+a},1`},"\u2554":{1:(a,t)=>`M1,${.5-t} L${.5-a},${.5-t} L${.5-a},1 M1,${.5+t} L${.5+a},${.5+t} L${.5+a},1`},"\u2555":{1:(a,t)=>`M0,${.5-t} L.5,${.5-t} L.5,1 M0,${.5+t} L.5,${.5+t}`},"\u2556":{1:(a,t)=>`M${.5+a},1 L${.5+a},.5 L0,.5 M${.5-a},.5 L${.5-a},1`},"\u2557":{1:(a,t)=>`M0,${.5+t} L${.5-a},${.5+t} L${.5-a},1 M0,${.5-t} L${.5+a},${.5-t} L${.5+a},1`},"\u2558":{1:(a,t)=>`M.5,0 L.5,${.5+t} L1,${.5+t} M.5,${.5-t} L1,${.5-t}`},"\u2559":{1:(a,t)=>`M1,.5 L${.5-a},.5 L${.5-a},0 M${.5+a},.5 L${.5+a},0`},"\u255A":{1:(a,t)=>`M1,${.5-t} L${.5+a},${.5-t} L${.5+a},0 M1,${.5+t} L${.5-a},${.5+t} L${.5-a},0`},"\u255B":{1:(a,t)=>`M0,${.5+t} L.5,${.5+t} L.5,0 M0,${.5-t} L.5,${.5-t}`},"\u255C":{1:(a,t)=>`M0,.5 L${.5+a},.5 L${.5+a},0 M${.5-a},.5 L${.5-a},0`},"\u255D":{1:(a,t)=>`M0,${.5-t} L${.5-a},${.5-t} L${.5-a},0 M0,${.5+t} L${.5+a},${.5+t} L${.5+a},0`},"\u255E":{1:(a,t)=>`M.5,0 L.5,1 M.5,${.5-t} L1,${.5-t} M.5,${.5+t} L1,${.5+t}`},"\u255F":{1:(a,t)=>`M${.5-a},0 L${.5-a},1 M${.5+a},0 L${.5+a},1 M${.5+a},.5 L1,.5`},"\u2560":{1:(a,t)=>`M${.5-a},0 L${.5-a},1 M1,${.5+t} L${.5+a},${.5+t} L${.5+a},1 M1,${.5-t} L${.5+a},${.5-t} L${.5+a},0`},"\u2561":{1:(a,t)=>`M.5,0 L.5,1 M0,${.5-t} L.5,${.5-t} M0,${.5+t} L.5,${.5+t}`},"\u2562":{1:(a,t)=>`M0,.5 L${.5-a},.5 M${.5-a},0 L${.5-a},1 M${.5+a},0 L${.5+a},1`},"\u2563":{1:(a,t)=>`M${.5+a},0 L${.5+a},1 M0,${.5+t} L${.5-a},${.5+t} L${.5-a},1 M0,${.5-t} L${.5-a},${.5-t} L${.5-a},0`},"\u2564":{1:(a,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t} M.5,${.5+t} L.5,1`},"\u2565":{1:(a,t)=>`M0,.5 L1,.5 M${.5-a},.5 L${.5-a},1 M${.5+a},.5 L${.5+a},1`},"\u2566":{1:(a,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L${.5-a},${.5+t} L${.5-a},1 M1,${.5+t} L${.5+a},${.5+t} L${.5+a},1`},"\u2567":{1:(a,t)=>`M.5,0 L.5,${.5-t} M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"\u2568":{1:(a,t)=>`M0,.5 L1,.5 M${.5-a},.5 L${.5-a},0 M${.5+a},.5 L${.5+a},0`},"\u2569":{1:(a,t)=>`M0,${.5+t} L1,${.5+t} M0,${.5-t} L${.5-a},${.5-t} L${.5-a},0 M1,${.5-t} L${.5+a},${.5-t} L${.5+a},0`},"\u256A":{1:(a,t)=>`M.5,0 L.5,1 M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"\u256B":{1:(a,t)=>`M0,.5 L1,.5 M${.5-a},0 L${.5-a},1 M${.5+a},0 L${.5+a},1`},"\u256C":{1:(a,t)=>`M0,${.5+t} L${.5-a},${.5+t} L${.5-a},1 M1,${.5+t} L${.5+a},${.5+t} L${.5+a},1 M0,${.5-t} L${.5-a},${.5-t} L${.5-a},0 M1,${.5-t} L${.5+a},${.5-t} L${.5+a},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(a,t)=>`M.5,1 L.5,${.5+t/.15*.5} C.5,${.5+t/.15*.5},.5,.5,1,.5`},"\u256E":{1:(a,t)=>`M.5,1 L.5,${.5+t/.15*.5} C.5,${.5+t/.15*.5},.5,.5,0,.5`},"\u256F":{1:(a,t)=>`M.5,0 L.5,${.5-t/.15*.5} C.5,${.5-t/.15*.5},.5,.5,0,.5`},"\u2570":{1:(a,t)=>`M.5,0 L.5,${.5-t/.15*.5} C.5,${.5-t/.15*.5},.5,.5,1,.5`}},c.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},c.powerlineDefinitions["\uE0BB"]=c.powerlineDefinitions["\uE0B9"],c.powerlineDefinitions["\uE0BF"]=c.powerlineDefinitions["\uE0BD"],c.tryDrawCustomChar=function(a,t,h,o,r,n,_,g){const w=c.blockElementDefinitions[t];if(w)return function(A,T,B,U,D,H){for(let L=0;L<T.length;L++){const O=T[L],I=D/8,P=H/8;A.fillRect(B+O.x*I,U+O.y*P,O.w*I,O.h*P)}}(a,w,h,o,r,n),!0;const p=f[t];if(p)return function(A,T,B,U,D,H){let L=d.get(T);L||(L=new Map,d.set(T,L));const O=A.fillStyle;if(typeof O!="string")throw new Error(`Unexpected fillStyle type "${O}"`);let I=L.get(O);if(!I){const P=T[0].length,Q=T.length,N=document.createElement("canvas");N.width=P,N.height=Q;const K=(0,v.throwIfFalsy)(N.getContext("2d")),V=new ImageData(P,Q);let re,j,z,W;if(O.startsWith("#"))re=parseInt(O.slice(1,3),16),j=parseInt(O.slice(3,5),16),z=parseInt(O.slice(5,7),16),W=O.length>7&&parseInt(O.slice(7,9),16)||1;else{if(!O.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${O}" when drawing pattern glyph`);[re,j,z,W]=O.substring(5,O.length-1).split(",").map(ee=>parseFloat(ee))}for(let ee=0;ee<Q;ee++)for(let se=0;se<P;se++)V.data[4*(ee*P+se)]=re,V.data[4*(ee*P+se)+1]=j,V.data[4*(ee*P+se)+2]=z,V.data[4*(ee*P+se)+3]=T[ee][se]*(255*W);K.putImageData(V,0,0),I=(0,v.throwIfFalsy)(A.createPattern(N,null)),L.set(O,I)}A.fillStyle=I,A.fillRect(B,U,D,H)}(a,p,h,o,r,n),!0;const S=c.boxDrawingDefinitions[t];if(S)return function(A,T,B,U,D,H,L){A.strokeStyle=A.fillStyle;for(const[O,I]of Object.entries(T)){let P;A.beginPath(),A.lineWidth=L*Number.parseInt(O),P=typeof I=="function"?I(.15,.15/H*D):I;for(const Q of P.split(" ")){const N=Q[0],K=C[N];if(!K){console.error(`Could not find drawing instructions for "${N}"`);continue}const V=Q.substring(1).split(",");V[0]&&V[1]&&K(A,m(V,D,H,B,U,!0,L))}A.stroke(),A.closePath()}}(a,S,h,o,r,n,g),!0;const x=c.powerlineDefinitions[t];return!!x&&(function(A,T,B,U,D,H,L,O){var I,P;const Q=new Path2D;Q.rect(B,U,D,H),A.clip(Q),A.beginPath();const N=L/12;A.lineWidth=O*N;for(const K of T.d.split(" ")){const V=K[0],re=C[V];if(!re){console.error(`Could not find drawing instructions for "${V}"`);continue}const j=K.substring(1).split(",");j[0]&&j[1]&&re(A,m(j,D,H,B,U,!1,O,((I=T.leftPadding)!==null&&I!==void 0?I:0)*(N/2),((P=T.rightPadding)!==null&&P!==void 0?P:0)*(N/2)))}T.type===1?(A.strokeStyle=A.fillStyle,A.stroke()):A.fill(),A.closePath()}(a,x,h,o,r,n,_,g),!0)};const d=new Map;function u(a,t,h=0){return Math.max(Math.min(a,t),h)}const C={C:(a,t)=>a.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]),L:(a,t)=>a.lineTo(t[0],t[1]),M:(a,t)=>a.moveTo(t[0],t[1])};function m(a,t,h,o,r,n,_,g=0,w=0){const p=a.map(S=>parseFloat(S)||parseInt(S));if(p.length<2)throw new Error("Too few arguments for instruction");for(let S=0;S<p.length;S+=2)p[S]*=t-g*_-w*_,n&&p[S]!==0&&(p[S]=u(Math.round(p[S]+.5)-.5,t,0)),p[S]+=o+g*_;for(let S=1;S<p.length;S+=2)p[S]*=h,n&&p[S]!==0&&(p[S]=u(Math.round(p[S]+.5)-.5,h,0)),p[S]+=r;return p}},56:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.observeDevicePixelDimensions=void 0;const v=y(859);c.observeDevicePixelDimensions=function(f,d,u){let C=new d.ResizeObserver(m=>{const a=m.find(o=>o.target===f);if(!a)return;if(!("devicePixelContentBoxSize"in a))return C==null||C.disconnect(),void(C=void 0);const t=a.devicePixelContentBoxSize[0].inlineSize,h=a.devicePixelContentBoxSize[0].blockSize;t>0&&h>0&&u(t,h)});try{C.observe(f,{box:["device-pixel-content-box"]})}catch{C.disconnect(),C=void 0}return(0,v.toDisposable)(()=>C==null?void 0:C.disconnect())}},374:(q,c)=>{function y(v){return 57508<=v&&v<=57558}Object.defineProperty(c,"__esModule",{value:!0}),c.createRenderDimensions=c.excludeFromContrastRatioDemands=c.isRestrictedPowerlineGlyph=c.isPowerlineGlyph=c.throwIfFalsy=void 0,c.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v},c.isPowerlineGlyph=y,c.isRestrictedPowerlineGlyph=function(v){return 57520<=v&&v<=57527},c.excludeFromContrastRatioDemands=function(v){return y(v)||function(f){return 9472<=f&&f<=9631}(v)},c.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.createSelectionRenderModel=void 0;class y{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(f,d,u,C=!1){if(this.selectionStart=d,this.selectionEnd=u,!d||!u||d[0]===u[0]&&d[1]===u[1])return void this.clear();const m=d[1]-f.buffer.active.viewportY,a=u[1]-f.buffer.active.viewportY,t=Math.max(m,0),h=Math.min(a,f.rows-1);t>=f.rows||h<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=C,this.viewportStartRow=m,this.viewportEndRow=a,this.viewportCappedStartRow=t,this.viewportCappedEndRow=h,this.startCol=d[0],this.endCol=u[0])}isCellSelected(f,d,u){return!!this.hasSelection&&(u-=f.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&u>=this.viewportCappedStartRow&&d<this.endCol&&u<=this.viewportCappedEndRow:d<this.startCol&&u>=this.viewportCappedStartRow&&d>=this.endCol&&u<=this.viewportCappedEndRow:u>this.viewportStartRow&&u<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&u===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&u===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&u===this.viewportStartRow&&d>=this.startCol)}}c.createSelectionRenderModel=function(){return new y}},509:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TextureAtlas=void 0;const v=y(237),f=y(855),d=y(147),u=y(160),C=y(860),m=y(374),a=y(485),t=y(385),h=y(345),o={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let r;class n{constructor(S,x,A){this._document=S,this._config=x,this._unicodeService=A,this._didWarmUp=!1,this._cacheMap=new a.FourKeyMap,this._cacheMapCombined=new a.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new d.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new h.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new h.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=w(S,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,m.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}get pages(){return this._pages}dispose(){for(const S of this.pages)S.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const S=new t.IdleTaskQueue;for(let x=33;x<126;x++)S.enqueue(()=>{if(!this._cacheMap.get(x,f.DEFAULT_COLOR,f.DEFAULT_COLOR,f.DEFAULT_EXT)){const A=this._drawToCache(x,f.DEFAULT_COLOR,f.DEFAULT_COLOR,f.DEFAULT_EXT);this._cacheMap.set(x,f.DEFAULT_COLOR,f.DEFAULT_COLOR,f.DEFAULT_EXT,A)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const S of this._pages)S.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){n.maxAtlasPages&&this._pages.length>=Math.max(4,n.maxAtlasPages/2)&&queueMicrotask(()=>{const x=this._pages.filter(L=>2*L.canvas.width<=(n.maxTextureSize||4096)).sort((L,O)=>O.canvas.width!==L.canvas.width?O.canvas.width-L.canvas.width:O.percentageUsed-L.percentageUsed);let A=-1,T=0;for(let L=0;L<x.length;L++)if(x[L].canvas.width!==T)A=L,T=x[L].canvas.width;else if(L-A==3)break;const B=x.slice(A,A+4),U=B.map(L=>L.glyphs[0].texturePage).sort((L,O)=>L>O?1:-1),D=U[0],H=this._mergePages(B,D);H.version++,this._pages[D]=H;for(let L=U.length-1;L>=1;L--)this._deletePage(U[L]);this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(H.canvas)});const S=new _(this._document,this._textureSize);return this._pages.push(S),this._activePages.push(S),this._onAddTextureAtlasCanvas.fire(S.canvas),S}_mergePages(S,x){const A=2*S[0].canvas.width,T=new _(this._document,A,S);for(const[B,U]of S.entries()){const D=B*U.canvas.width%A,H=Math.floor(B/2)*U.canvas.height;T.ctx.drawImage(U.canvas,D,H);for(const O of U.glyphs)O.texturePage=x,O.sizeClipSpace.x=O.size.x/A,O.sizeClipSpace.y=O.size.y/A,O.texturePosition.x+=D,O.texturePosition.y+=H,O.texturePositionClipSpace.x=O.texturePosition.x/A,O.texturePositionClipSpace.y=O.texturePosition.y/A;this._onRemoveTextureAtlasCanvas.fire(U.canvas);const L=this._activePages.indexOf(U);L!==-1&&this._activePages.splice(L,1)}return T}_deletePage(S){this._pages.splice(S,1);for(let x=S;x<this._pages.length;x++){const A=this._pages[x];for(const T of A.glyphs)T.texturePage--;A.version++}}getRasterizedGlyphCombinedChar(S,x,A,T){return this._getFromCacheMap(this._cacheMapCombined,S,x,A,T)}getRasterizedGlyph(S,x,A,T){return this._getFromCacheMap(this._cacheMap,S,x,A,T)}_getFromCacheMap(S,x,A,T,B){return r=S.get(x,A,T,B),r||(r=this._drawToCache(x,A,T,B),S.set(x,A,T,B,r)),r}_getColorFromAnsiIndex(S){if(S>=this._config.colors.ansi.length)throw new Error("No color found for idx "+S);return this._config.colors.ansi[S]}_getBackgroundColor(S,x,A,T){if(this._config.allowTransparency)return u.NULL_COLOR;let B;switch(S){case 16777216:case 33554432:B=this._getColorFromAnsiIndex(x);break;case 50331648:const U=d.AttributeData.toColorRGB(x);B=u.rgba.toColor(U[0],U[1],U[2]);break;default:B=A?this._config.colors.foreground:this._config.colors.background}return T&&(B=u.color.blend(this._config.colors.background,u.color.multiplyOpacity(B,v.DIM_OPACITY))),B}_getForegroundColor(S,x,A,T,B,U,D,H,L,O){const I=this._getMinimumContrastColor(S,x,A,T,B,U,!1,L,O);if(I)return I;let P;switch(B){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&L&&U<8&&(U+=8),P=this._getColorFromAnsiIndex(U);break;case 50331648:const Q=d.AttributeData.toColorRGB(U);P=u.rgba.toColor(Q[0],Q[1],Q[2]);break;default:P=D?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(P=u.color.opaque(P)),H&&(P=u.color.multiplyOpacity(P,v.DIM_OPACITY)),P}_resolveBackgroundRgba(S,x,A){switch(S){case 16777216:case 33554432:return this._getColorFromAnsiIndex(x).rgba;case 50331648:return x<<8;default:return A?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(S,x,A,T){switch(S){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&T&&x<8&&(x+=8),this._getColorFromAnsiIndex(x).rgba;case 50331648:return x<<8;default:return A?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(S,x,A,T,B,U,D,H,L){if(this._config.minimumContrastRatio===1||L)return;const O=this._config.colors.contrastCache.getColor(S,T);if(O!==void 0)return O||void 0;const I=this._resolveBackgroundRgba(x,A,D),P=this._resolveForegroundRgba(B,U,D,H),Q=u.rgba.ensureContrastRatio(I,P,this._config.minimumContrastRatio);if(!Q)return void this._config.colors.contrastCache.setColor(S,T,null);const N=u.rgba.toColor(Q>>24&255,Q>>16&255,Q>>8&255);return this._config.colors.contrastCache.setColor(S,T,N),N}_drawToCache(S,x,A,T){const B=typeof S=="number"?String.fromCharCode(S):S,U=this._config.deviceCellWidth*Math.max(B.length,2)+4;this._tmpCanvas.width<U&&(this._tmpCanvas.width=U);const D=this._config.deviceCellHeight+8;if(this._tmpCanvas.height<D&&(this._tmpCanvas.height=D),this._tmpCtx.save(),this._workAttributeData.fg=A,this._workAttributeData.bg=x,this._workAttributeData.extended.ext=T,this._workAttributeData.isInvisible())return o;const H=!!this._workAttributeData.isBold(),L=!!this._workAttributeData.isInverse(),O=!!this._workAttributeData.isDim(),I=!!this._workAttributeData.isItalic(),P=!!this._workAttributeData.isUnderline(),Q=!!this._workAttributeData.isStrikethrough();let N=this._workAttributeData.getFgColor(),K=this._workAttributeData.getFgColorMode(),V=this._workAttributeData.getBgColor(),re=this._workAttributeData.getBgColorMode();if(L){const Ce=N;N=V,V=Ce;const Ae=K;K=re,re=Ae}const j=this._getBackgroundColor(re,V,L,O);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=j.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const z=H?this._config.fontWeightBold:this._config.fontWeight,W=I?"italic":"";this._tmpCtx.font=`${W} ${z} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=v.TEXT_BASELINE;const ee=B.length===1&&(0,m.isPowerlineGlyph)(B.charCodeAt(0)),se=B.length===1&&(0,m.isRestrictedPowerlineGlyph)(B.charCodeAt(0)),Se=this._getForegroundColor(x,re,V,A,K,N,L,O,H,(0,m.excludeFromContrastRatioDemands)(B.charCodeAt(0)));this._tmpCtx.fillStyle=Se.css;const ce=se?0:4;let ke=!1;this._config.customGlyphs!==!1&&(ke=(0,C.tryDrawCustomChar)(this._tmpCtx,B,ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let J,Ee=!ee;if(J=typeof S=="number"?this._unicodeService.wcwidth(S):this._unicodeService.getStringCellWidth(S),P){this._tmpCtx.save();const Ce=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Ae=Ce%2==1?.5:0;if(this._tmpCtx.lineWidth=Ce,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Ee=!1,this._tmpCtx.strokeStyle=`rgb(${d.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Ee=!1;let je=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&je<8&&(je+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(je).css}this._tmpCtx.beginPath();const Pe=ce,Ne=Math.ceil(ce+this._config.deviceCharHeight)-Ae,nt=ce+this._config.deviceCharHeight+Ce-Ae,Qe=Math.ceil(ce+this._config.deviceCharHeight+2*Ce)-Ae;for(let je=0;je<J;je++){this._tmpCtx.save();const Me=Pe+je*this._config.deviceCellWidth,Ve=Pe+(je+1)*this._config.deviceCellWidth,St=Me+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Me,Ne),this._tmpCtx.lineTo(Ve,Ne),this._tmpCtx.moveTo(Me,Qe),this._tmpCtx.lineTo(Ve,Qe);break;case 3:const ot=Ce<=1?Qe:Math.ceil(ce+this._config.deviceCharHeight-Ce/2)-Ae,dt=Ce<=1?Ne:Math.ceil(ce+this._config.deviceCharHeight+Ce/2)-Ae,Et=new Path2D;Et.rect(Me,Ne,this._config.deviceCellWidth,Qe-Ne),this._tmpCtx.clip(Et),this._tmpCtx.moveTo(Me-this._config.deviceCellWidth/2,nt),this._tmpCtx.bezierCurveTo(Me-this._config.deviceCellWidth/2,dt,Me,dt,Me,nt),this._tmpCtx.bezierCurveTo(Me,ot,St,ot,St,nt),this._tmpCtx.bezierCurveTo(St,dt,Ve,dt,Ve,nt),this._tmpCtx.bezierCurveTo(Ve,ot,Ve+this._config.deviceCellWidth/2,ot,Ve+this._config.deviceCellWidth/2,nt);break;case 4:this._tmpCtx.setLineDash([2*this._config.devicePixelRatio,this._config.devicePixelRatio]),this._tmpCtx.moveTo(Me,Ne),this._tmpCtx.lineTo(Ve,Ne);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Me,Ne),this._tmpCtx.lineTo(Ve,Ne);break;default:this._tmpCtx.moveTo(Me,Ne),this._tmpCtx.lineTo(Ve,Ne)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ke&&this._config.fontSize>=12&&!this._config.allowTransparency&&B!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const je=this._tmpCtx.measureText(B);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in je&&je.actualBoundingBoxDescent>0){this._tmpCtx.save();const Me=new Path2D;Me.rect(Pe,Ne-Math.ceil(Ce/2),this._config.deviceCellWidth,Qe-Ne+Math.ceil(Ce/2)),this._tmpCtx.clip(Me),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=j.css,this._tmpCtx.strokeText(B,ce,ce+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(ke||this._tmpCtx.fillText(B,ce,ce+this._config.deviceCharHeight),B==="_"&&!this._config.allowTransparency){let Ce=g(this._tmpCtx.getImageData(ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight),j,Se,Ee);if(Ce)for(let Ae=1;Ae<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=j.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(B,ce,ce+this._config.deviceCharHeight-Ae),Ce=g(this._tmpCtx.getImageData(ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight),j,Se,Ee),Ce);Ae++);}if(Q){const Ce=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),Ae=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=Ce,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ce,ce+Math.floor(this._config.deviceCharHeight/2)-Ae),this._tmpCtx.lineTo(ce+this._config.deviceCharWidth*J,ce+Math.floor(this._config.deviceCharHeight/2)-Ae),this._tmpCtx.stroke()}this._tmpCtx.restore();const de=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let st;if(st=this._config.allowTransparency?function(Ce){for(let Ae=0;Ae<Ce.data.length;Ae+=4)if(Ce.data[Ae+3]>0)return!1;return!0}(de):g(de,j,Se,Ee),st)return o;const Re=this._findGlyphBoundingBox(de,this._workBoundingBox,U,se,ke,ce);let te,xe;for(;;){if(this._activePages.length===0){const Ce=this._createNewPage();te=Ce,xe=Ce.currentRow,xe.height=Re.size.y;break}te=this._activePages[this._activePages.length-1],xe=te.currentRow;for(const Ce of this._activePages)Re.size.y<=Ce.currentRow.height&&(te=Ce,xe=Ce.currentRow);for(let Ce=this._activePages.length-1;Ce>=0;Ce--)for(const Ae of this._activePages[Ce].fixedRows)Ae.height<=xe.height&&Re.size.y<=Ae.height&&(te=this._activePages[Ce],xe=Ae);if(xe.y+Re.size.y>=te.canvas.height||xe.height>Re.size.y+2){let Ce=!1;if(te.currentRow.y+te.currentRow.height+Re.size.y>=te.canvas.height){let Ae;for(const Pe of this._activePages)if(Pe.currentRow.y+Pe.currentRow.height+Re.size.y<Pe.canvas.height){Ae=Pe;break}if(Ae)te=Ae;else{const Pe=this._createNewPage();te=Pe,xe=Pe.currentRow,xe.height=Re.size.y,Ce=!0}}Ce||(te.currentRow.height>0&&te.fixedRows.push(te.currentRow),xe={x:0,y:te.currentRow.y+te.currentRow.height,height:Re.size.y},te.fixedRows.push(xe),te.currentRow={x:0,y:xe.y+xe.height,height:0})}if(xe.x+Re.size.x<=te.canvas.width)break;xe===te.currentRow?(xe.x=0,xe.y+=xe.height,xe.height=0):te.fixedRows.splice(te.fixedRows.indexOf(xe),1)}return Re.texturePage=this._pages.indexOf(te),Re.texturePosition.x=xe.x,Re.texturePosition.y=xe.y,Re.texturePositionClipSpace.x=xe.x/te.canvas.width,Re.texturePositionClipSpace.y=xe.y/te.canvas.height,Re.sizeClipSpace.x/=te.canvas.width,Re.sizeClipSpace.y/=te.canvas.height,xe.height=Math.max(xe.height,Re.size.y),xe.x+=Re.size.x,te.ctx.putImageData(de,Re.texturePosition.x-this._workBoundingBox.left,Re.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,Re.size.x,Re.size.y),te.addGlyph(Re),te.version++,Re}_findGlyphBoundingBox(S,x,A,T,B,U){x.top=0;const D=T?this._config.deviceCellHeight:this._tmpCanvas.height,H=T?this._config.deviceCellWidth:A;let L=!1;for(let O=0;O<D;O++){for(let I=0;I<H;I++){const P=O*this._tmpCanvas.width*4+4*I+3;if(S.data[P]!==0){x.top=O,L=!0;break}}if(L)break}x.left=0,L=!1;for(let O=0;O<U+H;O++){for(let I=0;I<D;I++){const P=I*this._tmpCanvas.width*4+4*O+3;if(S.data[P]!==0){x.left=O,L=!0;break}}if(L)break}x.right=H,L=!1;for(let O=U+H-1;O>=U;O--){for(let I=0;I<D;I++){const P=I*this._tmpCanvas.width*4+4*O+3;if(S.data[P]!==0){x.right=O,L=!0;break}}if(L)break}x.bottom=D,L=!1;for(let O=D-1;O>=0;O--){for(let I=0;I<H;I++){const P=O*this._tmpCanvas.width*4+4*I+3;if(S.data[P]!==0){x.bottom=O,L=!0;break}}if(L)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:x.right-x.left+1,y:x.bottom-x.top+1},sizeClipSpace:{x:x.right-x.left+1,y:x.bottom-x.top+1},offset:{x:-x.left+U+(T||B?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-x.top+U+(T||B?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}c.TextureAtlas=n;class _{constructor(S,x,A){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],A)for(const T of A)this._glyphs.push(...T.glyphs),this._usedPixels+=T._usedPixels;this.canvas=w(S,x,x),this.ctx=(0,m.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(S){this._glyphs.push(S),this._usedPixels+=S.size.x*S.size.y}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(p,S,x,A){const T=S.rgba>>>24,B=S.rgba>>>16&255,U=S.rgba>>>8&255,D=x.rgba>>>24,H=x.rgba>>>16&255,L=x.rgba>>>8&255,O=Math.floor((Math.abs(T-D)+Math.abs(B-H)+Math.abs(U-L))/12);let I=!0;for(let P=0;P<p.data.length;P+=4)p.data[P]===T&&p.data[P+1]===B&&p.data[P+2]===U||A&&Math.abs(p.data[P]-T)+Math.abs(p.data[P+1]-B)+Math.abs(p.data[P+2]-U)<O?p.data[P+3]=0:I=!1;return I}function w(p,S,x){const A=p.createElement("canvas");return A.width=S,A.height=x,A}},577:function(q,c,y){var v=this&&this.__decorate||function(h,o,r,n){var _,g=arguments.length,w=g<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(h,o,r,n);else for(var p=h.length-1;p>=0;p--)(_=h[p])&&(w=(g<3?_(w):g>3?_(o,r,w):_(o,r))||w);return g>3&&w&&Object.defineProperty(o,r,w),w},f=this&&this.__param||function(h,o){return function(r,n){o(r,n,h)}};Object.defineProperty(c,"__esModule",{value:!0}),c.CharacterJoinerService=c.JoinedCellData=void 0;const d=y(147),u=y(855),C=y(782),m=y(97);class a extends d.AttributeData{constructor(o,r,n){super(),this.content=0,this.combinedData="",this.fg=o.fg,this.bg=o.bg,this.combinedData=r,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(o){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}c.JoinedCellData=a;let t=class Wr{constructor(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(o){const r={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(r),r.id}deregister(o){for(let r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===o)return this._characterJoiners.splice(r,1),!0;return!1}getJoinedCharacters(o){if(this._characterJoiners.length===0)return[];const r=this._bufferService.buffer.lines.get(o);if(!r||r.length===0)return[];const n=[],_=r.translateToString(!0);let g=0,w=0,p=0,S=r.getFg(0),x=r.getBg(0);for(let A=0;A<r.getTrimmedLength();A++)if(r.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==S||this._workCell.bg!==x){if(A-g>1){const T=this._getJoinedRanges(_,p,w,r,g);for(let B=0;B<T.length;B++)n.push(T[B])}g=A,p=w,S=this._workCell.fg,x=this._workCell.bg}w+=this._workCell.getChars().length||u.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-g>1){const A=this._getJoinedRanges(_,p,w,r,g);for(let T=0;T<A.length;T++)n.push(A[T])}return n}_getJoinedRanges(o,r,n,_,g){const w=o.substring(r,n);let p=[];try{p=this._characterJoiners[0].handler(w)}catch(S){console.error(S)}for(let S=1;S<this._characterJoiners.length;S++)try{const x=this._characterJoiners[S].handler(w);for(let A=0;A<x.length;A++)Wr._mergeRanges(p,x[A])}catch(x){console.error(x)}return this._stringRangesToCellRanges(p,_,g),p}_stringRangesToCellRanges(o,r,n){let _=0,g=!1,w=0,p=o[_];if(p){for(let S=n;S<this._bufferService.cols;S++){const x=r.getWidth(S),A=r.getString(S).length||u.WHITESPACE_CELL_CHAR.length;if(x!==0){if(!g&&p[0]<=w&&(p[0]=S,g=!0),p[1]<=w){if(p[1]=S,p=o[++_],!p)break;p[0]<=w?(p[0]=S,g=!0):g=!1}w+=A}}p&&(p[1]=this._bufferService.cols)}}static _mergeRanges(o,r){let n=!1;for(let _=0;_<o.length;_++){const g=o[_];if(n){if(r[1]<=g[0])return o[_-1][1]=r[1],o;if(r[1]<=g[1])return o[_-1][1]=Math.max(r[1],g[1]),o.splice(_,1),o;o.splice(_,1),_--}else{if(r[1]<=g[0])return o.splice(_,0,r),o;if(r[1]<=g[1])return g[0]=Math.min(r[0],g[0]),o;r[0]<g[1]&&(g[0]=Math.min(r[0],g[0]),n=!0)}}return n?o[o.length-1][1]=r[1]:o.push(r),o}};t=v([f(0,m.IBufferService)],t),c.CharacterJoinerService=t},160:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.contrastRatio=c.toPaddedHex=c.rgba=c.rgb=c.css=c.color=c.channels=c.NULL_COLOR=void 0;const v=y(399);let f=0,d=0,u=0,C=0;var m,a,t;function h(r){const n=r.toString(16);return n.length<2?"0"+n:n}function o(r,n){return r<n?(n+.05)/(r+.05):(r+.05)/(n+.05)}c.NULL_COLOR={css:"#00000000",rgba:0},function(r){r.toCss=function(n,_,g,w){return w!==void 0?`#${h(n)}${h(_)}${h(g)}${h(w)}`:`#${h(n)}${h(_)}${h(g)}`},r.toRgba=function(n,_,g,w=255){return(n<<24|_<<16|g<<8|w)>>>0}}(m=c.channels||(c.channels={})),function(r){function n(_,g){return C=Math.round(255*g),[f,d,u]=t.toChannels(_.rgba),{css:m.toCss(f,d,u,C),rgba:m.toRgba(f,d,u,C)}}r.blend=function(_,g){if(C=(255&g.rgba)/255,C===1)return{css:g.css,rgba:g.rgba};const w=g.rgba>>24&255,p=g.rgba>>16&255,S=g.rgba>>8&255,x=_.rgba>>24&255,A=_.rgba>>16&255,T=_.rgba>>8&255;return f=x+Math.round((w-x)*C),d=A+Math.round((p-A)*C),u=T+Math.round((S-T)*C),{css:m.toCss(f,d,u),rgba:m.toRgba(f,d,u)}},r.isOpaque=function(_){return(255&_.rgba)==255},r.ensureContrastRatio=function(_,g,w){const p=t.ensureContrastRatio(_.rgba,g.rgba,w);if(p)return t.toColor(p>>24&255,p>>16&255,p>>8&255)},r.opaque=function(_){const g=(255|_.rgba)>>>0;return[f,d,u]=t.toChannels(g),{css:m.toCss(f,d,u),rgba:g}},r.opacity=n,r.multiplyOpacity=function(_,g){return C=255&_.rgba,n(_,C*g/255)},r.toColorRGB=function(_){return[_.rgba>>24&255,_.rgba>>16&255,_.rgba>>8&255]}}(c.color||(c.color={})),function(r){let n,_;if(!v.isNode){const g=document.createElement("canvas");g.width=1,g.height=1;const w=g.getContext("2d",{willReadFrequently:!0});w&&(n=w,n.globalCompositeOperation="copy",_=n.createLinearGradient(0,0,1,1))}r.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return f=parseInt(g.slice(1,2).repeat(2),16),d=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),t.toColor(f,d,u);case 5:return f=parseInt(g.slice(1,2).repeat(2),16),d=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),C=parseInt(g.slice(4,5).repeat(2),16),t.toColor(f,d,u,C);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}const w=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return f=parseInt(w[1]),d=parseInt(w[2]),u=parseInt(w[3]),C=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),t.toColor(f,d,u,C);if(!n||!_)throw new Error("css.toColor: Unsupported css format");if(n.fillStyle=_,n.fillStyle=g,typeof n.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(n.fillRect(0,0,1,1),[f,d,u,C]=n.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(f,d,u,C),css:g}}}(c.css||(c.css={})),function(r){function n(_,g,w){const p=_/255,S=g/255,x=w/255;return .2126*(p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4))+.7152*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.0722*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))}r.relativeLuminance=function(_){return n(_>>16&255,_>>8&255,255&_)},r.relativeLuminance2=n}(a=c.rgb||(c.rgb={})),function(r){function n(g,w,p){const S=g>>24&255,x=g>>16&255,A=g>>8&255;let T=w>>24&255,B=w>>16&255,U=w>>8&255,D=o(a.relativeLuminance2(T,B,U),a.relativeLuminance2(S,x,A));for(;D<p&&(T>0||B>0||U>0);)T-=Math.max(0,Math.ceil(.1*T)),B-=Math.max(0,Math.ceil(.1*B)),U-=Math.max(0,Math.ceil(.1*U)),D=o(a.relativeLuminance2(T,B,U),a.relativeLuminance2(S,x,A));return(T<<24|B<<16|U<<8|255)>>>0}function _(g,w,p){const S=g>>24&255,x=g>>16&255,A=g>>8&255;let T=w>>24&255,B=w>>16&255,U=w>>8&255,D=o(a.relativeLuminance2(T,B,U),a.relativeLuminance2(S,x,A));for(;D<p&&(T<255||B<255||U<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),B=Math.min(255,B+Math.ceil(.1*(255-B))),U=Math.min(255,U+Math.ceil(.1*(255-U))),D=o(a.relativeLuminance2(T,B,U),a.relativeLuminance2(S,x,A));return(T<<24|B<<16|U<<8|255)>>>0}r.ensureContrastRatio=function(g,w,p){const S=a.relativeLuminance(g>>8),x=a.relativeLuminance(w>>8);if(o(S,x)<p){if(x<S){const B=n(g,w,p),U=o(S,a.relativeLuminance(B>>8));if(U<p){const D=_(g,w,p);return U>o(S,a.relativeLuminance(D>>8))?B:D}return B}const A=_(g,w,p),T=o(S,a.relativeLuminance(A>>8));if(T<p){const B=n(g,w,p);return T>o(S,a.relativeLuminance(B>>8))?A:B}return A}},r.reduceLuminance=n,r.increaseLuminance=_,r.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},r.toColor=function(g,w,p,S){return{css:m.toCss(g,w,p,S),rgba:m.toRgba(g,w,p,S)}}}(t=c.rgba||(c.rgba={})),c.toPaddedHex=h,c.contrastRatio=o},345:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.forwardEvent=c.EventEmitter=void 0,c.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=y=>(this._listeners.push(y),{dispose:()=>{if(!this._disposed){for(let v=0;v<this._listeners.length;v++)if(this._listeners[v]===y)return void this._listeners.splice(v,1)}}})),this._event}fire(y,v){const f=[];for(let d=0;d<this._listeners.length;d++)f.push(this._listeners[d]);for(let d=0;d<f.length;d++)f[d].call(void 0,y,v)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},c.forwardEvent=function(y,v){return y(f=>v.fire(f))}},859:(q,c)=>{function y(v){for(const f of v)f.dispose();v.length=0}Object.defineProperty(c,"__esModule",{value:!0}),c.getDisposeArrayDisposable=c.disposeArray=c.toDisposable=c.Disposable=void 0,c.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const v of this._disposables)v.dispose();this._disposables.length=0}register(v){return this._disposables.push(v),v}unregister(v){const f=this._disposables.indexOf(v);f!==-1&&this._disposables.splice(f,1)}},c.toDisposable=function(v){return{dispose:v}},c.disposeArray=y,c.getDisposeArrayDisposable=function(v){return{dispose:()=>y(v)}}},485:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.FourKeyMap=c.TwoKeyMap=void 0;class y{constructor(){this._data={}}set(f,d,u){this._data[f]||(this._data[f]={}),this._data[f][d]=u}get(f,d){return this._data[f]?this._data[f][d]:void 0}clear(){this._data={}}}c.TwoKeyMap=y,c.FourKeyMap=class{constructor(){this._data=new y}set(v,f,d,u,C){this._data.get(v,f)||this._data.set(v,f,new y),this._data.get(v,f).set(d,u,C)}get(v,f,d,u){var C;return(C=this._data.get(v,f))===null||C===void 0?void 0:C.get(d,u)}clear(){this._data.clear()}}},399:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.isChromeOS=c.isLinux=c.isWindows=c.isIphone=c.isIpad=c.isMac=c.getSafariVersion=c.isSafari=c.isLegacyEdge=c.isFirefox=c.isNode=void 0,c.isNode=typeof navigator>"u";const y=c.isNode?"node":navigator.userAgent,v=c.isNode?"node":navigator.platform;c.isFirefox=y.includes("Firefox"),c.isLegacyEdge=y.includes("Edge"),c.isSafari=/^((?!chrome|android).)*safari/i.test(y),c.getSafariVersion=function(){if(!c.isSafari)return 0;const f=y.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},c.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(v),c.isIpad=v==="iPad",c.isIphone=v==="iPhone",c.isWindows=["Windows","Win16","Win32","WinCE"].includes(v),c.isLinux=v.indexOf("Linux")>=0,c.isChromeOS=/\bCrOS\b/.test(y)},385:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DebouncedIdleTask=c.IdleTaskQueue=c.PriorityTaskQueue=void 0;const v=y(399);class f{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let m=0,a=0,t=C.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(m=Date.now(),this._tasks[this._i]()||this._i++,m=Math.max(1,Date.now()-m),a=Math.max(m,a),h=C.timeRemaining(),1.5*a>h)return t-m<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(t-m))}ms`),void this._start();t=h}this.clear()}}class d extends f{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const m=Date.now()+C;return{timeRemaining:()=>Math.max(0,m-Date.now())}}}c.PriorityTaskQueue=d,c.IdleTaskQueue=!v.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(u){return requestIdleCallback(u)}_cancelCallback(u){cancelIdleCallback(u)}}:d,c.DebouncedIdleTask=class{constructor(){this._queue=new c.IdleTaskQueue}set(u){this._queue.clear(),this._queue.enqueue(u)}flush(){this._queue.flush()}}},147:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ExtendedAttrs=c.AttributeData=void 0;class y{constructor(){this.fg=0,this.bg=0,this.extended=new v}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new y;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}c.AttributeData=y;class v{constructor(d=0,u=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=u}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}clone(){return new v(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}c.ExtendedAttrs=v},782:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CellData=void 0;const v=y(133),f=y(855),d=y(147);class u extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(m){const a=new u;return a.setFromCharData(m),a}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,v.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(m){this.fg=m[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let a=!1;if(m[f.CHAR_DATA_CHAR_INDEX].length>2)a=!0;else if(m[f.CHAR_DATA_CHAR_INDEX].length===2){const t=m[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){const h=m[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(t-55296)+h-56320+65536|m[f.CHAR_DATA_WIDTH_INDEX]<<22:a=!0}else a=!0}else this.content=m[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|m[f.CHAR_DATA_WIDTH_INDEX]<<22;a&&(this.combinedData=m[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|m[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}c.CellData=u},855:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WHITESPACE_CELL_CODE=c.WHITESPACE_CELL_WIDTH=c.WHITESPACE_CELL_CHAR=c.NULL_CELL_CODE=c.NULL_CELL_WIDTH=c.NULL_CELL_CHAR=c.CHAR_DATA_CODE_INDEX=c.CHAR_DATA_WIDTH_INDEX=c.CHAR_DATA_CHAR_INDEX=c.CHAR_DATA_ATTR_INDEX=c.DEFAULT_EXT=c.DEFAULT_ATTR=c.DEFAULT_COLOR=void 0,c.DEFAULT_COLOR=0,c.DEFAULT_ATTR=256|c.DEFAULT_COLOR<<9,c.DEFAULT_EXT=0,c.CHAR_DATA_ATTR_INDEX=0,c.CHAR_DATA_CHAR_INDEX=1,c.CHAR_DATA_WIDTH_INDEX=2,c.CHAR_DATA_CODE_INDEX=3,c.NULL_CELL_CHAR="",c.NULL_CELL_WIDTH=1,c.NULL_CELL_CODE=0,c.WHITESPACE_CELL_CHAR=" ",c.WHITESPACE_CELL_WIDTH=1,c.WHITESPACE_CELL_CODE=32},133:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Utf8ToUtf32=c.StringToUtf32=c.utf32ToString=c.stringFromCodePoint=void 0,c.stringFromCodePoint=function(y){return y>65535?(y-=65536,String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):String.fromCharCode(y)},c.utf32ToString=function(y,v=0,f=y.length){let d="";for(let u=v;u<f;++u){let C=y[u];C>65535?(C-=65536,d+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):d+=String.fromCharCode(C)}return d},c.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(y,v){const f=y.length;if(!f)return 0;let d=0,u=0;if(this._interim){const C=y.charCodeAt(u++);56320<=C&&C<=57343?v[d++]=1024*(this._interim-55296)+C-56320+65536:(v[d++]=this._interim,v[d++]=C),this._interim=0}for(let C=u;C<f;++C){const m=y.charCodeAt(C);if(55296<=m&&m<=56319){if(++C>=f)return this._interim=m,d;const a=y.charCodeAt(C);56320<=a&&a<=57343?v[d++]=1024*(m-55296)+a-56320+65536:(v[d++]=m,v[d++]=a)}else m!==65279&&(v[d++]=m)}return d}},c.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(y,v){const f=y.length;if(!f)return 0;let d,u,C,m,a=0,t=0,h=0;if(this.interim[0]){let n=!1,_=this.interim[0];_&=(224&_)==192?31:(240&_)==224?15:7;let g,w=0;for(;(g=63&this.interim[++w])&&w<4;)_<<=6,_|=g;const p=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,S=p-w;for(;h<S;){if(h>=f)return 0;if(g=y[h++],(192&g)!=128){h--,n=!0;break}this.interim[w++]=g,_<<=6,_|=63&g}n||(p===2?_<128?h--:v[a++]=_:p===3?_<2048||_>=55296&&_<=57343||_===65279||(v[a++]=_):_<65536||_>1114111||(v[a++]=_)),this.interim.fill(0)}const o=f-4;let r=h;for(;r<f;){for(;!(!(r<o)||128&(d=y[r])||128&(u=y[r+1])||128&(C=y[r+2])||128&(m=y[r+3]));)v[a++]=d,v[a++]=u,v[a++]=C,v[a++]=m,r+=4;if(d=y[r++],d<128)v[a++]=d;else if((224&d)==192){if(r>=f)return this.interim[0]=d,a;if(u=y[r++],(192&u)!=128){r--;continue}if(t=(31&d)<<6|63&u,t<128){r--;continue}v[a++]=t}else if((240&d)==224){if(r>=f)return this.interim[0]=d,a;if(u=y[r++],(192&u)!=128){r--;continue}if(r>=f)return this.interim[0]=d,this.interim[1]=u,a;if(C=y[r++],(192&C)!=128){r--;continue}if(t=(15&d)<<12|(63&u)<<6|63&C,t<2048||t>=55296&&t<=57343||t===65279)continue;v[a++]=t}else if((248&d)==240){if(r>=f)return this.interim[0]=d,a;if(u=y[r++],(192&u)!=128){r--;continue}if(r>=f)return this.interim[0]=d,this.interim[1]=u,a;if(C=y[r++],(192&C)!=128){r--;continue}if(r>=f)return this.interim[0]=d,this.interim[1]=u,this.interim[2]=C,a;if(m=y[r++],(192&m)!=128){r--;continue}if(t=(7&d)<<18|(63&u)<<12|(63&C)<<6|63&m,t<65536||t>1114111)continue;v[a++]=t}}return a}}},726:(q,c)=>{function y(v,f,d){f.di$target===f?f.di$dependencies.push({id:v,index:d}):(f.di$dependencies=[{id:v,index:d}],f.di$target=f)}Object.defineProperty(c,"__esModule",{value:!0}),c.createDecorator=c.getServiceDependencies=c.serviceRegistry=void 0,c.serviceRegistry=new Map,c.getServiceDependencies=function(v){return v.di$dependencies||[]},c.createDecorator=function(v){if(c.serviceRegistry.has(v))return c.serviceRegistry.get(v);const f=function(d,u,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");y(f,d,C)};return f.toString=()=>v,c.serviceRegistry.set(v,f),f}},97:(q,c,y)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.IDecorationService=c.IUnicodeService=c.IOscLinkService=c.IOptionsService=c.ILogService=c.LogLevelEnum=c.IInstantiationService=c.ICharsetService=c.ICoreService=c.ICoreMouseService=c.IBufferService=void 0;const v=y(726);var f;c.IBufferService=(0,v.createDecorator)("BufferService"),c.ICoreMouseService=(0,v.createDecorator)("CoreMouseService"),c.ICoreService=(0,v.createDecorator)("CoreService"),c.ICharsetService=(0,v.createDecorator)("CharsetService"),c.IInstantiationService=(0,v.createDecorator)("InstantiationService"),(f=c.LogLevelEnum||(c.LogLevelEnum={}))[f.DEBUG=0]="DEBUG",f[f.INFO=1]="INFO",f[f.WARN=2]="WARN",f[f.ERROR=3]="ERROR",f[f.OFF=4]="OFF",c.ILogService=(0,v.createDecorator)("LogService"),c.IOptionsService=(0,v.createDecorator)("OptionsService"),c.IOscLinkService=(0,v.createDecorator)("OscLinkService"),c.IUnicodeService=(0,v.createDecorator)("UnicodeService"),c.IDecorationService=(0,v.createDecorator)("DecorationService")}},le={};function fe(q){var c=le[q];if(c!==void 0)return c.exports;var y=le[q]={exports:{}};return ie[q].call(y.exports,y,y.exports,fe),y.exports}var pe={};return(()=>{var q=pe;Object.defineProperty(q,"__esModule",{value:!0}),q.CanvasAddon=void 0;const c=fe(949),y=fe(345),v=fe(859);class f extends v.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new y.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new y.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){var u;return(u=this._renderer)===null||u===void 0?void 0:u.textureAtlas}activate(u){const C=u._core;if(!u.element)return void this.register(C.onWillOpen(()=>this.activate(u)));this._terminal=u;const m=C.coreService,a=C.optionsService,t=C.screenElement,h=C.linkifier2,o=C,r=o._bufferService,n=o._renderService,_=o._characterJoinerService,g=o._charSizeService,w=o._coreBrowserService,p=o._decorationService,S=o._themeService;this._renderer=new c.CanvasRenderer(u,t,h,r,g,a,_,m,w,p,S),this.register((0,y.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,y.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),n.setRenderer(this._renderer),n.handleResize(r.cols,r.rows),this.register((0,v.toDisposable)(()=>{var x;n.setRenderer(this._terminal._core._createRenderer()),n.handleResize(u.cols,u.rows),(x=this._renderer)===null||x===void 0||x.dispose(),this._renderer=void 0}))}}q.CanvasAddon=f})(),pe})()})})(Nr);var Gr={exports:{}};(function(Y,G){(function(ie,le){Y.exports=le()})(self,function(){return(()=>{var ie={};return(()=>{var le=ie;Object.defineProperty(le,"__esModule",{value:!0}),le.FitAddon=void 0,le.FitAddon=class{constructor(){}activate(fe){this._terminal=fe}dispose(){}fit(){const fe=this.proposeDimensions();if(!fe||!this._terminal||isNaN(fe.cols)||isNaN(fe.rows))return;const pe=this._terminal._core;this._terminal.rows===fe.rows&&this._terminal.cols===fe.cols||(pe._renderService.clear(),this._terminal.resize(fe.cols,fe.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const fe=this._terminal._core,pe=fe._renderService.dimensions;if(pe.css.cell.width===0||pe.css.cell.height===0)return;const q=this._terminal.options.scrollback===0?0:fe.viewport.scrollBarWidth,c=window.getComputedStyle(this._terminal.element.parentElement),y=parseInt(c.getPropertyValue("height")),v=Math.max(0,parseInt(c.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),d=y-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),u=v-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-q;return{cols:Math.max(2,Math.floor(u/pe.css.cell.width)),rows:Math.max(1,Math.floor(d/pe.css.cell.height))}}}})(),ie})()})})(Gr);var fi={exports:{}};const Qs={},en=Object.freeze(Object.defineProperty({__proto__:null,default:Qs},Symbol.toStringTag,{value:"Module"})),$t=Ys(en);var qt={},Vt={},Kt,gr;function jr(){return gr||(gr=1,Kt=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var G={},ie=Symbol("test"),le=Object(ie);if(typeof ie=="string"||Object.prototype.toString.call(ie)!=="[object Symbol]"||Object.prototype.toString.call(le)!=="[object Symbol]")return!1;var fe=42;G[ie]=fe;for(ie in G)return!1;if(typeof Object.keys=="function"&&Object.keys(G).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(G).length!==0)return!1;var pe=Object.getOwnPropertySymbols(G);if(pe.length!==1||pe[0]!==ie||!Object.prototype.propertyIsEnumerable.call(G,ie))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var q=Object.getOwnPropertyDescriptor(G,ie);if(q.value!==fe||q.enumerable!==!0)return!1}return!0}),Kt}var Xt,vr;function Ot(){if(vr)return Xt;vr=1;var Y=jr();return Xt=function(){return Y()&&!!Symbol.toStringTag},Xt}var Yt,mr;function tn(){if(mr)return Yt;mr=1;var Y=typeof Symbol<"u"&&Symbol,G=jr();return Yt=function(){return typeof Y!="function"||typeof Symbol!="function"||typeof Y("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:G()},Yt}var Zt,yr;function rn(){if(yr)return Zt;yr=1;var Y="Function.prototype.bind called on incompatible ",G=Array.prototype.slice,ie=Object.prototype.toString,le="[object Function]";return Zt=function(pe){var q=this;if(typeof q!="function"||ie.call(q)!==le)throw new TypeError(Y+q);for(var c=G.call(arguments,1),y,v=function(){if(this instanceof y){var m=q.apply(this,c.concat(G.call(arguments)));return Object(m)===m?m:this}else return q.apply(pe,c.concat(G.call(arguments)))},f=Math.max(0,q.length-c.length),d=[],u=0;u<f;u++)d.push("$"+u);if(y=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(v),q.prototype){var C=function(){};C.prototype=q.prototype,y.prototype=new C,C.prototype=null}return y},Zt}var Jt,Sr;function _i(){if(Sr)return Jt;Sr=1;var Y=rn();return Jt=Function.prototype.bind||Y,Jt}var Qt,br;function sn(){if(br)return Qt;br=1;var Y=_i();return Qt=Y.call(Function.call,Object.prototype.hasOwnProperty),Qt}var ei,Cr;function gi(){if(Cr)return ei;Cr=1;var Y,G=SyntaxError,ie=Function,le=TypeError,fe=function(A){try{return ie('"use strict"; return ('+A+").constructor;")()}catch{}},pe=Object.getOwnPropertyDescriptor;if(pe)try{pe({},"")}catch{pe=null}var q=function(){throw new le},c=pe?function(){try{return arguments.callee,q}catch{try{return pe(arguments,"callee").get}catch{return q}}}():q,y=tn()(),v=Object.getPrototypeOf||function(A){return A.__proto__},f={},d=typeof Uint8Array>"u"?Y:v(Uint8Array),u={"%AggregateError%":typeof AggregateError>"u"?Y:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Y:ArrayBuffer,"%ArrayIteratorPrototype%":y?v([][Symbol.iterator]()):Y,"%AsyncFromSyncIteratorPrototype%":Y,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":typeof Atomics>"u"?Y:Atomics,"%BigInt%":typeof BigInt>"u"?Y:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Y:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Y:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Y:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Y:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Y:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Y:FinalizationRegistry,"%Function%":ie,"%GeneratorFunction%":f,"%Int8Array%":typeof Int8Array>"u"?Y:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Y:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Y:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y?v(v([][Symbol.iterator]())):Y,"%JSON%":typeof JSON=="object"?JSON:Y,"%Map%":typeof Map>"u"?Y:Map,"%MapIteratorPrototype%":typeof Map>"u"||!y?Y:v(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Y:Promise,"%Proxy%":typeof Proxy>"u"?Y:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Y:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Y:Set,"%SetIteratorPrototype%":typeof Set>"u"||!y?Y:v(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Y:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y?v(""[Symbol.iterator]()):Y,"%Symbol%":y?Symbol:Y,"%SyntaxError%":G,"%ThrowTypeError%":c,"%TypedArray%":d,"%TypeError%":le,"%Uint8Array%":typeof Uint8Array>"u"?Y:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Y:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Y:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Y:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Y:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Y:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Y:WeakSet};try{null.error}catch(A){var C=v(v(A));u["%Error.prototype%"]=C}var m=function A(T){var B;if(T==="%AsyncFunction%")B=fe("async function () {}");else if(T==="%GeneratorFunction%")B=fe("function* () {}");else if(T==="%AsyncGeneratorFunction%")B=fe("async function* () {}");else if(T==="%AsyncGenerator%"){var U=A("%AsyncGeneratorFunction%");U&&(B=U.prototype)}else if(T==="%AsyncIteratorPrototype%"){var D=A("%AsyncGenerator%");D&&(B=v(D.prototype))}return u[T]=B,B},a={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},t=_i(),h=sn(),o=t.call(Function.call,Array.prototype.concat),r=t.call(Function.apply,Array.prototype.splice),n=t.call(Function.call,String.prototype.replace),_=t.call(Function.call,String.prototype.slice),g=t.call(Function.call,RegExp.prototype.exec),w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,p=/\\(\\)?/g,S=function(T){var B=_(T,0,1),U=_(T,-1);if(B==="%"&&U!=="%")throw new G("invalid intrinsic syntax, expected closing `%`");if(U==="%"&&B!=="%")throw new G("invalid intrinsic syntax, expected opening `%`");var D=[];return n(T,w,function(H,L,O,I){D[D.length]=O?n(I,p,"$1"):L||H}),D},x=function(T,B){var U=T,D;if(h(a,U)&&(D=a[U],U="%"+D[0]+"%"),h(u,U)){var H=u[U];if(H===f&&(H=m(U)),typeof H>"u"&&!B)throw new le("intrinsic "+T+" exists, but is not available. Please file an issue!");return{alias:D,name:U,value:H}}throw new G("intrinsic "+T+" does not exist!")};return ei=function(T,B){if(typeof T!="string"||T.length===0)throw new le("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof B!="boolean")throw new le('"allowMissing" argument must be a boolean');if(g(/^%?[^%]*%?$/,T)===null)throw new G("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var U=S(T),D=U.length>0?U[0]:"",H=x("%"+D+"%",B),L=H.name,O=H.value,I=!1,P=H.alias;P&&(D=P[0],r(U,o([0,1],P)));for(var Q=1,N=!0;Q<U.length;Q+=1){var K=U[Q],V=_(K,0,1),re=_(K,-1);if((V==='"'||V==="'"||V==="`"||re==='"'||re==="'"||re==="`")&&V!==re)throw new G("property names with quotes must have matching quotes");if((K==="constructor"||!N)&&(I=!0),D+="."+K,L="%"+D+"%",h(u,L))O=u[L];else if(O!=null){if(!(K in O)){if(!B)throw new le("base intrinsic for "+T+" exists, but the property is not available.");return}if(pe&&Q+1>=U.length){var j=pe(O,K);N=!!j,N&&"get"in j&&!("originalValue"in j.get)?O=j.get:O=O[K]}else N=h(O,K),O=O[K];N&&!I&&(u[L]=O)}}return O},ei}var ti={exports:{}},wr;function nn(){return wr||(wr=1,function(Y){var G=_i(),ie=gi(),le=ie("%Function.prototype.apply%"),fe=ie("%Function.prototype.call%"),pe=ie("%Reflect.apply%",!0)||G.call(fe,le),q=ie("%Object.getOwnPropertyDescriptor%",!0),c=ie("%Object.defineProperty%",!0),y=ie("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}Y.exports=function(d){var u=pe(G,fe,arguments);if(q&&c){var C=q(u,"length");C.configurable&&c(u,"length",{value:1+y(0,d.length-(arguments.length-1))})}return u};var v=function(){return pe(G,le,arguments)};c?c(Y.exports,"apply",{value:v}):Y.exports.apply=v}(ti)),ti.exports}var ii,xr;function vi(){if(xr)return ii;xr=1;var Y=gi(),G=nn(),ie=G(Y("String.prototype.indexOf"));return ii=function(fe,pe){var q=Y(fe,!!pe);return typeof q=="function"&&ie(fe,".prototype.")>-1?G(q):q},ii}var ri,Er;function on(){if(Er)return ri;Er=1;var Y=Ot()(),G=vi(),ie=G("Object.prototype.toString"),le=function(c){return Y&&c&&typeof c=="object"&&Symbol.toStringTag in c?!1:ie(c)==="[object Arguments]"},fe=function(c){return le(c)?!0:c!==null&&typeof c=="object"&&typeof c.length=="number"&&c.length>=0&&ie(c)!=="[object Array]"&&ie(c.callee)==="[object Function]"},pe=function(){return le(arguments)}();return le.isLegacyArguments=fe,ri=pe?le:fe,ri}var si,Lr;function an(){if(Lr)return si;Lr=1;var Y=Object.prototype.toString,G=Function.prototype.toString,ie=/^\s*(?:function)?\*/,le=Ot()(),fe=Object.getPrototypeOf,pe=function(){if(!le)return!1;try{return Function("return function*() {}")()}catch{}},q;return si=function(y){if(typeof y!="function")return!1;if(ie.test(G.call(y)))return!0;if(!le){var v=Y.call(y);return v==="[object GeneratorFunction]"}if(!fe)return!1;if(typeof q>"u"){var f=pe();q=f?fe(f):!1}return fe(y)===q},si}var ni,kr;function ln(){if(kr)return ni;kr=1;var Y=Function.prototype.toString,G=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,ie,le;if(typeof G=="function"&&typeof Object.defineProperty=="function")try{ie=Object.defineProperty({},"length",{get:function(){throw le}}),le={},G(function(){throw 42},null,ie)}catch(o){o!==le&&(G=null)}else G=null;var fe=/^\s*class\b/,pe=function(r){try{var n=Y.call(r);return fe.test(n)}catch{return!1}},q=function(r){try{return pe(r)?!1:(Y.call(r),!0)}catch{return!1}},c=Object.prototype.toString,y="[object Object]",v="[object Function]",f="[object GeneratorFunction]",d="[object HTMLAllCollection]",u="[object HTML document.all class]",C="[object HTMLCollection]",m=typeof Symbol=="function"&&!!Symbol.toStringTag,a=!(0 in[,]),t=function(){return!1};if(typeof document=="object"){var h=document.all;c.call(h)===c.call(document.all)&&(t=function(r){if((a||!r)&&(typeof r>"u"||typeof r=="object"))try{var n=c.call(r);return(n===d||n===u||n===C||n===y)&&r("")==null}catch{}return!1})}return ni=G?function(r){if(t(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;try{G(r,null,ie)}catch(n){if(n!==le)return!1}return!pe(r)&&q(r)}:function(r){if(t(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;if(m)return q(r);if(pe(r))return!1;var n=c.call(r);return n!==v&&n!==f&&!/^\[object HTML/.test(n)?!1:q(r)},ni}var oi,Rr;function zr(){if(Rr)return oi;Rr=1;var Y=ln(),G=Object.prototype.toString,ie=Object.prototype.hasOwnProperty,le=function(y,v,f){for(var d=0,u=y.length;d<u;d++)ie.call(y,d)&&(f==null?v(y[d],d,y):v.call(f,y[d],d,y))},fe=function(y,v,f){for(var d=0,u=y.length;d<u;d++)f==null?v(y.charAt(d),d,y):v.call(f,y.charAt(d),d,y)},pe=function(y,v,f){for(var d in y)ie.call(y,d)&&(f==null?v(y[d],d,y):v.call(f,y[d],d,y))},q=function(y,v,f){if(!Y(v))throw new TypeError("iterator must be a function");var d;arguments.length>=3&&(d=f),G.call(y)==="[object Array]"?le(y,v,d):typeof y=="string"?fe(y,v,d):pe(y,v,d)};return oi=q,oi}var ai,Ar;function $r(){if(Ar)return ai;Ar=1;var Y=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],G=typeof globalThis>"u"?pi:globalThis;return ai=function(){for(var le=[],fe=0;fe<Y.length;fe++)typeof G[Y[fe]]=="function"&&(le[le.length]=Y[fe]);return le},ai}var li,Tr;function qr(){if(Tr)return li;Tr=1;var Y=gi(),G=Y("%Object.getOwnPropertyDescriptor%",!0);if(G)try{G([],"length")}catch{G=null}return li=G,li}var ci,Dr;function Vr(){if(Dr)return ci;Dr=1;var Y=zr(),G=$r(),ie=vi(),le=ie("Object.prototype.toString"),fe=Ot()(),pe=qr(),q=typeof globalThis>"u"?pi:globalThis,c=G(),y=ie("Array.prototype.indexOf",!0)||function(m,a){for(var t=0;t<m.length;t+=1)if(m[t]===a)return t;return-1},v=ie("String.prototype.slice"),f={},d=Object.getPrototypeOf;fe&&pe&&d&&Y(c,function(C){var m=new q[C];if(Symbol.toStringTag in m){var a=d(m),t=pe(a,Symbol.toStringTag);if(!t){var h=d(a);t=pe(h,Symbol.toStringTag)}f[C]=t.get}});var u=function(m){var a=!1;return Y(f,function(t,h){if(!a)try{a=t.call(m)===h}catch{}}),a};return ci=function(m){if(!m||typeof m!="object")return!1;if(!fe||!(Symbol.toStringTag in m)){var a=v(le(m),8,-1);return y(c,a)>-1}return pe?u(m):!1},ci}var hi,Mr;function cn(){if(Mr)return hi;Mr=1;var Y=zr(),G=$r(),ie=vi(),le=qr(),fe=ie("Object.prototype.toString"),pe=Ot()(),q=typeof globalThis>"u"?pi:globalThis,c=G(),y=ie("String.prototype.slice"),v={},f=Object.getPrototypeOf;pe&&le&&f&&Y(c,function(C){if(typeof q[C]=="function"){var m=new q[C];if(Symbol.toStringTag in m){var a=f(m),t=le(a,Symbol.toStringTag);if(!t){var h=f(a);t=le(h,Symbol.toStringTag)}v[C]=t.get}}});var d=function(m){var a=!1;return Y(v,function(t,h){if(!a)try{var o=t.call(m);o===h&&(a=o)}catch{}}),a},u=Vr();return hi=function(m){return u(m)?!pe||!(Symbol.toStringTag in m)?y(fe(m),8,-1):d(m):!1},hi}var Br;function hn(){return Br||(Br=1,function(Y){var G=on(),ie=an(),le=cn(),fe=Vr();function pe(te){return te.call.bind(te)}var q=typeof BigInt<"u",c=typeof Symbol<"u",y=pe(Object.prototype.toString),v=pe(Number.prototype.valueOf),f=pe(String.prototype.valueOf),d=pe(Boolean.prototype.valueOf);if(q)var u=pe(BigInt.prototype.valueOf);if(c)var C=pe(Symbol.prototype.valueOf);function m(te,xe){if(typeof te!="object")return!1;try{return xe(te),!0}catch{return!1}}Y.isArgumentsObject=G,Y.isGeneratorFunction=ie,Y.isTypedArray=fe;function a(te){return typeof Promise<"u"&&te instanceof Promise||te!==null&&typeof te=="object"&&typeof te.then=="function"&&typeof te.catch=="function"}Y.isPromise=a;function t(te){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(te):fe(te)||K(te)}Y.isArrayBufferView=t;function h(te){return le(te)==="Uint8Array"}Y.isUint8Array=h;function o(te){return le(te)==="Uint8ClampedArray"}Y.isUint8ClampedArray=o;function r(te){return le(te)==="Uint16Array"}Y.isUint16Array=r;function n(te){return le(te)==="Uint32Array"}Y.isUint32Array=n;function _(te){return le(te)==="Int8Array"}Y.isInt8Array=_;function g(te){return le(te)==="Int16Array"}Y.isInt16Array=g;function w(te){return le(te)==="Int32Array"}Y.isInt32Array=w;function p(te){return le(te)==="Float32Array"}Y.isFloat32Array=p;function S(te){return le(te)==="Float64Array"}Y.isFloat64Array=S;function x(te){return le(te)==="BigInt64Array"}Y.isBigInt64Array=x;function A(te){return le(te)==="BigUint64Array"}Y.isBigUint64Array=A;function T(te){return y(te)==="[object Map]"}T.working=typeof Map<"u"&&T(new Map);function B(te){return typeof Map>"u"?!1:T.working?T(te):te instanceof Map}Y.isMap=B;function U(te){return y(te)==="[object Set]"}U.working=typeof Set<"u"&&U(new Set);function D(te){return typeof Set>"u"?!1:U.working?U(te):te instanceof Set}Y.isSet=D;function H(te){return y(te)==="[object WeakMap]"}H.working=typeof WeakMap<"u"&&H(new WeakMap);function L(te){return typeof WeakMap>"u"?!1:H.working?H(te):te instanceof WeakMap}Y.isWeakMap=L;function O(te){return y(te)==="[object WeakSet]"}O.working=typeof WeakSet<"u"&&O(new WeakSet);function I(te){return O(te)}Y.isWeakSet=I;function P(te){return y(te)==="[object ArrayBuffer]"}P.working=typeof ArrayBuffer<"u"&&P(new ArrayBuffer);function Q(te){return typeof ArrayBuffer>"u"?!1:P.working?P(te):te instanceof ArrayBuffer}Y.isArrayBuffer=Q;function N(te){return y(te)==="[object DataView]"}N.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&N(new DataView(new ArrayBuffer(1),0,1));function K(te){return typeof DataView>"u"?!1:N.working?N(te):te instanceof DataView}Y.isDataView=K;var V=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function re(te){return y(te)==="[object SharedArrayBuffer]"}function j(te){return typeof V>"u"?!1:(typeof re.working>"u"&&(re.working=re(new V)),re.working?re(te):te instanceof V)}Y.isSharedArrayBuffer=j;function z(te){return y(te)==="[object AsyncFunction]"}Y.isAsyncFunction=z;function W(te){return y(te)==="[object Map Iterator]"}Y.isMapIterator=W;function ee(te){return y(te)==="[object Set Iterator]"}Y.isSetIterator=ee;function se(te){return y(te)==="[object Generator]"}Y.isGeneratorObject=se;function Se(te){return y(te)==="[object WebAssembly.Module]"}Y.isWebAssemblyCompiledModule=Se;function ce(te){return m(te,v)}Y.isNumberObject=ce;function ke(te){return m(te,f)}Y.isStringObject=ke;function J(te){return m(te,d)}Y.isBooleanObject=J;function Ee(te){return q&&m(te,u)}Y.isBigIntObject=Ee;function de(te){return c&&m(te,C)}Y.isSymbolObject=de;function st(te){return ce(te)||ke(te)||J(te)||Ee(te)||de(te)}Y.isBoxedPrimitive=st;function Re(te){return typeof Uint8Array<"u"&&(Q(te)||j(te))}Y.isAnyArrayBuffer=Re,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(te){Object.defineProperty(Y,te,{enumerable:!1,value:function(){throw new Error(te+" is not supported in userland")}})})}(Vt)),Vt}var ui,Or;function un(){return Or||(Or=1,ui=function(G){return G&&typeof G=="object"&&typeof G.copy=="function"&&typeof G.fill=="function"&&typeof G.readUInt8=="function"}),ui}var Bt={exports:{}},Ir;function dn(){return Ir||(Ir=1,typeof Object.create=="function"?Bt.exports=function(G,ie){ie&&(G.super_=ie,G.prototype=Object.create(ie.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}))}:Bt.exports=function(G,ie){if(ie){G.super_=ie;var le=function(){};le.prototype=ie.prototype,G.prototype=new le,G.prototype.constructor=G}}),Bt.exports}var Pr;function fn(){return Pr||(Pr=1,function(Y){var G=Object.getOwnPropertyDescriptors||function(K){for(var V=Object.keys(K),re={},j=0;j<V.length;j++)re[V[j]]=Object.getOwnPropertyDescriptor(K,V[j]);return re},ie=/%[sdj%]/g;Y.format=function(N){if(!_(N)){for(var K=[],V=0;V<arguments.length;V++)K.push(q(arguments[V]));return K.join(" ")}for(var V=1,re=arguments,j=re.length,z=String(N).replace(ie,function(ee){if(ee==="%%")return"%";if(V>=j)return ee;switch(ee){case"%s":return String(re[V++]);case"%d":return Number(re[V++]);case"%j":try{return JSON.stringify(re[V++])}catch{return"[Circular]"}default:return ee}}),W=re[V];V<j;W=re[++V])o(W)||!S(W)?z+=" "+W:z+=" "+q(W);return z},Y.deprecate=function(N,K){if(typeof process<"u"&&process.noDeprecation===!0)return N;if(typeof process>"u")return function(){return Y.deprecate(N,K).apply(this,arguments)};var V=!1;function re(){if(!V){if(process.throwDeprecation)throw new Error(K);process.traceDeprecation?console.trace(K):console.error(K),V=!0}return N.apply(this,arguments)}return re};var le={},fe=/^$/;if({}.NODE_DEBUG){var pe={}.NODE_DEBUG;pe=pe.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),fe=new RegExp("^"+pe+"$","i")}Y.debuglog=function(N){if(N=N.toUpperCase(),!le[N])if(fe.test(N)){var K=process.pid;le[N]=function(){var V=Y.format.apply(Y,arguments);console.error("%s %d: %s",N,K,V)}}else le[N]=function(){};return le[N]};function q(N,K){var V={seen:[],stylize:y};return arguments.length>=3&&(V.depth=arguments[2]),arguments.length>=4&&(V.colors=arguments[3]),h(K)?V.showHidden=K:K&&Y._extend(V,K),w(V.showHidden)&&(V.showHidden=!1),w(V.depth)&&(V.depth=2),w(V.colors)&&(V.colors=!1),w(V.customInspect)&&(V.customInspect=!0),V.colors&&(V.stylize=c),f(V,N,V.depth)}Y.inspect=q,q.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},q.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function c(N,K){var V=q.styles[K];return V?"\x1B["+q.colors[V][0]+"m"+N+"\x1B["+q.colors[V][1]+"m":N}function y(N,K){return N}function v(N){var K={};return N.forEach(function(V,re){K[V]=!0}),K}function f(N,K,V){if(N.customInspect&&K&&T(K.inspect)&&K.inspect!==Y.inspect&&!(K.constructor&&K.constructor.prototype===K)){var re=K.inspect(V,N);return _(re)||(re=f(N,re,V)),re}var j=d(N,K);if(j)return j;var z=Object.keys(K),W=v(z);if(N.showHidden&&(z=Object.getOwnPropertyNames(K)),A(K)&&(z.indexOf("message")>=0||z.indexOf("description")>=0))return u(K);if(z.length===0){if(T(K)){var ee=K.name?": "+K.name:"";return N.stylize("[Function"+ee+"]","special")}if(p(K))return N.stylize(RegExp.prototype.toString.call(K),"regexp");if(x(K))return N.stylize(Date.prototype.toString.call(K),"date");if(A(K))return u(K)}var se="",Se=!1,ce=["{","}"];if(t(K)&&(Se=!0,ce=["[","]"]),T(K)){var ke=K.name?": "+K.name:"";se=" [Function"+ke+"]"}if(p(K)&&(se=" "+RegExp.prototype.toString.call(K)),x(K)&&(se=" "+Date.prototype.toUTCString.call(K)),A(K)&&(se=" "+u(K)),z.length===0&&(!Se||K.length==0))return ce[0]+se+ce[1];if(V<0)return p(K)?N.stylize(RegExp.prototype.toString.call(K),"regexp"):N.stylize("[Object]","special");N.seen.push(K);var J;return Se?J=C(N,K,V,W,z):J=z.map(function(Ee){return m(N,K,V,W,Ee,Se)}),N.seen.pop(),a(J,se,ce)}function d(N,K){if(w(K))return N.stylize("undefined","undefined");if(_(K)){var V="'"+JSON.stringify(K).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return N.stylize(V,"string")}if(n(K))return N.stylize(""+K,"number");if(h(K))return N.stylize(""+K,"boolean");if(o(K))return N.stylize("null","null")}function u(N){return"["+Error.prototype.toString.call(N)+"]"}function C(N,K,V,re,j){for(var z=[],W=0,ee=K.length;W<ee;++W)O(K,String(W))?z.push(m(N,K,V,re,String(W),!0)):z.push("");return j.forEach(function(se){se.match(/^\d+$/)||z.push(m(N,K,V,re,se,!0))}),z}function m(N,K,V,re,j,z){var W,ee,se;if(se=Object.getOwnPropertyDescriptor(K,j)||{value:K[j]},se.get?se.set?ee=N.stylize("[Getter/Setter]","special"):ee=N.stylize("[Getter]","special"):se.set&&(ee=N.stylize("[Setter]","special")),O(re,j)||(W="["+j+"]"),ee||(N.seen.indexOf(se.value)<0?(o(V)?ee=f(N,se.value,null):ee=f(N,se.value,V-1),ee.indexOf(`
`)>-1&&(z?ee=ee.split(`
`).map(function(Se){return"  "+Se}).join(`
`).slice(2):ee=`
`+ee.split(`
`).map(function(Se){return"   "+Se}).join(`
`))):ee=N.stylize("[Circular]","special")),w(W)){if(z&&j.match(/^\d+$/))return ee;W=JSON.stringify(""+j),W.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(W=W.slice(1,-1),W=N.stylize(W,"name")):(W=W.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),W=N.stylize(W,"string"))}return W+": "+ee}function a(N,K,V){var re=N.reduce(function(j,z){return z.indexOf(`
`)>=0,j+z.replace(/\u001b\[\d\d?m/g,"").length+1},0);return re>60?V[0]+(K===""?"":K+`
 `)+" "+N.join(`,
  `)+" "+V[1]:V[0]+K+" "+N.join(", ")+" "+V[1]}Y.types=hn();function t(N){return Array.isArray(N)}Y.isArray=t;function h(N){return typeof N=="boolean"}Y.isBoolean=h;function o(N){return N===null}Y.isNull=o;function r(N){return N==null}Y.isNullOrUndefined=r;function n(N){return typeof N=="number"}Y.isNumber=n;function _(N){return typeof N=="string"}Y.isString=_;function g(N){return typeof N=="symbol"}Y.isSymbol=g;function w(N){return N===void 0}Y.isUndefined=w;function p(N){return S(N)&&U(N)==="[object RegExp]"}Y.isRegExp=p,Y.types.isRegExp=p;function S(N){return typeof N=="object"&&N!==null}Y.isObject=S;function x(N){return S(N)&&U(N)==="[object Date]"}Y.isDate=x,Y.types.isDate=x;function A(N){return S(N)&&(U(N)==="[object Error]"||N instanceof Error)}Y.isError=A,Y.types.isNativeError=A;function T(N){return typeof N=="function"}Y.isFunction=T;function B(N){return N===null||typeof N=="boolean"||typeof N=="number"||typeof N=="string"||typeof N=="symbol"||typeof N>"u"}Y.isPrimitive=B,Y.isBuffer=un();function U(N){return Object.prototype.toString.call(N)}function D(N){return N<10?"0"+N.toString(10):N.toString(10)}var H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(){var N=new Date,K=[D(N.getHours()),D(N.getMinutes()),D(N.getSeconds())].join(":");return[N.getDate(),H[N.getMonth()],K].join(" ")}Y.log=function(){console.log("%s - %s",L(),Y.format.apply(Y,arguments))},Y.inherits=dn(),Y._extend=function(N,K){if(!K||!S(K))return N;for(var V=Object.keys(K),re=V.length;re--;)N[V[re]]=K[V[re]];return N};function O(N,K){return Object.prototype.hasOwnProperty.call(N,K)}var I=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;Y.promisify=function(K){if(typeof K!="function")throw new TypeError('The "original" argument must be of type Function');if(I&&K[I]){var V=K[I];if(typeof V!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(V,I,{value:V,enumerable:!1,writable:!1,configurable:!0}),V}function V(){for(var re,j,z=new Promise(function(se,Se){re=se,j=Se}),W=[],ee=0;ee<arguments.length;ee++)W.push(arguments[ee]);W.push(function(se,Se){se?j(se):re(Se)});try{K.apply(this,W)}catch(se){j(se)}return z}return Object.setPrototypeOf(V,Object.getPrototypeOf(K)),I&&Object.defineProperty(V,I,{value:V,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(V,G(K))},Y.promisify.custom=I;function P(N,K){if(!N){var V=new Error("Promise was rejected with a falsy value");V.reason=N,N=V}return K(N)}function Q(N){if(typeof N!="function")throw new TypeError('The "original" argument must be of type Function');function K(){for(var V=[],re=0;re<arguments.length;re++)V.push(arguments[re]);var j=V.pop();if(typeof j!="function")throw new TypeError("The last argument must be of type Function");var z=this,W=function(){return j.apply(z,arguments)};N.apply(this,V).then(function(ee){process.nextTick(W.bind(null,null,ee))},function(ee){process.nextTick(P.bind(null,ee,W))})}return Object.setPrototypeOf(K,Object.getPrototypeOf(N)),Object.defineProperties(K,G(N)),K}Y.callbackify=Q}(qt)),qt}/*! For license information please see xterm-addon-ligatures.js.LICENSE.txt */(function(Y,G){(function(ie,le){Y.exports=le($t,$t,fn(),$t)})(self,function(ie,le,fe,pe){return(()=>{var q={185:(f,d)=>{function u(m){const a={};for(const[t,h]of Object.entries(m.individual))a[t]=C(h);for(const{range:t,entry:h}of m.range){const o=C(h);for(let r=t[0];r<t[1];r++)a[r]=o}return a}function C(m){const a={};return m.forward&&(a.forward=u(m.forward)),m.reverse&&(a.reverse=u(m.reverse)),m.lookup&&(a.lookup=m.lookup),a}Object.defineProperty(d,"__esModule",{value:!0}),d.default=u},98:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(602),m=u(593),a=u(233),t=u(694),h=u(532),o=u(595),r=u(223),n=u(439),_=u(349),g=u(185);class w{constructor(x,A){this._lookupTrees=[],this._glyphLookups={},this._font=x,A.cacheSize>0&&(this._cache=new m({max:A.cacheSize,length:(D,H)=>H.length}));const T=(this._font.tables.gsub&&this._font.tables.gsub.features.filter(D=>D.tag==="calt")||[]).reduce((D,H)=>[...D,...H.feature.lookupListIndexes],[]),B=this._font.tables.gsub&&this._font.tables.gsub.lookups||[],U=B.filter((D,H)=>T.some(L=>L===H));for(const[D,H]of U.entries()){const L=[];switch(H.lookupType){case 6:for(const[I,P]of H.subtables.entries())switch(P.substFormat){case 1:L.push(o.default(P,B,I));break;case 2:L.push(r.default(P,B,I));break;case 3:L.push(n.default(P,B,I))}break;case 8:for(const[I,P]of H.subtables.entries())L.push(_.default(P,I))}const O=g.default(a.default(L));this._lookupTrees.push({tree:O,processForward:H.lookupType!==8});for(const I of Object.keys(O))this._glyphLookups[I]||(this._glyphLookups[I]=[]),this._glyphLookups[I].push(D)}}findLigatures(x){const A=this._cache&&this._cache.get(x);if(A&&!Array.isArray(A))return A;const T=[];for(const D of x)T.push(this._font.charToGlyphIndex(D));if(this._lookupTrees.length===0)return{inputGlyphs:T,outputGlyphs:T,contextRanges:[]};const B=this._findInternal(T.slice()),U={inputGlyphs:T,outputGlyphs:B.sequence,contextRanges:B.ranges};return this._cache&&this._cache.set(x,U),U}findLigatureRanges(x){if(this._lookupTrees.length===0)return[];const A=this._cache&&this._cache.get(x);if(A)return Array.isArray(A)?A:A.contextRanges;const T=[];for(const U of x)T.push(this._font.charToGlyphIndex(U));const B=this._findInternal(T);return this._cache&&this._cache.set(x,B.ranges),B.ranges}_findInternal(x){const A=[];let T=this._getNextLookup(x,0);for(;T.index!==null;){const B=this._lookupTrees[T.index];if(B.processForward){let U=T.last;for(let D=T.first;D<U;D++){const H=t.default(B.tree,x,D,D);if(H){for(let L=0;L<H.substitutions.length;L++){const O=H.substitutions[L];O!==null&&(x[D+L]=O)}h.default(A,H.contextRange[0]+D,H.contextRange[1]+D),D+H.length>=U&&(U=D+H.length+1),D+=H.length-1}}}else for(let U=T.last-1;U>=T.first;U--){const D=t.default(B.tree,x,U,U);if(D){for(let H=0;H<D.substitutions.length;H++){const L=D.substitutions[H];L!==null&&(x[U+H]=L)}h.default(A,D.contextRange[0]+U,D.contextRange[1]+U),U-=D.length-1}}T=this._getNextLookup(x,T.index+1)}return{sequence:x,ranges:A}}_getNextLookup(x,A){const T={index:null,first:1/0,last:-1};for(let B=0;B<x.length;B++){const U=this._glyphLookups[x[B]];if(U)for(let D=0;D<U.length;D++){const H=U[D];if(H>=A){(T.index===null||H<=T.index)&&(T.index=H,T.first>B&&(T.first=B),T.last=B+1);break}}}return T}}async function p(S,x){const A=await Promise.resolve().then(()=>u(269)).then(T=>T.promisify(C.load)(S));return new w(A,Object.assign({cacheSize:0},x))}d.load=async function(S,x){const[A]=await Promise.resolve().then(()=>u(781)).then(T=>T.listVariants(S));if(!A)throw new Error(`Font ${S} not found`);return p(A.path,x)},d.loadFile=p,d.loadBuffer=function(S,x){const A=C.parse(S);return new w(A,Object.assign({cacheSize:0},x))}},233:(f,d)=>{function u(r,n){for(const[_,g]of Object.entries(n.individual))if(r.individual[_])C(r.individual[_],g);else{let w=!1;for(const[p,{range:S,entry:x}]of r.range.entries()){const A=a(Number(_),S);if(A.both!==null){w=!0,r.individual[_]=g,C(r.individual[_],h(x)),r.range.splice(p,1);for(const T of A.second)Array.isArray(T)?r.range.push({range:T,entry:h(x)}):r.individual[T]=h(x)}}w||(r.individual[_]=g)}for(const{range:_,entry:g}of n.range){let w=[_];for(let p=0;p<r.range.length;p++){const{range:S,entry:x}=r.range[p];for(const[A,T]of w.entries()){if(!Array.isArray(T)){const B=a(T,S);if(B.both===null)continue;r.individual[T]=h(g),C(r.individual[T],h(x)),r.range.splice(p,1),p--;for(const U of B.second)Array.isArray(U)?r.range.push({range:U,entry:h(x)}):r.individual[U]=h(x);w.splice(A,1,...B.first);break}{const B=m(T,S);if(B.both===null)continue;r.range.splice(p,1),p--;const U=h(x);Array.isArray(B.both)?r.range.push({range:B.both,entry:U}):r.individual[B.both]=U,C(U,h(g));for(const D of B.second)Array.isArray(D)?r.range.push({range:D,entry:h(x)}):r.individual[D]=h(x);w=B.first}}}for(const p of Object.keys(r.individual))for(const[S,x]of w.entries()){if(Array.isArray(x)){const A=a(Number(p),x);if(A.both===null)continue;C(r.individual[p],h(g)),w.splice(S,1,...A.second);break}if(Number(p)===x){C(r.individual[p],h(g));break}}for(const p of w)Array.isArray(p)?r.range.push({range:p,entry:h(g)}):r.individual[p]=h(g)}}function C(r,n){n.lookup&&(!r.lookup||r.lookup.index>n.lookup.index||r.lookup.index===n.lookup.index&&r.lookup.subIndex>n.lookup.subIndex)&&(r.lookup=n.lookup),n.forward&&(r.forward?u(r.forward,n.forward):r.forward=n.forward),n.reverse&&(r.reverse?u(r.reverse,n.reverse):r.reverse=n.reverse)}function m(r,n){const _={first:[],second:[],both:null};if(r[0]<n[1]&&n[0]<r[1]){const g=Math.max(r[0],n[0]),w=Math.min(r[1],n[1]);_.both=t(g,w)}if(r[0]<n[0]){const g=r[0],w=Math.min(n[0],r[1]);_.first.push(t(g,w))}else if(n[0]<r[0]){const g=n[0],w=Math.min(n[1],r[0]);_.second.push(t(g,w))}if(r[1]>n[1]){const g=Math.max(r[0],n[1]),w=r[1];_.first.push(t(g,w))}else if(n[1]>r[1]){const g=Math.max(r[1],n[0]),w=n[1];_.second.push(t(g,w))}return _}function a(r,n){if(r<n[0]||r>n[1])return{first:[r],second:[n],both:null};const _={first:[],second:[],both:r};return n[0]<r&&_.second.push(t(n[0],r)),n[1]>r&&_.second.push(t(r+1,n[1])),_}function t(r,n){return n-r==1?r:[r,n]}function h(r){const n={};return r.forward&&(n.forward=o(r.forward)),r.reverse&&(n.reverse=o(r.reverse)),r.lookup&&(n.lookup={contextRange:r.lookup.contextRange.slice(),index:r.lookup.index,length:r.lookup.length,subIndex:r.lookup.subIndex,substitutions:r.lookup.substitutions.slice()}),n}function o(r){const n={};for(const[_,g]of Object.entries(r.individual))n[_]=h(g);return{individual:n,range:r.range.map(({range:_,entry:g})=>({range:_.slice(),entry:h(g)}))}}Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(r){const n={individual:{},range:[]};for(const _ of r)u(n,_);return n}},532:(f,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(u,C,m){let a=!1;for(let t=0;t<u.length;t++){const h=u[t];if(a){if(m<=h[0])return u[t-1][1]=m,u;if(m<=h[1])return u[t-1][1]=Math.max(m,h[1]),u.splice(t,1),a=!1,u;u.splice(t,1),t--}else{if(m<=h[0])return u.splice(t,0,[C,m]),u;if(m<=h[1])return h[0]=Math.min(C,h[0]),u;if(!(C<h[1]))continue;h[0]=Math.min(C,h[0]),a=!0}}return a?u[u.length-1][1]=m:u.push([C,m]),u}},595:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(283),m=u(267);d.default=function(a,t,h){const o={individual:{},range:[]},r=C.listGlyphsByIndex(a.coverage);for(const{glyphId:n,index:_}of r){const g=a.chainRuleSets[_];if(g)for(const[w,p]of g.entries()){let S=m.getInputTree(o,p.lookupRecords,t,0,n).map(({entry:x,substitution:A})=>({entry:x,substitutions:[A]}));for(const[x,A]of p.input.entries())S=m.processInputPosition([A],x+1,S,p.lookupRecords,t);for(const x of p.lookahead)S=m.processLookaheadPosition([x],S);for(const x of p.backtrack)S=m.processBacktrackPosition([x],S);for(const{entry:x,substitutions:A}of S)x.lookup={substitutions:A,length:p.input.length+1,index:h,subIndex:w,contextRange:[-1*p.backtrack.length,1+p.input.length+p.lookahead.length]}}}return o}},223:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(233),m=u(283),a=u(91),t=u(267);d.default=function(h,o,r){const n=[],_=m.listGlyphsByIndex(h.coverage);for(const{glyphId:g}of _){const w=a.default(h.inputClassDef,g);for(const[p,S]of w.entries()){if(S===null)continue;const x=h.chainClassSet[S];if(x)for(const[A,T]of x.entries()){const B={individual:{},range:[]};let U=t.getInputTree(B,T.lookupRecords,o,0,p).map(({entry:D,substitution:H})=>({entry:D,substitutions:[H]}));for(const[D,H]of T.input.entries())U=t.processInputPosition(a.listClassGlyphs(h.inputClassDef,H),D+1,U,T.lookupRecords,o);for(const D of T.lookahead)U=t.processLookaheadPosition(a.listClassGlyphs(h.lookaheadClassDef,D),U);for(const D of T.backtrack)U=t.processBacktrackPosition(a.listClassGlyphs(h.backtrackClassDef,D),U);for(const{entry:D,substitutions:H}of U)D.lookup={substitutions:H,index:r,subIndex:A,length:T.input.length+1,contextRange:[-1*T.backtrack.length,1+T.input.length+T.lookahead.length]};n.push(B)}}}return C.default(n)}},439:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(283),m=u(267);d.default=function(a,t,h){const o={individual:{},range:[]},r=C.listGlyphsByIndex(a.inputCoverage[0]);for(const{glyphId:n}of r){let _=m.getInputTree(o,a.lookupRecords,t,0,n).map(({entry:g,substitution:w})=>({entry:g,substitutions:[w]}));for(const[g,w]of a.inputCoverage.slice(1).entries())_=m.processInputPosition(C.listGlyphsByIndex(w).map(p=>p.glyphId),g+1,_,a.lookupRecords,t);for(const g of a.lookaheadCoverage)_=m.processLookaheadPosition(C.listGlyphsByIndex(g).map(w=>w.glyphId),_);for(const g of a.backtrackCoverage)_=m.processBacktrackPosition(C.listGlyphsByIndex(g).map(w=>w.glyphId),_);for(const{entry:g,substitutions:w}of _)g.lookup={substitutions:w,index:h,subIndex:0,length:a.inputCoverage.length,contextRange:[-1*a.backtrackCoverage.length,a.inputCoverage.length+a.lookaheadCoverage.length]}}return o}},349:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(283),m=u(267);d.default=function(a,t){const h={individual:{},range:[]},o=C.listGlyphsByIndex(a.coverage);for(const{glyphId:r,index:n}of o){const _={};Array.isArray(r)?h.range.push({entry:_,range:r}):h.individual[r]=_;let g=[{entry:_,substitutions:[a.substitutes[n]]}];for(const w of a.lookaheadCoverage)g=m.processLookaheadPosition(C.listGlyphsByIndex(w).map(p=>p.glyphId),g);for(const w of a.backtrackCoverage)g=m.processBacktrackPosition(C.listGlyphsByIndex(w).map(p=>p.glyphId),g);for(const{entry:w,substitutions:p}of g)w.lookup={substitutions:p,index:t,subIndex:0,length:1,contextRange:[-1*a.backtrackCoverage.length,1+a.lookaheadCoverage.length]}}return h}},91:(f,d)=>{function u(C,m){for(const a of C.ranges)if(a.start<=m&&a.end>=m)return a.classId;return null}Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(C,m){return C.format===2?Array.isArray(m)?function(a,t){let h=t[0],o=u(a,h),r=t[0]+1;const n=new Map;for(;r<t[1];)u(a,r)!==o&&(r-h<=1?n.set(h,o):n.set([h,r],o)),r++;return r-h<=1?n.set(h,o):n.set([h,r],o),n}(C,m):new Map([[m,u(C,m)]]):new Map([[m,null]])},d.listClassGlyphs=function(C,m){if(C.format===2){const a=[];for(const t of C.ranges)t.classId===m&&(t.end===t.start?a.push(t.start):a.push([t.start,t.end+1]));return a}return[]}},283:(f,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(u,C){switch(u.format){case 1:const m=u.glyphs.indexOf(C);return m!==-1?m:null;case 2:const a=u.ranges.find(t=>t.start<=C&&t.end>=C);return a?a.index:null}},d.listGlyphsByIndex=function(u){switch(u.format){case 1:return u.glyphs.map((m,a)=>({glyphId:m,index:a}));case 2:let C=[];for(const[m,a]of u.ranges.entries())a.end===a.start?C.push({glyphId:a.start,index:m}):C.push({glyphId:[a.start,a.end+1],index:m});return C}}},267:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(603);function m(t,h,o,r,n){const _=[];if(Array.isArray(n)){const g=function(w,p,S,x){for(const A of w.filter(T=>T.sequenceIndex===S))for(const T of p[A.lookupListIndex].subtables){const B=C.getRangeSubstitutionGlyphs(T,x);if(!Array.from(B.values()).every(U=>U!==null))return B}return new Map([[x,null]])}(h,o,r,n);for(const[w,p]of g){const S={};Array.isArray(w)?t.range.push({range:w,entry:S}):t.individual[w]={},_.push({entry:S,substitution:p})}}else t.individual[n]={},_.push({entry:t.individual[n],substitution:a(h,o,r,n)});return _}function a(t,h,o,r){for(const n of t.filter(_=>_.sequenceIndex===o))for(const _ of h[n.lookupListIndex].subtables){const g=C.getIndividualSubstitutionGlyph(_,r);if(g!==null)return g}return null}d.processInputPosition=function(t,h,o,r,n){const _=[];for(const g of o){g.entry.forward={individual:{},range:[]};for(const w of t)_.push(...m(g.entry.forward,r,n,h,w).map(({entry:p,substitution:S})=>({entry:p,substitutions:[...g.substitutions,S]})))}return _},d.processLookaheadPosition=function(t,h){const o=[];for(const r of h)for(const n of t){const _={};r.entry.forward||(r.entry.forward={individual:{},range:[]}),o.push({entry:_,substitutions:r.substitutions}),Array.isArray(n)?r.entry.forward.range.push({entry:_,range:n}):r.entry.forward.individual[n]=_}return o},d.processBacktrackPosition=function(t,h){const o=[];for(const r of h)for(const n of t){const _={};r.entry.reverse||(r.entry.reverse={individual:{},range:[]}),o.push({entry:_,substitutions:r.substitutions}),Array.isArray(n)?r.entry.reverse.range.push({entry:_,range:n}):r.entry.reverse.individual[n]=_}return o},d.getInputTree=m},603:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(283);function m(a,t){const h=C.default(a.coverage,t);if(h===null)return null;switch(a.substFormat){case 1:return(t+a.deltaGlyphId)%65536;case 2:return a.substitute[h]!=null?a.substitute[h]:null}}d.getRangeSubstitutionGlyphs=function(a,t){let h=t[0],o=m(a,h),r=t[0]+1;const n=new Map;for(;r<t[1];)m(a,r)!==o&&(r-h<=1?n.set(h,o):n.set([h,r],o)),r++;return r-h<=1?n.set(h,o):n.set([h,r],o),n},d.getIndividualSubstitutionGlyph=m},694:(f,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=function u(C,m,a,t){let h=C[m[t]];if(!h)return;let o=h.lookup;if(h.reverse){const n=function(_,g,w){let p=_[g[--w]],S=p&&p.lookup;for(;p&&((!S&&p.lookup||p.lookup&&S&&S.index>p.lookup.index)&&(S=p.lookup),!(--w<0)&&p.reverse);)p=p.reverse[g[w]];return S}(h.reverse,m,a);(!o&&n||n&&o&&(o.index>n.index||o.index===n.index&&o.subIndex>n.subIndex))&&(o=n)}if(++t>=m.length||!h.forward)return o;const r=u(h.forward,m,a,t);return(!o&&r||r&&o&&(o.index>r.index||o.index===r.index&&o.subIndex>r.subIndex))&&(o=r),o}},814:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(82);var m,a;(function(r){r.Serif="serif",r.SansSerif="sansSerif",r.Monospace="monospace",r.Cursive="cursive",r.Unknown="unknown"})(m=d.Type||(d.Type={})),function(r){r.Regular="regular",r.Italic="italic",r.Oblique="oblique",r.Bold="bold",r.BoldItalic="boldItalic",r.BoldOblique="boldOblique",r.Other="other"}(a=d.Style||(d.Style={}));const t=[" Regular"," Bold"," Bold Italic"," Bold Oblique"," Italic"," Oblique"];function h(r){if(!r.os2&&!r.head)return a.Other;const n=r.os2?32&r.os2.fsSelection:1&r.head.macStyle,_=r.os2?1&r.os2.fsSelection:r.post?r.post.italicAngle<0:2&r.head.macStyle,g=r.os2?512&r.os2.fsSelection:r.post?r.post.italicAngle>0:0,w=r.os2?320&r.os2.fsSelection:1;return n?g?a.BoldOblique:_?a.BoldItalic:a.Bold:g?a.Oblique:_?a.Italic:w?a.Regular:a.Other}d.name=function(r,n){const _=r.names.preferredFamily&&r.names.preferredFamily[n]?r.names.preferredFamily[n]:r.names.fontFamily[n];if(C.platform()==="win32"){const g=`${_} ${r.names.preferredSubfamily&&r.names.preferredSubfamily[n]?r.names.preferredSubfamily[n]:r.names.fontSubfamily[n]}`;let w=-1;for(const p of t){const S=g.lastIndexOf(p);if(S!==-1){w=S;break}}return w!==-1?g.substring(0,w):g}return _},d.type=function(r){if(r.os2)switch(r.os2.panose[0]){case 2:return r.os2.panose[3]===9?m.Monospace:r.os2.panose[1]>=11&&r.os2.panose[1]<=15||r.os2.panose[1]===0?m.SansSerif:m.Serif;case 3:return m.Cursive}else if(r.post&&r.post.isFixedPitch)return m.Monospace;return m.Unknown},d.style=h;const o=[a.Bold,a.BoldItalic,a.BoldOblique];d.weight=function(r){return r.os2?r.os2.usWeightClass:o.includes(h(r))?700:400}},781:function(f,d,u){var C=this&&this.__rest||function(n,_){var g={};for(var w in n)Object.prototype.hasOwnProperty.call(n,w)&&_.indexOf(w)<0&&(g[w]=n[w]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(w=Object.getOwnPropertySymbols(n);p<w.length;p++)_.indexOf(w[p])<0&&(g[w[p]]=n[w[p]])}return g};Object.defineProperty(d,"__esModule",{value:!0});const m=u(459),a=u(934),t=u(814);var h=u(814);async function o(n){const _=Object.assign({concurrency:4,language:"en"},n),g=await m.default({extensions:["ttf","otf"]}),w=await async function(S,x,A){const T=[];let B=0;const U=async H=>{T.push(await(async L=>{try{return r(L,await a.default(L),_.language)}catch(O){if(["TypeError","SyntaxError","ReferenceError","RangeError","AssertionError"].includes(O.name))throw O}})(x[H])),B<x.length&&await U(B++)},D=[];for(;B<x.length&&B<A;B++)D.push(U(B));return await Promise.all(D),T}(0,g,_.concurrency),p={};for(let S of w.filter(x=>x)){const{name:x}=S,A=C(S,["name"]);p[x]||(p[x]=[]),p[x].push(A)}return p}function r(n,_,g){return{name:t.name(_,g),path:n,type:t.type(_),weight:t.weight(_),style:t.style(_)}}d.Type=h.Type,d.Style=h.Style,d.list=o,d.listVariants=async function(n,_){return(await o(_))[n]||[]},d.get=async function(n,_){const g=Object.assign({language:"en"},_);return r(n,await a.default(n),g.language)}},934:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(89),m=u(896),a=u(380),t=u(879),h=u(130),o=u(731),r=u(954);var n;(function(w){w[w.TrueType=0]="TrueType",w[w.CFF=1]="CFF",w[w.Woff=2]="Woff"})(n||(n={}));const _={name:{tag:Buffer.from("name"),parse:a.default},ltag:{tag:Buffer.from("ltag"),parse:t.default},os2:{tag:Buffer.from("OS/2"),parse:h.default},head:{tag:Buffer.from("head"),parse:o.default},post:{tag:Buffer.from("post"),parse:r.default}};d.default=async function(w){return new Promise((p,S)=>{(async()=>{const x=m.default(),A=C.createReadStream(w);let T=!1;const B=()=>{T=!0};A.once("close",B),A.once("end",B),A.once("error",U=>{T=!0,S(U)}),A.pipe(x);try{switch(function(U){if(U.equals(g.one)||U.equals(g.true)||U.equals(g.typ1))return n.TrueType;if(U.equals(g.otto))return n.CFF;if(U.equals(g.woff))return n.Woff;throw new Error(`Unsupported signature type: ${U}`)}(await x.read(4))){case n.TrueType:case n.CFF:const U=(await x.read(2)).readUInt16BE(0);await x.skip(6);const D=await async function(I,P){const Q={};for(let N=0;N<P;N++){const K=await I.read(4),V=await I.read(12);for(const[re,j]of Object.entries(_))if(K.equals(j.tag)&&(Q[re]={offset:V.readUInt32BE(4),length:V.readUInt32BE(8)},Q.name&&Q.ltag&&Q.os2))return Q}return Q}(x,U),H=Object.entries(D).sort((I,P)=>I[1].offset-P[1].offset),L={};for(const[I,P]of H)await x.skip(P.offset-x.offset),L[I]=await x.read(P.length);let O=[];if(L.ltag&&(O=_.ltag.parse(L.ltag)),!L.name)throw new Error(`missing required OpenType table 'name' in font file: ${w}`);return{names:_.name.parse(L.name,O),os2:L.os2&&_.os2.parse(L.os2),head:L.head&&_.head.parse(L.head),post:L.post&&_.post.parse(L.post)};case n.Woff:default:throw new Error("provided font type is not supported yet")}}finally{A.unpipe(x),T||(A.destroy(),x.destroy())}})().then(p,S)})};const g={one:Buffer.from([0,1,0,0]),otto:Buffer.from("OTTO"),true:Buffer.from("true"),typ1:Buffer.from("typ1"),woff:Buffer.from("wOFF")}},731:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(980);d.default=function(m){return{version:C.formatFixed(m.readUInt16BE(0),m.readUInt16BE(2)),fontRevision:C.formatFixed(m.readUInt16BE(4),m.readUInt16BE(6)),checkSumAdjustment:m.readUInt32BE(8),magicNumber:m.readUInt32BE(12),flags:m.readUInt16BE(16),unitsPerEm:m.readUInt16BE(18),created:C.formatLongDateTime(m.readUInt32BE(20),m.readUInt32BE(24)),modified:C.formatLongDateTime(m.readUInt32BE(28),m.readUInt32BE(32)),xMin:m.readInt16BE(36),yMin:m.readInt16BE(38),xMax:m.readInt16BE(40),yMax:m.readInt16BE(42),macStyle:m.readUInt16BE(44),lowestRecPPEM:m.readUInt16BE(46),fontDirectionHint:m.readInt16BE(48),indexToLocFormat:m.readInt16BE(50),glyphDataFormat:m.readInt16BE(52)}}},879:(f,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(u){if(u.readUInt32BE(0)!==1)throw new Error("Unsupported ltag table version.");const C=u.readUInt32BE(8),m=[];for(let a=0;a<C;a++){let t="";const h=u.readUInt16BE(12+4*a),o=u.readUInt16BE(14+4*a);for(let r=h;r<h+o;++r)t+=String.fromCharCode(u.readInt8(r));m.push(t)}return m}},380:(f,d)=>{Object.defineProperty(d,"__esModule",{value:!0});const u=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],C={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},m={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function a(g,w,p){switch(g){case 0:if(w===65535)return"und";if(p)return p[w];break;case 1:return C[w];case 3:return m[w]}}const t="utf-16",h={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},o={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function r(g,w,p){switch(g){case 0:return t;case 1:return o[p]||h[w];case 3:if(w===1||w===10)return t}}d.default=function(g,w){const p={},S=g.readUInt16BE(2),x=g.readUInt16BE(4);let A=6;for(let T=0;T<S;T++){const B=g.readUInt16BE(A+0),U=g.readUInt16BE(A+2),D=g.readUInt16BE(A+4),H=g.readUInt16BE(A+6),L=u[H]||String(H),O=g.readUInt16BE(A+8),I=g.readUInt16BE(A+10),P=a(B,D,w),Q=r(B,U,D);if(A+=12,Q!==void 0&&P!==void 0){let N;if(Q===t){const K=O/2,V=Array(K);for(let re=0;re<K;re++)V[re]=g.readUInt16BE(x+I+2*re);N=String.fromCharCode(...V)}else N=_(g,x+I,O,Q);if(N){let K=p[L];K===void 0&&(K=p[L]={}),K[P]=N}}}return p};const n={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026 \xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026 \u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026 \u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026 \u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};function _(g,w,p,S){const x=n[S];if(x===void 0)return;let A="";for(let T=0;T<p;T++){const B=g.readUInt8(w+T);A+=B<=127?String.fromCharCode(B):x[127&B]}return A}},130:(f,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(u){const C={version:u.readUInt16BE(0),xAvgCharWidth:u.readUInt16BE(2),usWeightClass:u.readUInt16BE(4),usWidthClass:u.readUInt16BE(6),fsType:u.readUInt16BE(8),ySubscriptXSize:u.readInt16BE(10),ySubscriptYSize:u.readInt16BE(12),ySubscriptXOffset:u.readInt16BE(14),ySubscriptYOffset:u.readInt16BE(16),ySuperscriptXSize:u.readInt16BE(18),ySuperscriptYSize:u.readInt16BE(20),ySuperscriptXOffset:u.readInt16BE(22),ySuperscriptYOffset:u.readInt16BE(24),yStrikeoutSize:u.readInt16BE(26),yStrikeoutPosition:u.readInt16BE(28),sFamilyClass:u.readInt16BE(30),panose:[u.readUInt8(32),u.readUInt8(33),u.readUInt8(34),u.readUInt8(35),u.readUInt8(36),u.readUInt8(37),u.readUInt8(38),u.readUInt8(39),u.readUInt8(40),u.readUInt8(41)],ulUnicodeRange1:u.readUInt32BE(42),ulUnicodeRange2:u.readUInt32BE(46),ulUnicodeRange3:u.readUInt32BE(50),ulUnicodeRange4:u.readUInt32BE(54),achVendID:String.fromCharCode(u.readUInt8(58),u.readUInt8(59),u.readUInt8(60),u.readUInt8(61)),fsSelection:u.readUInt16BE(62),usFirstCharIndex:u.readUInt16BE(64),usLastCharIndex:u.readUInt16BE(66),sTypoAscender:u.readInt16BE(68),sTypoDescender:u.readInt16BE(70),sTypoLineGap:u.readInt16BE(72),usWinAscent:u.readUInt16BE(74),usWinDescent:u.readUInt16BE(76)};return C.version>=1&&(C.ulCodePageRange1=u.readUInt32BE(78),C.ulCodePageRange2=u.readUInt32BE(82)),C.version>=2&&(C.sxHeight=u.readInt16BE(86),C.sCapHeight=u.readInt16BE(88),C.usDefaultChar=u.readUInt16BE(90),C.usBreakChar=u.readUInt16BE(92),C.usMaxContent=u.readUInt16BE(94)),C}},954:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(980);d.default=function(m){return{version:C.formatFixed(m.readUInt16BE(0),m.readUInt16BE(2)),italicAngle:C.formatFixed(m.readUInt16BE(4),m.readUInt16BE(6)),underlinePosition:m.readInt16BE(8),underlineThickness:m.readInt16BE(10),isFixedPitch:m.readUInt32BE(12),minMemType42:m.readUInt32BE(16),maxMemType42:m.readUInt32BE(20),minMemType1:m.readUInt32BE(24),maxMemType1:m.readUInt32BE(28)}}},980:(f,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.formatFixed=function(u,C){return u+C/65536},d.formatLongDateTime=function(u,C){return 1e3*(u*4294967296+C-2082844800)}},459:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(56),m=u(456),a=u(49),t={win32:()=>({}).WINDIR?[C.join({}.WINDIR,"Fonts")]:["C:\\Windows\\Fonts"],darwin:()=>{const o=m.homedir();return[...o?[C.join(o,"/Library/Fonts")]:[],"/Library/Fonts","/Network/Library/Fonts","/System/Library/Fonts","/System Folder/Fonts"]},linux:()=>{const o=m.homedir();return["/usr/share/fonts","/usr/local/share/fonts",...o?[C.join(o,".fonts"),C.join(o,".local/share/fonts")]:[]]}};function h(o){const r=Object.assign({extensions:["ttf","otf","ttc","woff","woff2"],additionalFolders:[]},o),n=m.platform(),_=t[n];if(!_)throw new Error(`Unsupported platform: ${n}`);const g=_();return a.default([...g,...r.additionalFolders],r.extensions)}f.exports=Object.assign(h,{default:h}),d.default=h},49:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(89),m=u(269),a=u(56),t=m.promisify(C.readdir),h=m.promisify(C.stat);async function o(r,n,_=10){if(_<=0)return[];let g;try{g=await t(r)}catch{return[]}const w=[];return await Promise.all(g.map(async p=>{const S=a.join(r,p);let x;try{x=await h(S)}catch{return}x.isFile()&&n.test(S)?w.push(S):x.isDirectory()&&w.push(...await o(S,n,_-1))})),w}d.default=async function(r,n){const _=new Set;return await Promise.all(r.map(async g=>{const w=await o(a.resolve(g),new RegExp(`\\.${n.map(p=>`(?:${p})`).join("|")}$`));for(const p of w)_.add(p)})),[..._]}},593:(f,d,u)=>{const C=u(411),m=Symbol("max"),a=Symbol("length"),t=Symbol("lengthCalculator"),h=Symbol("allowStale"),o=Symbol("maxAge"),r=Symbol("dispose"),n=Symbol("noDisposeOnSet"),_=Symbol("lruList"),g=Symbol("cache"),w=Symbol("updateAgeOnGet"),p=()=>1,S=(D,H,L)=>{const O=D[g].get(H);if(O){const I=O.value;if(x(D,I)){if(T(D,O),!D[h])return}else L&&(D[w]&&(O.value.now=Date.now()),D[_].unshiftNode(O));return I.value}},x=(D,H)=>{if(!H||!H.maxAge&&!D[o])return!1;const L=Date.now()-H.now;return H.maxAge?L>H.maxAge:D[o]&&L>D[o]},A=D=>{if(D[a]>D[m])for(let H=D[_].tail;D[a]>D[m]&&H!==null;){const L=H.prev;T(D,H),H=L}},T=(D,H)=>{if(H){const L=H.value;D[r]&&D[r](L.key,L.value),D[a]-=L.length,D[g].delete(L.key),D[_].removeNode(H)}};class B{constructor(H,L,O,I,P){this.key=H,this.value=L,this.length=O,this.now=I,this.maxAge=P||0}}const U=(D,H,L,O)=>{let I=L.value;x(D,I)&&(T(D,L),D[h]||(I=void 0)),I&&H.call(O,I.value,I.key,D)};f.exports=class{constructor(D){if(typeof D=="number"&&(D={max:D}),D||(D={}),D.max&&(typeof D.max!="number"||D.max<0))throw new TypeError("max must be a non-negative number");this[m]=D.max||1/0;const H=D.length||p;if(this[t]=typeof H!="function"?p:H,this[h]=D.stale||!1,D.maxAge&&typeof D.maxAge!="number")throw new TypeError("maxAge must be a number");this[o]=D.maxAge||0,this[r]=D.dispose,this[n]=D.noDisposeOnSet||!1,this[w]=D.updateAgeOnGet||!1,this.reset()}set max(D){if(typeof D!="number"||D<0)throw new TypeError("max must be a non-negative number");this[m]=D||1/0,A(this)}get max(){return this[m]}set allowStale(D){this[h]=!!D}get allowStale(){return this[h]}set maxAge(D){if(typeof D!="number")throw new TypeError("maxAge must be a non-negative number");this[o]=D,A(this)}get maxAge(){return this[o]}set lengthCalculator(D){typeof D!="function"&&(D=p),D!==this[t]&&(this[t]=D,this[a]=0,this[_].forEach(H=>{H.length=this[t](H.value,H.key),this[a]+=H.length})),A(this)}get lengthCalculator(){return this[t]}get length(){return this[a]}get itemCount(){return this[_].length}rforEach(D,H){H=H||this;for(let L=this[_].tail;L!==null;){const O=L.prev;U(this,D,L,H),L=O}}forEach(D,H){H=H||this;for(let L=this[_].head;L!==null;){const O=L.next;U(this,D,L,H),L=O}}keys(){return this[_].toArray().map(D=>D.key)}values(){return this[_].toArray().map(D=>D.value)}reset(){this[r]&&this[_]&&this[_].length&&this[_].forEach(D=>this[r](D.key,D.value)),this[g]=new Map,this[_]=new C,this[a]=0}dump(){return this[_].map(D=>!x(this,D)&&{k:D.key,v:D.value,e:D.now+(D.maxAge||0)}).toArray().filter(D=>D)}dumpLru(){return this[_]}set(D,H,L){if((L=L||this[o])&&typeof L!="number")throw new TypeError("maxAge must be a number");const O=L?Date.now():0,I=this[t](H,D);if(this[g].has(D)){if(I>this[m])return T(this,this[g].get(D)),!1;const Q=this[g].get(D).value;return this[r]&&(this[n]||this[r](D,Q.value)),Q.now=O,Q.maxAge=L,Q.value=H,this[a]+=I-Q.length,Q.length=I,this.get(D),A(this),!0}const P=new B(D,H,I,O,L);return P.length>this[m]?(this[r]&&this[r](D,H),!1):(this[a]+=P.length,this[_].unshift(P),this[g].set(D,this[_].head),A(this),!0)}has(D){if(!this[g].has(D))return!1;const H=this[g].get(D).value;return!x(this,H)}get(D){return S(this,D,!0)}peek(D){return S(this,D,!1)}pop(){const D=this[_].tail;return D?(T(this,D),D.value):null}del(D){T(this,this[g].get(D))}load(D){this.reset();const H=Date.now();for(let L=D.length-1;L>=0;L--){const O=D[L],I=O.e||0;if(I===0)this.set(O.k,O.v);else{const P=I-H;P>0&&this.set(O.k,O.v,P)}}}prune(){this[g].forEach((D,H)=>S(this,H,!1))}}},602:(f,d,u)=>{u.r(d),u.d(d,{BoundingBox:()=>h,Font:()=>fr,Glyph:()=>Lt,Path:()=>r,_parse:()=>de,load:()=>Ks,loadSync:()=>Xs,parse:()=>zt});var C=u(311),m=u.n(C);function a(e,i,s,l,b){return Math.pow(1-b,3)*e+3*Math.pow(1-b,2)*b*i+3*(1-b)*Math.pow(b,2)*s+Math.pow(b,3)*l}function t(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}t.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},t.prototype.addPoint=function(e,i){typeof e=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),typeof i=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=i,this.y2=i),i<this.y1&&(this.y1=i),i>this.y2&&(this.y2=i))},t.prototype.addX=function(e){this.addPoint(e,null)},t.prototype.addY=function(e){this.addPoint(null,e)},t.prototype.addBezier=function(e,i,s,l,b,E,k,M){const R=[e,i],F=[s,l],$=[b,E],X=[k,M];this.addPoint(e,i),this.addPoint(k,M);for(let Z=0;Z<=1;Z++){const ue=6*R[Z]-12*F[Z]+6*$[Z],oe=-3*R[Z]+9*F[Z]-9*$[Z]+3*X[Z],ye=3*F[Z]-3*R[Z];if(oe===0){if(ue===0)continue;const be=-ye/ue;0<be&&be<1&&(Z===0&&this.addX(a(R[Z],F[Z],$[Z],X[Z],be)),Z===1&&this.addY(a(R[Z],F[Z],$[Z],X[Z],be)));continue}const ne=Math.pow(ue,2)-4*ye*oe;if(ne<0)continue;const ae=(-ue+Math.sqrt(ne))/(2*oe);0<ae&&ae<1&&(Z===0&&this.addX(a(R[Z],F[Z],$[Z],X[Z],ae)),Z===1&&this.addY(a(R[Z],F[Z],$[Z],X[Z],ae)));const me=(-ue-Math.sqrt(ne))/(2*oe);0<me&&me<1&&(Z===0&&this.addX(a(R[Z],F[Z],$[Z],X[Z],me)),Z===1&&this.addY(a(R[Z],F[Z],$[Z],X[Z],me)))}},t.prototype.addQuad=function(e,i,s,l,b,E){const k=e+.6666666666666666*(s-e),M=i+2/3*(l-i),R=k+1/3*(b-e),F=M+1/3*(E-i);this.addBezier(e,i,k,M,R,F,b,E)};const h=t;function o(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}o.prototype.moveTo=function(e,i){this.commands.push({type:"M",x:e,y:i})},o.prototype.lineTo=function(e,i){this.commands.push({type:"L",x:e,y:i})},o.prototype.curveTo=o.prototype.bezierCurveTo=function(e,i,s,l,b,E){this.commands.push({type:"C",x1:e,y1:i,x2:s,y2:l,x:b,y:E})},o.prototype.quadTo=o.prototype.quadraticCurveTo=function(e,i,s,l){this.commands.push({type:"Q",x1:e,y1:i,x:s,y:l})},o.prototype.close=o.prototype.closePath=function(){this.commands.push({type:"Z"})},o.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof h){const i=e;return this.moveTo(i.x1,i.y1),this.lineTo(i.x2,i.y1),this.lineTo(i.x2,i.y2),this.lineTo(i.x1,i.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},o.prototype.getBoundingBox=function(){const e=new h;let i=0,s=0,l=0,b=0;for(let E=0;E<this.commands.length;E++){const k=this.commands[E];switch(k.type){case"M":e.addPoint(k.x,k.y),i=l=k.x,s=b=k.y;break;case"L":e.addPoint(k.x,k.y),l=k.x,b=k.y;break;case"Q":e.addQuad(l,b,k.x1,k.y1,k.x,k.y),l=k.x,b=k.y;break;case"C":e.addBezier(l,b,k.x1,k.y1,k.x2,k.y2,k.x,k.y),l=k.x,b=k.y;break;case"Z":l=i,b=s;break;default:throw new Error("Unexpected path command "+k.type)}}return e.isEmpty()&&e.addPoint(0,0),e},o.prototype.draw=function(e){e.beginPath();for(let i=0;i<this.commands.length;i+=1){const s=this.commands[i];s.type==="M"?e.moveTo(s.x,s.y):s.type==="L"?e.lineTo(s.x,s.y):s.type==="C"?e.bezierCurveTo(s.x1,s.y1,s.x2,s.y2,s.x,s.y):s.type==="Q"?e.quadraticCurveTo(s.x1,s.y1,s.x,s.y):s.type==="Z"&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},o.prototype.toPathData=function(e){function i(b){return Math.round(b)===b?""+Math.round(b):b.toFixed(e)}function s(){let b="";for(let E=0;E<arguments.length;E+=1){const k=arguments[E];k>=0&&E>0&&(b+=" "),b+=i(k)}return b}e=e!==void 0?e:2;let l="";for(let b=0;b<this.commands.length;b+=1){const E=this.commands[b];E.type==="M"?l+="M"+s(E.x,E.y):E.type==="L"?l+="L"+s(E.x,E.y):E.type==="C"?l+="C"+s(E.x1,E.y1,E.x2,E.y2,E.x,E.y):E.type==="Q"?l+="Q"+s(E.x1,E.y1,E.x,E.y):E.type==="Z"&&(l+="Z")}return l},o.prototype.toSVG=function(e){let i='<path d="';return i+=this.toPathData(e),i+='"',this.fill&&this.fill!=="black"&&(this.fill===null?i+=' fill="none"':i+=' fill="'+this.fill+'"'),this.stroke&&(i+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),i+="/>",i},o.prototype.toDOMElement=function(e){const i=this.toPathData(e),s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",i),s};const r=o;function n(e){throw new Error(e)}function _(e,i){e||n(i)}const g={fail:n,argument:_,assert:_},w=2147483648,p={},S={},x={};function A(e){return function(){return e}}S.BYTE=function(e){return g.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},x.BYTE=A(1),S.CHAR=function(e){return[e.charCodeAt(0)]},x.CHAR=A(1),S.CHARARRAY=function(e){const i=[];for(let s=0;s<e.length;s+=1)i[s]=e.charCodeAt(s);return i},x.CHARARRAY=function(e){return e.length},S.USHORT=function(e){return[e>>8&255,255&e]},x.USHORT=A(2),S.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},x.SHORT=A(2),S.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},x.UINT24=A(3),S.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},x.ULONG=A(4),S.LONG=function(e){return e>=w&&(e=-(2*w-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},x.LONG=A(4),S.FIXED=S.ULONG,x.FIXED=x.ULONG,S.FWORD=S.SHORT,x.FWORD=x.SHORT,S.UFWORD=S.USHORT,x.UFWORD=x.USHORT,S.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},x.LONGDATETIME=A(8),S.TAG=function(e){return g.argument(e.length===4,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},x.TAG=A(4),S.Card8=S.BYTE,x.Card8=x.BYTE,S.Card16=S.USHORT,x.Card16=x.USHORT,S.OffSize=S.BYTE,x.OffSize=x.BYTE,S.SID=S.USHORT,x.SID=x.USHORT,S.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?S.NUMBER16(e):S.NUMBER32(e)},x.NUMBER=function(e){return S.NUMBER(e).length},S.NUMBER16=function(e){return[28,e>>8&255,255&e]},x.NUMBER16=A(3),S.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},x.NUMBER32=A(5),S.REAL=function(e){let i=e.toString();const s=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(i);if(s){const E=parseFloat("1e"+((s[2]?+s[2]:0)+s[1].length));i=(Math.round(e*E)/E).toString()}let l="";for(let E=0,k=i.length;E<k;E+=1){const M=i[E];l+=M==="e"?i[++E]==="-"?"c":"b":M==="."?"a":M==="-"?"e":M}l+=1&l.length?"f":"ff";const b=[30];for(let E=0,k=l.length;E<k;E+=2)b.push(parseInt(l.substr(E,2),16));return b},x.REAL=function(e){return S.REAL(e).length},S.NAME=S.CHARARRAY,x.NAME=x.CHARARRAY,S.STRING=S.CHARARRAY,x.STRING=x.CHARARRAY,p.UTF8=function(e,i,s){const l=[],b=s;for(let E=0;E<b;E++,i+=1)l[E]=e.getUint8(i);return String.fromCharCode.apply(null,l)},p.UTF16=function(e,i,s){const l=[],b=s/2;for(let E=0;E<b;E++,i+=2)l[E]=e.getUint16(i);return String.fromCharCode.apply(null,l)},S.UTF16=function(e){const i=[];for(let s=0;s<e.length;s+=1){const l=e.charCodeAt(s);i[i.length]=l>>8&255,i[i.length]=255&l}return i},x.UTF16=function(e){return 2*e.length};const T={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};p.MACSTRING=function(e,i,s,l){const b=T[l];if(b===void 0)return;let E="";for(let k=0;k<s;k++){const M=e.getUint8(i+k);E+=M<=127?String.fromCharCode(M):b[127&M]}return E};const B=typeof WeakMap=="function"&&new WeakMap;let U;function D(e){return e>=-128&&e<=127}function H(e,i,s){let l=0;const b=e.length;for(;i<b&&l<64&&e[i]===0;)++i,++l;return s.push(128|l-1),i}function L(e,i,s){let l=0;const b=e.length;let E=i;for(;E<b&&l<64;){const k=e[E];if(!D(k)||k===0&&E+1<b&&e[E+1]===0)break;++E,++l}s.push(l-1);for(let k=i;k<E;++k)s.push(e[k]+256&255);return E}function O(e,i,s){let l=0;const b=e.length;let E=i;for(;E<b&&l<64;){const k=e[E];if(k===0||D(k)&&E+1<b&&D(e[E+1]))break;++E,++l}s.push(64|l-1);for(let k=i;k<E;++k){const M=e[k];s.push(M+65536>>8&255,M+256&255)}return E}S.MACSTRING=function(e,i){const s=function(b){if(!U){U={};for(let R in T)U[R]=new String(R)}const E=U[b];if(E===void 0)return;if(B){const R=B.get(E);if(R!==void 0)return R}const k=T[b];if(k===void 0)return;const M={};for(let R=0;R<k.length;R++)M[k.charCodeAt(R)]=R+128;return B&&B.set(E,M),M}(i);if(s===void 0)return;const l=[];for(let b=0;b<e.length;b++){let E=e.charCodeAt(b);if(E>=128&&(E=s[E],E===void 0))return;l[b]=E}return l},x.MACSTRING=function(e,i){const s=S.MACSTRING(e,i);return s!==void 0?s.length:0},S.VARDELTAS=function(e){let i=0;const s=[];for(;i<e.length;){const l=e[i];i=l===0?H(e,i,s):l>=-128&&l<=127?L(e,i,s):O(e,i,s)}return s},S.INDEX=function(e){let i=1;const s=[i],l=[];for(let M=0;M<e.length;M+=1){const R=S.OBJECT(e[M]);Array.prototype.push.apply(l,R),i+=R.length,s.push(i)}if(l.length===0)return[0,0];const b=[],E=1+Math.floor(Math.log(i)/Math.log(2))/8|0,k=[void 0,S.BYTE,S.USHORT,S.UINT24,S.ULONG][E];for(let M=0;M<s.length;M+=1){const R=k(s[M]);Array.prototype.push.apply(b,R)}return Array.prototype.concat(S.Card16(e.length),S.OffSize(E),b,l)},x.INDEX=function(e){return S.INDEX(e).length},S.DICT=function(e){let i=[];const s=Object.keys(e),l=s.length;for(let b=0;b<l;b+=1){const E=parseInt(s[b],0),k=e[E];i=i.concat(S.OPERAND(k.value,k.type)),i=i.concat(S.OPERATOR(E))}return i},x.DICT=function(e){return S.DICT(e).length},S.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},S.OPERAND=function(e,i){let s=[];if(Array.isArray(i))for(let l=0;l<i.length;l+=1)g.argument(e.length===i.length,"Not enough arguments given for type"+i),s=s.concat(S.OPERAND(e[l],i[l]));else if(i==="SID")s=s.concat(S.NUMBER(e));else if(i==="offset")s=s.concat(S.NUMBER32(e));else if(i==="number")s=s.concat(S.NUMBER(e));else{if(i!=="real")throw new Error("Unknown operand type "+i);s=s.concat(S.REAL(e))}return s},S.OP=S.BYTE,x.OP=x.BYTE;const I=typeof WeakMap=="function"&&new WeakMap;function P(e,i,s){for(let l=0;l<i.length;l+=1){const b=i[l];this[b.name]=b.value}if(this.tableName=e,this.fields=i,s){const l=Object.keys(s);for(let b=0;b<l.length;b+=1){const E=l[b],k=s[E];this[E]!==void 0&&(this[E]=k)}}}function Q(e,i,s){s===void 0&&(s=i.length);const l=new Array(i.length+1);l[0]={name:e+"Count",type:"USHORT",value:s};for(let b=0;b<i.length;b++)l[b+1]={name:e+b,type:"USHORT",value:i[b]};return l}function N(e,i,s){const l=i.length,b=new Array(l+1);b[0]={name:e+"Count",type:"USHORT",value:l};for(let E=0;E<l;E++)b[E+1]={name:e+E,type:"TABLE",value:s(i[E],E)};return b}function K(e,i,s){const l=i.length;let b=[];b[0]={name:e+"Count",type:"USHORT",value:l};for(let E=0;E<l;E++)b=b.concat(s(i[E],E));return b}function V(e){e.format===1?P.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Q("glyph",e.glyphs))):g.assert(!1,"Can't create coverage table format 2 yet.")}function re(e){P.call(this,"scriptListTable",K("scriptRecord",e,function(i,s){const l=i.script;let b=l.defaultLangSys;return g.assert(!!b,"Unable to write GSUB: script "+i.tag+" has no default language system."),[{name:"scriptTag"+s,type:"TAG",value:i.tag},{name:"script"+s,type:"TABLE",value:new P("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new P("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:b.reqFeatureIndex}].concat(Q("featureIndex",b.featureIndexes)))}].concat(K("langSys",l.langSysRecords,function(E,k){const M=E.langSys;return[{name:"langSysTag"+k,type:"TAG",value:E.tag},{name:"langSys"+k,type:"TABLE",value:new P("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:M.reqFeatureIndex}].concat(Q("featureIndex",M.featureIndexes)))}]})))}]}))}function j(e){P.call(this,"featureListTable",K("featureRecord",e,function(i,s){const l=i.feature;return[{name:"featureTag"+s,type:"TAG",value:i.tag},{name:"feature"+s,type:"TABLE",value:new P("featureTable",[{name:"featureParams",type:"USHORT",value:l.featureParams}].concat(Q("lookupListIndex",l.lookupListIndexes)))}]}))}function z(e,i){P.call(this,"lookupListTable",N("lookup",e,function(s){let l=i[s.lookupType];return g.assert(!!l,"Unable to write GSUB lookup type "+s.lookupType+" tables."),new P("lookupTable",[{name:"lookupType",type:"USHORT",value:s.lookupType},{name:"lookupFlag",type:"USHORT",value:s.lookupFlag}].concat(N("subtable",s.subtables,l)))}))}S.CHARSTRING=function(e){if(I){const l=I.get(e);if(l!==void 0)return l}let i=[];const s=e.length;for(let l=0;l<s;l+=1){const b=e[l];i=i.concat(S[b.type](b.value))}return I&&I.set(e,i),i},x.CHARSTRING=function(e){return S.CHARSTRING(e).length},S.OBJECT=function(e){const i=S[e.type];return g.argument(i!==void 0,"No encoding function for type "+e.type),i(e.value)},x.OBJECT=function(e){const i=x[e.type];return g.argument(i!==void 0,"No sizeOf function for type "+e.type),i(e.value)},S.TABLE=function(e){let i=[];const s=e.fields.length,l=[],b=[];for(let E=0;E<s;E+=1){const k=e.fields[E],M=S[k.type];g.argument(M!==void 0,"No encoding function for field type "+k.type+" ("+k.name+")");let R=e[k.name];R===void 0&&(R=k.value);const F=M(R);k.type==="TABLE"?(b.push(i.length),i=i.concat([0,0]),l.push(F)):i=i.concat(F)}for(let E=0;E<l.length;E+=1){const k=b[E],M=i.length;g.argument(M<65536,"Table "+e.tableName+" too big."),i[k]=M>>8,i[k+1]=255&M,i=i.concat(l[E])}return i},x.TABLE=function(e){let i=0;const s=e.fields.length;for(let l=0;l<s;l+=1){const b=e.fields[l],E=x[b.type];g.argument(E!==void 0,"No sizeOf function for field type "+b.type+" ("+b.name+")");let k=e[b.name];k===void 0&&(k=b.value),i+=E(k),b.type==="TABLE"&&(i+=2)}return i},S.RECORD=S.TABLE,x.RECORD=x.TABLE,S.LITERAL=function(e){return e},x.LITERAL=function(e){return e.length},P.prototype.encode=function(){return S.TABLE(this)},P.prototype.sizeOf=function(){return x.TABLE(this)},V.prototype=Object.create(P.prototype),V.prototype.constructor=V,re.prototype=Object.create(P.prototype),re.prototype.constructor=re,j.prototype=Object.create(P.prototype),j.prototype.constructor=j,z.prototype=Object.create(P.prototype),z.prototype.constructor=z;const W={Table:P,Record:P,Coverage:V,ScriptList:re,FeatureList:j,LookupList:z,ushortList:Q,tableList:N,recordList:K};function ee(e,i){return e.getUint8(i)}function se(e,i){return e.getUint16(i,!1)}function Se(e,i){return e.getUint32(i,!1)}function ce(e,i){return e.getInt16(i,!1)+e.getUint16(i+2,!1)/65535}const ke={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function J(e,i){this.data=e,this.offset=i,this.relativeOffset=0}J.prototype.parseByte=function(){const e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},J.prototype.parseChar=function(){const e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},J.prototype.parseCard8=J.prototype.parseByte,J.prototype.parseUShort=function(){const e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},J.prototype.parseCard16=J.prototype.parseUShort,J.prototype.parseSID=J.prototype.parseUShort,J.prototype.parseOffset16=J.prototype.parseUShort,J.prototype.parseShort=function(){const e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},J.prototype.parseF2Dot14=function(){const e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},J.prototype.parseULong=function(){const e=Se(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},J.prototype.parseOffset32=J.prototype.parseULong,J.prototype.parseFixed=function(){const e=ce(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},J.prototype.parseString=function(e){const i=this.data,s=this.offset+this.relativeOffset;let l="";this.relativeOffset+=e;for(let b=0;b<e;b++)l+=String.fromCharCode(i.getUint8(s+b));return l},J.prototype.parseTag=function(){return this.parseString(4)},J.prototype.parseLongDateTime=function(){let e=Se(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},J.prototype.parseVersion=function(e){const i=se(this.data,this.offset+this.relativeOffset),s=se(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,e===void 0&&(e=4096),i+s/e/10},J.prototype.skip=function(e,i){i===void 0&&(i=1),this.relativeOffset+=ke[e]*i},J.prototype.parseULongList=function(e){e===void 0&&(e=this.parseULong());const i=new Array(e),s=this.data;let l=this.offset+this.relativeOffset;for(let b=0;b<e;b++)i[b]=s.getUint32(l),l+=4;return this.relativeOffset+=4*e,i},J.prototype.parseOffset16List=J.prototype.parseUShortList=function(e){e===void 0&&(e=this.parseUShort());const i=new Array(e),s=this.data;let l=this.offset+this.relativeOffset;for(let b=0;b<e;b++)i[b]=s.getUint16(l),l+=2;return this.relativeOffset+=2*e,i},J.prototype.parseShortList=function(e){const i=new Array(e),s=this.data;let l=this.offset+this.relativeOffset;for(let b=0;b<e;b++)i[b]=s.getInt16(l),l+=2;return this.relativeOffset+=2*e,i},J.prototype.parseByteList=function(e){const i=new Array(e),s=this.data;let l=this.offset+this.relativeOffset;for(let b=0;b<e;b++)i[b]=s.getUint8(l++);return this.relativeOffset+=e,i},J.prototype.parseList=function(e,i){i||(i=e,e=this.parseUShort());const s=new Array(e);for(let l=0;l<e;l++)s[l]=i.call(this);return s},J.prototype.parseList32=function(e,i){i||(i=e,e=this.parseULong());const s=new Array(e);for(let l=0;l<e;l++)s[l]=i.call(this);return s},J.prototype.parseRecordList=function(e,i){i||(i=e,e=this.parseUShort());const s=new Array(e),l=Object.keys(i);for(let b=0;b<e;b++){const E={};for(let k=0;k<l.length;k++){const M=l[k],R=i[M];E[M]=R.call(this)}s[b]=E}return s},J.prototype.parseRecordList32=function(e,i){i||(i=e,e=this.parseULong());const s=new Array(e),l=Object.keys(i);for(let b=0;b<e;b++){const E={};for(let k=0;k<l.length;k++){const M=l[k],R=i[M];E[M]=R.call(this)}s[b]=E}return s},J.prototype.parseStruct=function(e){if(typeof e=="function")return e.call(this);{const i=Object.keys(e),s={};for(let l=0;l<i.length;l++){const b=i[l],E=e[b];s[b]=E.call(this)}return s}},J.prototype.parseValueRecord=function(e){if(e===void 0&&(e=this.parseUShort()),e===0)return;const i={};return 1&e&&(i.xPlacement=this.parseShort()),2&e&&(i.yPlacement=this.parseShort()),4&e&&(i.xAdvance=this.parseShort()),8&e&&(i.yAdvance=this.parseShort()),16&e&&(i.xPlaDevice=void 0,this.parseShort()),32&e&&(i.yPlaDevice=void 0,this.parseShort()),64&e&&(i.xAdvDevice=void 0,this.parseShort()),128&e&&(i.yAdvDevice=void 0,this.parseShort()),i},J.prototype.parseValueRecordList=function(){const e=this.parseUShort(),i=this.parseUShort(),s=new Array(i);for(let l=0;l<i;l++)s[l]=this.parseValueRecord(e);return s},J.prototype.parsePointer=function(e){const i=this.parseOffset16();if(i>0)return new J(this.data,this.offset+i).parseStruct(e)},J.prototype.parsePointer32=function(e){const i=this.parseOffset32();if(i>0)return new J(this.data,this.offset+i).parseStruct(e)},J.prototype.parseListOfLists=function(e){const i=this.parseOffset16List(),s=i.length,l=this.relativeOffset,b=new Array(s);for(let E=0;E<s;E++){const k=i[E];if(k!==0)if(this.relativeOffset=k,e){const M=this.parseOffset16List(),R=new Array(M.length);for(let F=0;F<M.length;F++)this.relativeOffset=k+M[F],R[F]=e.call(this);b[E]=R}else b[E]=this.parseUShortList();else b[E]=void 0}return this.relativeOffset=l,b},J.prototype.parseCoverage=function(){const e=this.offset+this.relativeOffset,i=this.parseUShort(),s=this.parseUShort();if(i===1)return{format:1,glyphs:this.parseUShortList(s)};if(i===2){const l=new Array(s);for(let b=0;b<s;b++)l[b]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:l}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},J.prototype.parseClassDef=function(){const e=this.offset+this.relativeOffset,i=this.parseUShort();if(i===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(i===2)return{format:2,ranges:this.parseRecordList({start:J.uShort,end:J.uShort,classId:J.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},J.list=function(e,i){return function(){return this.parseList(e,i)}},J.list32=function(e,i){return function(){return this.parseList32(e,i)}},J.recordList=function(e,i){return function(){return this.parseRecordList(e,i)}},J.recordList32=function(e,i){return function(){return this.parseRecordList32(e,i)}},J.pointer=function(e){return function(){return this.parsePointer(e)}},J.pointer32=function(e){return function(){return this.parsePointer32(e)}},J.tag=J.prototype.parseTag,J.byte=J.prototype.parseByte,J.uShort=J.offset16=J.prototype.parseUShort,J.uShortList=J.prototype.parseUShortList,J.uLong=J.offset32=J.prototype.parseULong,J.uLongList=J.prototype.parseULongList,J.struct=J.prototype.parseStruct,J.coverage=J.prototype.parseCoverage,J.classDef=J.prototype.parseClassDef;const Ee={reserved:J.uShort,reqFeatureIndex:J.uShort,featureIndexes:J.uShortList};J.prototype.parseScriptList=function(){return this.parsePointer(J.recordList({tag:J.tag,script:J.pointer({defaultLangSys:J.pointer(Ee),langSysRecords:J.recordList({tag:J.tag,langSys:J.pointer(Ee)})})}))||[]},J.prototype.parseFeatureList=function(){return this.parsePointer(J.recordList({tag:J.tag,feature:J.pointer({featureParams:J.offset16,lookupListIndexes:J.uShortList})}))||[]},J.prototype.parseLookupList=function(e){return this.parsePointer(J.list(J.pointer(function(){const i=this.parseUShort();g.argument(1<=i&&i<=9,"GPOS/GSUB lookup type "+i+" unknown.");const s=this.parseUShort(),l=16&s;return{lookupType:i,lookupFlag:s,subtables:this.parseList(J.pointer(e[i])),markFilteringSet:l?this.parseUShort():void 0}})))||[]},J.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){const e=this.parseUShort(),i=this.parseUShort();return g.argument(e===1&&i<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:J.offset32,featureTableSubstitutionOffset:J.offset32})})||[]};const de={getByte:ee,getCard8:ee,getUShort:se,getCard16:se,getShort:function(e,i){return e.getInt16(i,!1)},getULong:Se,getFixed:ce,getTag:function(e,i){let s="";for(let l=i;l<i+4;l+=1)s+=String.fromCharCode(e.getInt8(l));return s},getOffset:function(e,i,s){let l=0;for(let b=0;b<s;b+=1)l<<=8,l+=e.getUint8(i+b);return l},getBytes:function(e,i,s){const l=[];for(let b=i;b<s;b+=1)l.push(e.getUint8(b));return l},bytesToString:function(e){let i="";for(let s=0;s<e.length;s+=1)i+=String.fromCharCode(e[s]);return i},Parser:J};function st(e,i,s){e.segments.push({end:i,start:i,delta:-(i-s),offset:0,glyphIndex:s})}const Re=function(e,i){const s={};s.version=de.getUShort(e,i),g.argument(s.version===0,"cmap table version should be 0."),s.numTables=de.getUShort(e,i+2);let l=-1;for(let E=s.numTables-1;E>=0;E-=1){const k=de.getUShort(e,i+4+8*E),M=de.getUShort(e,i+4+8*E+2);if(k===3&&(M===0||M===1||M===10)){l=de.getULong(e,i+4+8*E+4);break}}if(l===-1)throw new Error("No valid cmap sub-tables found.");const b=new de.Parser(e,i+l);if(s.format=b.parseUShort(),s.format===12)(function(E,k){let M;k.parseUShort(),E.length=k.parseULong(),E.language=k.parseULong(),E.groupCount=M=k.parseULong(),E.glyphIndexMap={};for(let R=0;R<M;R+=1){const F=k.parseULong(),$=k.parseULong();let X=k.parseULong();for(let Z=F;Z<=$;Z+=1)E.glyphIndexMap[Z]=X,X++}})(s,b);else{if(s.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+s.format+").");(function(E,k,M,R,F){let $;E.length=k.parseUShort(),E.language=k.parseUShort(),E.segCount=$=k.parseUShort()>>1,k.skip("uShort",3),E.glyphIndexMap={};const X=new de.Parser(M,R+F+14),Z=new de.Parser(M,R+F+16+2*$),ue=new de.Parser(M,R+F+16+4*$),oe=new de.Parser(M,R+F+16+6*$);let ye=R+F+16+8*$;for(let ne=0;ne<$-1;ne+=1){let ae;const me=X.parseUShort(),be=Z.parseUShort(),Le=ue.parseShort(),_e=oe.parseUShort();for(let he=be;he<=me;he+=1)_e!==0?(ye=oe.offset+oe.relativeOffset-2,ye+=_e,ye+=2*(he-be),ae=de.getUShort(M,ye),ae!==0&&(ae=ae+Le&65535)):ae=he+Le&65535,E.glyphIndexMap[he]=ae}})(s,b,e,i,l)}return s},te=function(e){let i,s=!0;for(i=e.length-1;i>0;i-=1)if(e.get(i).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),s=!1;break}let l=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:s?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:s?12:20}];s||(l=l.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),l=l.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);const b=new W.Table("cmap",l);for(b.segments=[],i=0;i<e.length;i+=1){const ue=e.get(i);for(let oe=0;oe<ue.unicodes.length;oe+=1)st(b,ue.unicodes[oe],i);b.segments=b.segments.sort(function(oe,ye){return oe.start-ye.start})}(function(ue){ue.segments.push({end:65535,start:65535,delta:1,offset:0})})(b);const E=b.segments.length;let k=0,M=[],R=[],F=[],$=[],X=[],Z=[];for(i=0;i<E;i+=1){const ue=b.segments[i];ue.end<=65535&&ue.start<=65535?(M=M.concat({name:"end_"+i,type:"USHORT",value:ue.end}),R=R.concat({name:"start_"+i,type:"USHORT",value:ue.start}),F=F.concat({name:"idDelta_"+i,type:"SHORT",value:ue.delta}),$=$.concat({name:"idRangeOffset_"+i,type:"USHORT",value:ue.offset}),ue.glyphId!==void 0&&(X=X.concat({name:"glyph_"+i,type:"USHORT",value:ue.glyphId}))):k+=1,s||ue.glyphIndex===void 0||(Z=Z.concat({name:"cmap12Start_"+i,type:"ULONG",value:ue.start}),Z=Z.concat({name:"cmap12End_"+i,type:"ULONG",value:ue.end}),Z=Z.concat({name:"cmap12Glyph_"+i,type:"ULONG",value:ue.glyphIndex}))}if(b.segCountX2=2*(E-k),b.searchRange=2*Math.pow(2,Math.floor(Math.log(E-k)/Math.log(2))),b.entrySelector=Math.log(b.searchRange/2)/Math.log(2),b.rangeShift=b.segCountX2-b.searchRange,b.fields=b.fields.concat(M),b.fields.push({name:"reservedPad",type:"USHORT",value:0}),b.fields=b.fields.concat(R),b.fields=b.fields.concat(F),b.fields=b.fields.concat($),b.fields=b.fields.concat(X),b.cmap4Length=14+2*M.length+2+2*R.length+2*F.length+2*$.length+2*X.length,!s){const ue=16+4*Z.length;b.cmap12Offset=20+b.cmap4Length,b.fields=b.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:ue},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Z.length/3}]),b.fields=b.fields.concat(Z)}return b},xe=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Ce=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Ae=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Pe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ne(e){this.font=e}function nt(e){this.cmap=e}function Qe(e,i){this.encoding=e,this.charset=i}function je(e){switch(e.version){case 1:this.names=Pe.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(let i=0;i<e.numberOfGlyphs;i++)e.glyphNameIndex[i]<Pe.length?this.names[i]=Pe[e.glyphNameIndex[i]]:this.names[i]=e.names[e.glyphNameIndex[i]-Pe.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(let i=0;i<e.numberOfGlyphs;i++)this.names[i]=Pe[i+e.glyphNameIndex[i]];break;default:this.names=[]}}Ne.prototype.charToGlyphIndex=function(e){const i=e.charCodeAt(0),s=this.font.glyphs;if(s)for(let l=0;l<s.length;l+=1){const b=s.get(l);for(let E=0;E<b.unicodes.length;E+=1)if(b.unicodes[E]===i)return l}return null},nt.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.charCodeAt(0)]||0},Qe.prototype.charToGlyphIndex=function(e){const i=e.charCodeAt(0),s=this.encoding[i];return this.charset.indexOf(s)},je.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},je.prototype.glyphIndexToName=function(e){return this.names[e]};const Me=function(e,i,s,l,b){e.beginPath(),e.moveTo(i,s),e.lineTo(l,b),e.stroke()};function Ve(e,i,s,l,b){let E;return(i&l)>0?(E=e.parseByte(),(i&b)==0&&(E=-E),E=s+E):E=(i&b)>0?s:s+e.parseShort(),E}function St(e,i,s){const l=new de.Parser(i,s);let b,E;if(e.numberOfContours=l.parseShort(),e._xMin=l.parseShort(),e._yMin=l.parseShort(),e._xMax=l.parseShort(),e._yMax=l.parseShort(),e.numberOfContours>0){const k=e.endPointIndices=[];for(let R=0;R<e.numberOfContours;R+=1)k.push(l.parseUShort());e.instructionLength=l.parseUShort(),e.instructions=[];for(let R=0;R<e.instructionLength;R+=1)e.instructions.push(l.parseByte());const M=k[k.length-1]+1;b=[];for(let R=0;R<M;R+=1)if(E=l.parseByte(),b.push(E),(8&E)>0){const F=l.parseByte();for(let $=0;$<F;$+=1)b.push(E),R+=1}if(g.argument(b.length===M,"Bad flags."),k.length>0){const R=[];let F;if(M>0){for(let Z=0;Z<M;Z+=1)E=b[Z],F={},F.onCurve=!!(1&E),F.lastPointOfContour=k.indexOf(Z)>=0,R.push(F);let $=0;for(let Z=0;Z<M;Z+=1)E=b[Z],F=R[Z],F.x=Ve(l,E,$,2,16),$=F.x;let X=0;for(let Z=0;Z<M;Z+=1)E=b[Z],F=R[Z],F.y=Ve(l,E,X,4,32),X=F.y}e.points=R}else e.points=[]}else if(e.numberOfContours===0)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];let k=!0;for(;k;){b=l.parseUShort();const M={glyphIndex:l.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&b)>0?(2&b)>0?(M.dx=l.parseShort(),M.dy=l.parseShort()):M.matchedPoints=[l.parseUShort(),l.parseUShort()]:(2&b)>0?(M.dx=l.parseChar(),M.dy=l.parseChar()):M.matchedPoints=[l.parseByte(),l.parseByte()],(8&b)>0?M.xScale=M.yScale=l.parseF2Dot14():(64&b)>0?(M.xScale=l.parseF2Dot14(),M.yScale=l.parseF2Dot14()):(128&b)>0&&(M.xScale=l.parseF2Dot14(),M.scale01=l.parseF2Dot14(),M.scale10=l.parseF2Dot14(),M.yScale=l.parseF2Dot14()),e.components.push(M),k=!!(32&b)}if(256&b){e.instructionLength=l.parseUShort(),e.instructions=[];for(let M=0;M<e.instructionLength;M+=1)e.instructions.push(l.parseByte())}}}function ot(e,i){const s=[];for(let l=0;l<e.length;l+=1){const b=e[l],E={x:i.xScale*b.x+i.scale01*b.y+i.dx,y:i.scale10*b.x+i.yScale*b.y+i.dy,onCurve:b.onCurve,lastPointOfContour:b.lastPointOfContour};s.push(E)}return s}function dt(e){const i=new r;if(!e)return i;const s=function(l){const b=[];let E=[];for(let k=0;k<l.length;k+=1){const M=l[k];E.push(M),M.lastPointOfContour&&(b.push(E),E=[])}return g.argument(E.length===0,"There are still points left in the current contour."),b}(e);for(let l=0;l<s.length;++l){const b=s[l];let E=null,k=b[b.length-1],M=b[0];if(k.onCurve)i.moveTo(k.x,k.y);else if(M.onCurve)i.moveTo(M.x,M.y);else{const R={x:.5*(k.x+M.x),y:.5*(k.y+M.y)};i.moveTo(R.x,R.y)}for(let R=0;R<b.length;++R)if(E=k,k=M,M=b[(R+1)%b.length],k.onCurve)i.lineTo(k.x,k.y);else{let F=E,$=M;E.onCurve||(F={x:.5*(k.x+E.x),y:.5*(k.y+E.y)},i.lineTo(F.x,F.y)),M.onCurve||($={x:.5*(k.x+M.x),y:.5*(k.y+M.y)}),i.lineTo(F.x,F.y),i.quadraticCurveTo(k.x,k.y,$.x,$.y)}i.closePath()}return i}function Et(e,i){if(i.isComposite)for(let s=0;s<i.components.length;s+=1){const l=i.components[s],b=e.get(l.glyphIndex);if(b.getPath(),b.points){let E;if(l.matchedPoints===void 0)E=ot(b.points,l);else{if(l.matchedPoints[0]>i.points.length-1||l.matchedPoints[1]>b.points.length-1)throw Error("Matched points out of range in "+i.name);const k=i.points[l.matchedPoints[0]];let M=b.points[l.matchedPoints[1]];const R={xScale:l.xScale,scale01:l.scale01,scale10:l.scale10,yScale:l.yScale,dx:0,dy:0};M=ot([M],R)[0],R.dx=k.x-M.x,R.dy=k.y-M.y,E=ot(b.points,R)}i.points=i.points.concat(E)}}return dt(i.points)}const mi={getPath:dt,parse:function(e,i,s,l){const b=new pt.GlyphSet(l);for(let E=0;E<s.length-1;E+=1){const k=s[E];k!==s[E+1]?b.push(E,pt.ttfGlyphLoader(l,E,St,e,i+k,Et)):b.push(E,pt.glyphLoader(l,E))}return b}};function et(e){this.bindConstructorValues(e)}et.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||e.unicode!==void 0?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",function(i,s){let l=s||new r;return{configurable:!0,get:function(){return typeof l=="function"&&(l=l()),l},set:function(b){l=b}}}(0,e.path))},et.prototype.addUnicode=function(e){this.unicodes.length===0&&(this.unicode=e),this.unicodes.push(e)},et.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},et.prototype.getPath=function(e,i,s,l,b){let E,k;e=e!==void 0?e:0,i=i!==void 0?i:0,s=s!==void 0?s:72,l||(l={});let M=l.xScale,R=l.yScale;if(l.hinting&&b&&b.hinting&&(k=this.path&&b.hinting.exec(this,s)),k)E=mi.getPath(k).commands,e=Math.round(e),i=Math.round(i),M=R=1;else{E=this.path.commands;const $=1/this.path.unitsPerEm*s;M===void 0&&(M=$),R===void 0&&(R=$)}const F=new r;for(let $=0;$<E.length;$+=1){const X=E[$];X.type==="M"?F.moveTo(e+X.x*M,i+-X.y*R):X.type==="L"?F.lineTo(e+X.x*M,i+-X.y*R):X.type==="Q"?F.quadraticCurveTo(e+X.x1*M,i+-X.y1*R,e+X.x*M,i+-X.y*R):X.type==="C"?F.curveTo(e+X.x1*M,i+-X.y1*R,e+X.x2*M,i+-X.y2*R,e+X.x*M,i+-X.y*R):X.type==="Z"&&F.closePath()}return F},et.prototype.getContours=function(){if(this.points===void 0)return[];const e=[];let i=[];for(let s=0;s<this.points.length;s+=1){const l=this.points[s];i.push(l),l.lastPointOfContour&&(e.push(i),i=[])}return g.argument(i.length===0,"There are still points left in the current contour."),e},et.prototype.getMetrics=function(){const e=this.path.commands,i=[],s=[];for(let b=0;b<e.length;b+=1){const E=e[b];E.type!=="Z"&&(i.push(E.x),s.push(E.y)),E.type!=="Q"&&E.type!=="C"||(i.push(E.x1),s.push(E.y1)),E.type==="C"&&(i.push(E.x2),s.push(E.y2))}const l={xMin:Math.min.apply(null,i),yMin:Math.min.apply(null,s),xMax:Math.max.apply(null,i),yMax:Math.max.apply(null,s),leftSideBearing:this.leftSideBearing};return isFinite(l.xMin)||(l.xMin=0),isFinite(l.xMax)||(l.xMax=this.advanceWidth),isFinite(l.yMin)||(l.yMin=0),isFinite(l.yMax)||(l.yMax=0),l.rightSideBearing=this.advanceWidth-l.leftSideBearing-(l.xMax-l.xMin),l},et.prototype.draw=function(e,i,s,l,b){this.getPath(i,s,l,b).draw(e)},et.prototype.drawPoints=function(e,i,s,l){function b(F,$,X,Z){const ue=2*Math.PI;e.beginPath();for(let oe=0;oe<F.length;oe+=1)e.moveTo($+F[oe].x*Z,X+F[oe].y*Z),e.arc($+F[oe].x*Z,X+F[oe].y*Z,2,0,ue,!1);e.closePath(),e.fill()}i=i!==void 0?i:0,s=s!==void 0?s:0,l=l!==void 0?l:24;const E=1/this.path.unitsPerEm*l,k=[],M=[],R=this.path;for(let F=0;F<R.commands.length;F+=1){const $=R.commands[F];$.x!==void 0&&k.push({x:$.x,y:-$.y}),$.x1!==void 0&&M.push({x:$.x1,y:-$.y1}),$.x2!==void 0&&M.push({x:$.x2,y:-$.y2})}e.fillStyle="blue",b(k,i,s,E),e.fillStyle="red",b(M,i,s,E)},et.prototype.drawMetrics=function(e,i,s,l){let b;i=i!==void 0?i:0,s=s!==void 0?s:0,l=l!==void 0?l:24,b=1/this.path.unitsPerEm*l,e.lineWidth=1,e.strokeStyle="black",Me(e,i,-1e4,i,1e4),Me(e,-1e4,s,1e4,s);const E=this.xMin||0;let k=this.yMin||0;const M=this.xMax||0;let R=this.yMax||0;const F=this.advanceWidth||0;e.strokeStyle="blue",Me(e,i+E*b,-1e4,i+E*b,1e4),Me(e,i+M*b,-1e4,i+M*b,1e4),Me(e,-1e4,s+-k*b,1e4,s+-k*b),Me(e,-1e4,s+-R*b,1e4,s+-R*b),e.strokeStyle="green",Me(e,i+F*b,-1e4,i+F*b,1e4)};const Lt=et;function kt(e,i,s){Object.defineProperty(e,i,{get:function(){return e.path,e[s]},set:function(l){e[s]=l},enumerable:!0,configurable:!0})}function It(e,i){if(this.font=e,this.glyphs={},Array.isArray(i))for(let s=0;s<i.length;s++)this.glyphs[s]=i[s];this.length=i&&i.length||0}It.prototype.get=function(e){return typeof this.glyphs[e]=="function"&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},It.prototype.push=function(e,i){this.glyphs[e]=i,this.length++};const pt={GlyphSet:It,glyphLoader:function(e,i){return new Lt({index:i,font:e})},ttfGlyphLoader:function(e,i,s,l,b,E){return function(){const k=new Lt({index:i,font:e});return k.path=function(){s(k,l,b);const M=E(e.glyphs,k);return M.unitsPerEm=e.unitsPerEm,M},kt(k,"xMin","_xMin"),kt(k,"xMax","_xMax"),kt(k,"yMin","_yMin"),kt(k,"yMax","_yMax"),k}},cffGlyphLoader:function(e,i,s,l){return function(){const b=new Lt({index:i,font:e});return b.path=function(){const E=s(e,b,l);return E.unitsPerEm=e.unitsPerEm,E},b}}};function yi(e,i){if(e===i)return!0;if(Array.isArray(e)&&Array.isArray(i)){if(e.length!==i.length)return!1;for(let s=0;s<e.length;s+=1)if(!yi(e[s],i[s]))return!1;return!0}return!1}function Pt(e){let i;return i=e.length<1240?107:e.length<33900?1131:32768,i}function at(e,i,s){const l=[],b=[],E=de.getCard16(e,i);let k,M;if(E!==0){const R=de.getByte(e,i+2);k=i+(E+1)*R+2;let F=i+3;for(let $=0;$<E+1;$+=1)l.push(de.getOffset(e,F,R)),F+=R;M=k+l[E]}else M=i+2;for(let R=0;R<l.length-1;R+=1){let F=de.getBytes(e,k+l[R],k+l[R+1]);s&&(F=s(F)),b.push(F)}return{objects:b,startOffset:i,endOffset:M}}function Yr(e,i){let s,l,b,E;if(i===28)return s=e.parseByte(),l=e.parseByte(),s<<8|l;if(i===29)return s=e.parseByte(),l=e.parseByte(),b=e.parseByte(),E=e.parseByte(),s<<24|l<<16|b<<8|E;if(i===30)return function(k){let M="";const R=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(;;){const F=k.parseByte(),$=F>>4,X=15&F;if($===15||(M+=R[$],X===15))break;M+=R[X]}return parseFloat(M)}(e);if(i>=32&&i<=246)return i-139;if(i>=247&&i<=250)return s=e.parseByte(),256*(i-247)+s+108;if(i>=251&&i<=254)return s=e.parseByte(),256*-(i-251)-s-108;throw new Error("Invalid b0 "+i)}function Si(e,i,s){i=i!==void 0?i:0;const l=new de.Parser(e,i),b=[];let E=[];for(s=s!==void 0?s:e.length;l.relativeOffset<s;){let k=l.parseByte();k<=21?(k===12&&(k=1200+l.parseByte()),b.push([k,E]),E=[]):E.push(Yr(l,k))}return function(k){const M={};for(let R=0;R<k.length;R+=1){const F=k[R][0],$=k[R][1];let X;if(X=$.length===1?$[0]:$,M.hasOwnProperty(F)&&!isNaN(M[F]))throw new Error("Object "+M+" already has key "+F);M[F]=X}return M}(b)}function bt(e,i){return i<=390?xe[i]:e[i-391]}function bi(e,i,s){const l={};let b;for(let E=0;E<i.length;E+=1){const k=i[E];if(Array.isArray(k.type)){const M=[];M.length=k.type.length;for(let R=0;R<k.type.length;R++)b=e[k.op]!==void 0?e[k.op][R]:void 0,b===void 0&&(b=k.value!==void 0&&k.value[R]!==void 0?k.value[R]:null),k.type[R]==="SID"&&(b=bt(s,b)),M[R]=b;l[k.name]=M}else b=e[k.op],b===void 0&&(b=k.value!==void 0?k.value:null),k.type==="SID"&&(b=bt(s,b)),l[k.name]=b}return l}const Ci=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],wi=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Zr(e,i){return bi(Si(e,0,e.byteLength),Ci,i)}function xi(e,i,s,l){return bi(Si(e,i,s),wi,l)}function Ei(e,i,s,l){const b=[];for(let E=0;E<s.length;E+=1){const k=Zr(new DataView(new Uint8Array(s[E]).buffer),l);k._subrs=[],k._subrsBias=0;const M=k.private[0],R=k.private[1];if(M!==0&&R!==0){const F=xi(e,R+i,M,l);if(k._defaultWidthX=F.defaultWidthX,k._nominalWidthX=F.nominalWidthX,F.subrs!==0){const $=at(e,R+F.subrs+i);k._subrs=$.objects,k._subrsBias=Pt(k._subrs)}k._privateDict=F}b.push(k)}return b}function Jr(e,i,s){let l,b,E,k;const M=new r,R=[];let F,$,X,Z,ue=0,oe=!1,ye=!1,ne=0,ae=0;if(e.isCIDFont){const _e=e.tables.cff.topDict._fdSelect[i.index],he=e.tables.cff.topDict._fdArray[_e];F=he._subrs,$=he._subrsBias,X=he._defaultWidthX,Z=he._nominalWidthX}else F=e.tables.cff.topDict._subrs,$=e.tables.cff.topDict._subrsBias,X=e.tables.cff.topDict._defaultWidthX,Z=e.tables.cff.topDict._nominalWidthX;let me=X;function be(_e,he){ye&&M.closePath(),M.moveTo(_e,he),ye=!0}function Le(){let _e;_e=R.length%2!=0,_e&&!oe&&(me=R.shift()+Z),ue+=R.length>>1,R.length=0,oe=!0}return function _e(he){let ge,Te,we,Ie,We,qe,Fe,ze,Ue,Ge,He,Ke,Be=0;for(;Be<he.length;){let $e=he[Be];switch(Be+=1,$e){case 1:case 3:case 18:case 23:Le();break;case 4:R.length>1&&!oe&&(me=R.shift()+Z,oe=!0),ae+=R.pop(),be(ne,ae);break;case 5:for(;R.length>0;)ne+=R.shift(),ae+=R.shift(),M.lineTo(ne,ae);break;case 6:for(;R.length>0&&(ne+=R.shift(),M.lineTo(ne,ae),R.length!==0);)ae+=R.shift(),M.lineTo(ne,ae);break;case 7:for(;R.length>0&&(ae+=R.shift(),M.lineTo(ne,ae),R.length!==0);)ne+=R.shift(),M.lineTo(ne,ae);break;case 8:for(;R.length>0;)l=ne+R.shift(),b=ae+R.shift(),E=l+R.shift(),k=b+R.shift(),ne=E+R.shift(),ae=k+R.shift(),M.curveTo(l,b,E,k,ne,ae);break;case 10:We=R.pop()+$,qe=F[We],qe&&_e(qe);break;case 11:return;case 12:switch($e=he[Be],Be+=1,$e){case 35:l=ne+R.shift(),b=ae+R.shift(),E=l+R.shift(),k=b+R.shift(),Fe=E+R.shift(),ze=k+R.shift(),Ue=Fe+R.shift(),Ge=ze+R.shift(),He=Ue+R.shift(),Ke=Ge+R.shift(),ne=He+R.shift(),ae=Ke+R.shift(),R.shift(),M.curveTo(l,b,E,k,Fe,ze),M.curveTo(Ue,Ge,He,Ke,ne,ae);break;case 34:l=ne+R.shift(),b=ae,E=l+R.shift(),k=b+R.shift(),Fe=E+R.shift(),ze=k,Ue=Fe+R.shift(),Ge=k,He=Ue+R.shift(),Ke=ae,ne=He+R.shift(),M.curveTo(l,b,E,k,Fe,ze),M.curveTo(Ue,Ge,He,Ke,ne,ae);break;case 36:l=ne+R.shift(),b=ae+R.shift(),E=l+R.shift(),k=b+R.shift(),Fe=E+R.shift(),ze=k,Ue=Fe+R.shift(),Ge=k,He=Ue+R.shift(),Ke=Ge+R.shift(),ne=He+R.shift(),M.curveTo(l,b,E,k,Fe,ze),M.curveTo(Ue,Ge,He,Ke,ne,ae);break;case 37:l=ne+R.shift(),b=ae+R.shift(),E=l+R.shift(),k=b+R.shift(),Fe=E+R.shift(),ze=k+R.shift(),Ue=Fe+R.shift(),Ge=ze+R.shift(),He=Ue+R.shift(),Ke=Ge+R.shift(),Math.abs(He-ne)>Math.abs(Ke-ae)?ne=He+R.shift():ae=Ke+R.shift(),M.curveTo(l,b,E,k,Fe,ze),M.curveTo(Ue,Ge,He,Ke,ne,ae);break;default:console.log("Glyph "+i.index+": unknown operator 1200"+$e),R.length=0}break;case 14:R.length>0&&!oe&&(me=R.shift()+Z,oe=!0),ye&&(M.closePath(),ye=!1);break;case 19:case 20:Le(),Be+=ue+7>>3;break;case 21:R.length>2&&!oe&&(me=R.shift()+Z,oe=!0),ae+=R.pop(),ne+=R.pop(),be(ne,ae);break;case 22:R.length>1&&!oe&&(me=R.shift()+Z,oe=!0),ne+=R.pop(),be(ne,ae);break;case 24:for(;R.length>2;)l=ne+R.shift(),b=ae+R.shift(),E=l+R.shift(),k=b+R.shift(),ne=E+R.shift(),ae=k+R.shift(),M.curveTo(l,b,E,k,ne,ae);ne+=R.shift(),ae+=R.shift(),M.lineTo(ne,ae);break;case 25:for(;R.length>6;)ne+=R.shift(),ae+=R.shift(),M.lineTo(ne,ae);l=ne+R.shift(),b=ae+R.shift(),E=l+R.shift(),k=b+R.shift(),ne=E+R.shift(),ae=k+R.shift(),M.curveTo(l,b,E,k,ne,ae);break;case 26:for(R.length%2&&(ne+=R.shift());R.length>0;)l=ne,b=ae+R.shift(),E=l+R.shift(),k=b+R.shift(),ne=E,ae=k+R.shift(),M.curveTo(l,b,E,k,ne,ae);break;case 27:for(R.length%2&&(ae+=R.shift());R.length>0;)l=ne+R.shift(),b=ae,E=l+R.shift(),k=b+R.shift(),ne=E+R.shift(),ae=k,M.curveTo(l,b,E,k,ne,ae);break;case 28:ge=he[Be],Te=he[Be+1],R.push((ge<<24|Te<<16)>>16),Be+=2;break;case 29:We=R.pop()+e.gsubrsBias,qe=e.gsubrs[We],qe&&_e(qe);break;case 30:for(;R.length>0&&(l=ne,b=ae+R.shift(),E=l+R.shift(),k=b+R.shift(),ne=E+R.shift(),ae=k+(R.length===1?R.shift():0),M.curveTo(l,b,E,k,ne,ae),R.length!==0);)l=ne+R.shift(),b=ae,E=l+R.shift(),k=b+R.shift(),ae=k+R.shift(),ne=E+(R.length===1?R.shift():0),M.curveTo(l,b,E,k,ne,ae);break;case 31:for(;R.length>0&&(l=ne+R.shift(),b=ae,E=l+R.shift(),k=b+R.shift(),ae=k+R.shift(),ne=E+(R.length===1?R.shift():0),M.curveTo(l,b,E,k,ne,ae),R.length!==0);)l=ne,b=ae+R.shift(),E=l+R.shift(),k=b+R.shift(),ne=E+R.shift(),ae=k+(R.length===1?R.shift():0),M.curveTo(l,b,E,k,ne,ae);break;default:$e<32?console.log("Glyph "+i.index+": unknown operator "+$e):$e<247?R.push($e-139):$e<251?(ge=he[Be],Be+=1,R.push(256*($e-247)+ge+108)):$e<255?(ge=he[Be],Be+=1,R.push(256*-($e-251)-ge-108)):(ge=he[Be],Te=he[Be+1],we=he[Be+2],Ie=he[Be+3],Be+=4,R.push((ge<<24|Te<<16|we<<8|Ie)/65536))}}}(s),i.advanceWidth=me,M}function Li(e,i){let s,l=xe.indexOf(e);return l>=0&&(s=l),l=i.indexOf(e),l>=0?s=l+xe.length:(s=xe.length+i.length,i.push(e)),s}function ki(e,i,s){const l={};for(let b=0;b<e.length;b+=1){const E=e[b];let k=i[E.name];k===void 0||yi(k,E.value)||(E.type==="SID"&&(k=Li(k,s)),l[E.op]={name:E.name,type:E.type,value:k})}return l}function Ri(e,i){const s=new W.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return s.dict=ki(Ci,e,i),s}function Ai(e){const i=new W.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return i.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],i}function Qr(e){const i=[],s=e.path;i.push({name:"width",type:"NUMBER",value:e.advanceWidth});let l=0,b=0;for(let E=0;E<s.commands.length;E+=1){let k,M,R=s.commands[E];if(R.type==="Q"){const F=.3333333333333333,$=2/3;R={type:"C",x:R.x,y:R.y,x1:F*l+$*R.x1,y1:F*b+$*R.y1,x2:F*R.x+$*R.x1,y2:F*R.y+$*R.y1}}if(R.type==="M")k=Math.round(R.x-l),M=Math.round(R.y-b),i.push({name:"dx",type:"NUMBER",value:k}),i.push({name:"dy",type:"NUMBER",value:M}),i.push({name:"rmoveto",type:"OP",value:21}),l=Math.round(R.x),b=Math.round(R.y);else if(R.type==="L")k=Math.round(R.x-l),M=Math.round(R.y-b),i.push({name:"dx",type:"NUMBER",value:k}),i.push({name:"dy",type:"NUMBER",value:M}),i.push({name:"rlineto",type:"OP",value:5}),l=Math.round(R.x),b=Math.round(R.y);else if(R.type==="C"){const F=Math.round(R.x1-l),$=Math.round(R.y1-b),X=Math.round(R.x2-R.x1),Z=Math.round(R.y2-R.y1);k=Math.round(R.x-R.x2),M=Math.round(R.y-R.y2),i.push({name:"dx1",type:"NUMBER",value:F}),i.push({name:"dy1",type:"NUMBER",value:$}),i.push({name:"dx2",type:"NUMBER",value:X}),i.push({name:"dy2",type:"NUMBER",value:Z}),i.push({name:"dx",type:"NUMBER",value:k}),i.push({name:"dy",type:"NUMBER",value:M}),i.push({name:"rrcurveto",type:"OP",value:8}),l=Math.round(R.x),b=Math.round(R.y)}}return i.push({name:"endchar",type:"OP",value:14}),i}const es=function(e,i,s){s.tables.cff={};const l=function(oe,ye){const ne={};return ne.formatMajor=de.getCard8(oe,ye),ne.formatMinor=de.getCard8(oe,ye+1),ne.size=de.getCard8(oe,ye+2),ne.offsetSize=de.getCard8(oe,ye+3),ne.startOffset=ye,ne.endOffset=ye+4,ne}(e,i),b=at(e,l.endOffset,de.bytesToString),E=at(e,b.endOffset),k=at(e,E.endOffset,de.bytesToString),M=at(e,k.endOffset);s.gsubrs=M.objects,s.gsubrsBias=Pt(s.gsubrs);const R=Ei(e,i,E.objects,k.objects);if(R.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+R.length);const F=R[0];if(s.tables.cff.topDict=F,F._privateDict&&(s.defaultWidthX=F._privateDict.defaultWidthX,s.nominalWidthX=F._privateDict.nominalWidthX),F.ros[0]!==void 0&&F.ros[1]!==void 0&&(s.isCIDFont=!0),s.isCIDFont){let oe=F.fdArray,ye=F.fdSelect;if(oe===0||ye===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");oe+=i;const ne=Ei(e,i,at(e,oe).objects,k.objects);F._fdArray=ne,ye+=i,F._fdSelect=function(ae,me,be,Le){const _e=[];let he;const ge=new de.Parser(ae,me),Te=ge.parseCard8();if(Te===0)for(let we=0;we<be;we++){if(he=ge.parseCard8(),he>=Le)throw new Error("CFF table CID Font FDSelect has bad FD index value "+he+" (FD count "+Le+")");_e.push(he)}else{if(Te!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Te);{const we=ge.parseCard16();let Ie,We=ge.parseCard16();if(We!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+We);for(let qe=0;qe<we;qe++){if(he=ge.parseCard8(),Ie=ge.parseCard16(),he>=Le)throw new Error("CFF table CID Font FDSelect has bad FD index value "+he+" (FD count "+Le+")");if(Ie>be)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Ie);for(;We<Ie;We++)_e.push(he);We=Ie}if(Ie!==be)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Ie)}}return _e}(e,ye,s.numGlyphs,ne.length)}const $=i+F.private[1],X=xi(e,$,F.private[0],k.objects);if(s.defaultWidthX=X.defaultWidthX,s.nominalWidthX=X.nominalWidthX,X.subrs!==0){const oe=at(e,$+X.subrs);s.subrs=oe.objects,s.subrsBias=Pt(s.subrs)}else s.subrs=[],s.subrsBias=0;const Z=at(e,i+F.charStrings);s.nGlyphs=Z.objects.length;const ue=function(oe,ye,ne,ae){let me,be;const Le=new de.Parser(oe,ye);ne-=1;const _e=[".notdef"],he=Le.parseCard8();if(he===0)for(let ge=0;ge<ne;ge+=1)me=Le.parseSID(),_e.push(bt(ae,me));else if(he===1)for(;_e.length<=ne;){me=Le.parseSID(),be=Le.parseCard8();for(let ge=0;ge<=be;ge+=1)_e.push(bt(ae,me)),me+=1}else{if(he!==2)throw new Error("Unknown charset format "+he);for(;_e.length<=ne;){me=Le.parseSID(),be=Le.parseCard16();for(let ge=0;ge<=be;ge+=1)_e.push(bt(ae,me)),me+=1}}return _e}(e,i+F.charset,s.nGlyphs,k.objects);F.encoding===0?s.cffEncoding=new Qe(Ce,ue):F.encoding===1?s.cffEncoding=new Qe(Ae,ue):s.cffEncoding=function(oe,ye,ne){let ae;const me={},be=new de.Parser(oe,ye),Le=be.parseCard8();if(Le===0){const _e=be.parseCard8();for(let he=0;he<_e;he+=1)ae=be.parseCard8(),me[ae]=he}else{if(Le!==1)throw new Error("Unknown encoding format "+Le);{const _e=be.parseCard8();ae=1;for(let he=0;he<_e;he+=1){const ge=be.parseCard8(),Te=be.parseCard8();for(let we=ge;we<=ge+Te;we+=1)me[we]=ae,ae+=1}}}return new Qe(me,ne)}(e,i+F.encoding,ue),s.encoding=s.encoding||s.cffEncoding,s.glyphs=new pt.GlyphSet(s);for(let oe=0;oe<s.nGlyphs;oe+=1){const ye=Z.objects[oe];s.glyphs.push(oe,pt.cffGlyphLoader(s,oe,Jr,ye))}},ts=function(e,i){const s=new W.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),l=1/i.unitsPerEm,b={version:i.version,fullName:i.fullName,familyName:i.familyName,weight:i.weightName,fontBBox:i.fontBBox||[0,0,0,0],fontMatrix:[l,0,0,l,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},E=[];let k;for(let $=1;$<e.length;$+=1)k=e.get($),E.push(k.name);const M=[];s.header=new W.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),s.nameIndex=function($){const X=new W.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);X.names=[];for(let Z=0;Z<$.length;Z+=1)X.names.push({name:"name_"+Z,type:"NAME",value:$[Z]});return X}([i.postScriptName]);let R=Ri(b,M);s.topDictIndex=Ai(R),s.globalSubrIndex=new W.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),s.charsets=function($,X){const Z=new W.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(let ue=0;ue<$.length;ue+=1){const oe=Li($[ue],X);Z.fields.push({name:"glyph_"+ue,type:"SID",value:oe})}return Z}(E,M),s.charStringsIndex=function($){const X=new W.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(let Z=0;Z<$.length;Z+=1){const ue=$.get(Z),oe=Qr(ue);X.charStrings.push({name:ue.name,type:"CHARSTRING",value:oe})}return X}(e),s.privateDict=function($,X){const Z=new W.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return Z.dict=ki(wi,{},X),Z}(0,M),s.stringIndex=function($){const X=new W.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);X.strings=[];for(let Z=0;Z<$.length;Z+=1)X.strings.push({name:"string_"+Z,type:"STRING",value:$[Z]});return X}(M);const F=s.header.sizeOf()+s.nameIndex.sizeOf()+s.topDictIndex.sizeOf()+s.stringIndex.sizeOf()+s.globalSubrIndex.sizeOf();return b.charset=F,b.encoding=0,b.charStrings=b.charset+s.charsets.sizeOf(),b.private[1]=b.charStrings+s.charStringsIndex.sizeOf(),R=Ri(b,M),s.topDictIndex=Ai(R),s},is=function(e,i){const s={},l=new de.Parser(e,i);return s.version=l.parseVersion(),s.fontRevision=Math.round(1e3*l.parseFixed())/1e3,s.checkSumAdjustment=l.parseULong(),s.magicNumber=l.parseULong(),g.argument(s.magicNumber===1594834165,"Font header has wrong magic number."),s.flags=l.parseUShort(),s.unitsPerEm=l.parseUShort(),s.created=l.parseLongDateTime(),s.modified=l.parseLongDateTime(),s.xMin=l.parseShort(),s.yMin=l.parseShort(),s.xMax=l.parseShort(),s.yMax=l.parseShort(),s.macStyle=l.parseUShort(),s.lowestRecPPEM=l.parseUShort(),s.fontDirectionHint=l.parseShort(),s.indexToLocFormat=l.parseShort(),s.glyphDataFormat=l.parseShort(),s},rs=function(e){const i=Math.round(new Date().getTime()/1e3)+2082844800;let s=i;return e.createdTimestamp&&(s=e.createdTimestamp+2082844800),new W.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:s},{name:"modified",type:"LONGDATETIME",value:i},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)},ss=function(e,i){const s={},l=new de.Parser(e,i);return s.version=l.parseVersion(),s.ascender=l.parseShort(),s.descender=l.parseShort(),s.lineGap=l.parseShort(),s.advanceWidthMax=l.parseUShort(),s.minLeftSideBearing=l.parseShort(),s.minRightSideBearing=l.parseShort(),s.xMaxExtent=l.parseShort(),s.caretSlopeRise=l.parseShort(),s.caretSlopeRun=l.parseShort(),s.caretOffset=l.parseShort(),l.relativeOffset+=8,s.metricDataFormat=l.parseShort(),s.numberOfHMetrics=l.parseUShort(),s},ns=function(e){return new W.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)},os=function(e,i,s,l,b){let E,k;const M=new de.Parser(e,i);for(let R=0;R<l;R+=1){R<s&&(E=M.parseUShort(),k=M.parseShort());const F=b.get(R);F.advanceWidth=E,F.leftSideBearing=k}},as=function(e){const i=new W.Table("hmtx",[]);for(let s=0;s<e.length;s+=1){const l=e.get(s),b=l.advanceWidth||0,E=l.leftSideBearing||0;i.fields.push({name:"advanceWidth_"+s,type:"USHORT",value:b}),i.fields.push({name:"leftSideBearing_"+s,type:"SHORT",value:E})}return i},ls=function(e){const i=new W.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]);let s="";const l=12+4*e.length;for(let b=0;b<e.length;++b){let E=s.indexOf(e[b]);E<0&&(E=s.length,s+=e[b]),i.fields.push({name:"offset "+b,type:"USHORT",value:l+E}),i.fields.push({name:"length "+b,type:"USHORT",value:e[b].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:s}),i},cs=function(e,i){const s=new de.Parser(e,i),l=s.parseULong();g.argument(l===1,"Unsupported ltag table version."),s.skip("uLong",1);const b=s.parseULong(),E=[];for(let k=0;k<b;k++){let M="";const R=i+s.parseUShort(),F=s.parseUShort();for(let $=R;$<R+F;++$)M+=String.fromCharCode(e.getInt8($));E.push(M)}return E},hs=function(e,i){const s={},l=new de.Parser(e,i);return s.version=l.parseVersion(),s.numGlyphs=l.parseUShort(),s.version===1&&(s.maxPoints=l.parseUShort(),s.maxContours=l.parseUShort(),s.maxCompositePoints=l.parseUShort(),s.maxCompositeContours=l.parseUShort(),s.maxZones=l.parseUShort(),s.maxTwilightPoints=l.parseUShort(),s.maxStorage=l.parseUShort(),s.maxFunctionDefs=l.parseUShort(),s.maxInstructionDefs=l.parseUShort(),s.maxStackElements=l.parseUShort(),s.maxSizeOfInstructions=l.parseUShort(),s.maxComponentElements=l.parseUShort(),s.maxComponentDepth=l.parseUShort()),s},us=function(e){return new W.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])},Ti=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Di={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},ds={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Mi={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function fs(e,i,s){switch(e){case 0:if(i===65535)return"und";if(s)return s[i];break;case 1:return Di[i];case 3:return Mi[i]}}const Ut="utf-16",ps={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},_s={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Bi(e,i,s){switch(e){case 0:return Ut;case 1:return _s[s]||ps[i];case 3:if(i===1||i===10)return Ut}}function Ft(e){const i={};for(let s in e)i[e[s]]=parseInt(s);return i}function Oi(e,i,s,l,b,E){return new W.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:i},{name:"languageID",type:"USHORT",value:s},{name:"nameID",type:"USHORT",value:l},{name:"length",type:"USHORT",value:b},{name:"offset",type:"USHORT",value:E}])}function Ii(e,i){let s=function(l,b){const E=l.length,k=b.length-E+1;e:for(let M=0;M<k;M++)for(;M<k;M++){for(let R=0;R<E;R++)if(b[M+R]!==l[R])continue e;return M}return-1}(e,i);if(s<0){s=i.length;let l=0;const b=e.length;for(;l<b;++l)i.push(e[l])}return s}const gs=function(e,i,s){const l={},b=new de.Parser(e,i),E=b.parseUShort(),k=b.parseUShort(),M=b.offset+b.parseUShort();for(let R=0;R<k;R++){const F=b.parseUShort(),$=b.parseUShort(),X=b.parseUShort(),Z=b.parseUShort(),ue=Ti[Z]||Z,oe=b.parseUShort(),ye=b.parseUShort(),ne=fs(F,X,s),ae=Bi(F,$,X);if(ae!==void 0&&ne!==void 0){let me;if(me=ae===Ut?p.UTF16(e,M+ye,oe):p.MACSTRING(e,M+ye,oe,ae),me){let be=l[ue];be===void 0&&(be=l[ue]={}),be[ne]=me}}}return E===1&&b.parseUShort(),l},vs=function(e,i){let s;const l=[],b={},E=Ft(Ti);for(let X in e){let Z=E[X];if(Z===void 0&&(Z=X),s=parseInt(Z),isNaN(s))throw new Error('Name table entry "'+X+'" does not exist, see nameTableNames for complete list.');b[s]=e[X],l.push(s)}const k=Ft(Di),M=Ft(Mi),R=[],F=[];for(let X=0;X<l.length;X++){s=l[X];const Z=b[s];for(let ue in Z){const oe=Z[ue];let ye=1,ne=k[ue],ae=ds[ne];const me=Bi(ye,ae,ne);let be=S.MACSTRING(oe,me);be===void 0&&(ye=0,ne=i.indexOf(ue),ne<0&&(ne=i.length,i.push(ue)),ae=4,be=S.UTF16(oe));const Le=Ii(be,F);R.push(Oi(ye,ae,ne,s,be.length,Le));const _e=M[ue];if(_e!==void 0){const he=S.UTF16(oe),ge=Ii(he,F);R.push(Oi(3,1,_e,s,he.length,ge))}}}R.sort(function(X,Z){return X.platformID-Z.platformID||X.encodingID-Z.encodingID||X.languageID-Z.languageID||X.nameID-Z.nameID});const $=new W.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:R.length},{name:"stringOffset",type:"USHORT",value:6+12*R.length}]);for(let X=0;X<R.length;X++)$.fields.push({name:"record_"+X,type:"RECORD",value:R[X]});return $.fields.push({name:"strings",type:"LITERAL",value:F}),$},Pi=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],ms=function(e,i){const s={},l=new de.Parser(e,i);s.version=l.parseUShort(),s.xAvgCharWidth=l.parseShort(),s.usWeightClass=l.parseUShort(),s.usWidthClass=l.parseUShort(),s.fsType=l.parseUShort(),s.ySubscriptXSize=l.parseShort(),s.ySubscriptYSize=l.parseShort(),s.ySubscriptXOffset=l.parseShort(),s.ySubscriptYOffset=l.parseShort(),s.ySuperscriptXSize=l.parseShort(),s.ySuperscriptYSize=l.parseShort(),s.ySuperscriptXOffset=l.parseShort(),s.ySuperscriptYOffset=l.parseShort(),s.yStrikeoutSize=l.parseShort(),s.yStrikeoutPosition=l.parseShort(),s.sFamilyClass=l.parseShort(),s.panose=[];for(let b=0;b<10;b++)s.panose[b]=l.parseByte();return s.ulUnicodeRange1=l.parseULong(),s.ulUnicodeRange2=l.parseULong(),s.ulUnicodeRange3=l.parseULong(),s.ulUnicodeRange4=l.parseULong(),s.achVendID=String.fromCharCode(l.parseByte(),l.parseByte(),l.parseByte(),l.parseByte()),s.fsSelection=l.parseUShort(),s.usFirstCharIndex=l.parseUShort(),s.usLastCharIndex=l.parseUShort(),s.sTypoAscender=l.parseShort(),s.sTypoDescender=l.parseShort(),s.sTypoLineGap=l.parseShort(),s.usWinAscent=l.parseUShort(),s.usWinDescent=l.parseUShort(),s.version>=1&&(s.ulCodePageRange1=l.parseULong(),s.ulCodePageRange2=l.parseULong()),s.version>=2&&(s.sxHeight=l.parseShort(),s.sCapHeight=l.parseShort(),s.usDefaultChar=l.parseUShort(),s.usBreakChar=l.parseUShort(),s.usMaxContent=l.parseUShort()),s},ys=function(e){return new W.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},Ss=function(e){for(let i=0;i<Pi.length;i+=1){const s=Pi[i];if(e>=s.begin&&e<s.end)return i}return-1},bs=function(e,i){const s={},l=new de.Parser(e,i);switch(s.version=l.parseVersion(),s.italicAngle=l.parseFixed(),s.underlinePosition=l.parseShort(),s.underlineThickness=l.parseShort(),s.isFixedPitch=l.parseULong(),s.minMemType42=l.parseULong(),s.maxMemType42=l.parseULong(),s.minMemType1=l.parseULong(),s.maxMemType1=l.parseULong(),s.version){case 1:s.names=Pe.slice();break;case 2:s.numberOfGlyphs=l.parseUShort(),s.glyphNameIndex=new Array(s.numberOfGlyphs);for(let b=0;b<s.numberOfGlyphs;b++)s.glyphNameIndex[b]=l.parseUShort();s.names=[];for(let b=0;b<s.numberOfGlyphs;b++)if(s.glyphNameIndex[b]>=Pe.length){const E=l.parseChar();s.names.push(l.parseString(E))}break;case 2.5:s.numberOfGlyphs=l.parseUShort(),s.offset=new Array(s.numberOfGlyphs);for(let b=0;b<s.numberOfGlyphs;b++)s.offset[b]=l.parseChar()}return s},Cs=function(){return new W.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},Ye=new Array(9);Ye[1]=function(){const e=this.offset+this.relativeOffset,i=this.parseUShort();return i===1?{substFormat:1,coverage:this.parsePointer(J.coverage),deltaGlyphId:this.parseUShort()}:i===2?{substFormat:2,coverage:this.parsePointer(J.coverage),substitute:this.parseOffset16List()}:void g.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},Ye[2]=function(){const e=this.parseUShort();return g.argument(e===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(J.coverage),sequences:this.parseListOfLists()}},Ye[3]=function(){const e=this.parseUShort();return g.argument(e===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(J.coverage),alternateSets:this.parseListOfLists()}},Ye[4]=function(){const e=this.parseUShort();return g.argument(e===1,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(J.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};const _t={sequenceIndex:J.uShort,lookupListIndex:J.uShort};Ye[5]=function(){const e=this.offset+this.relativeOffset,i=this.parseUShort();if(i===1)return{substFormat:i,coverage:this.parsePointer(J.coverage),ruleSets:this.parseListOfLists(function(){const s=this.parseUShort(),l=this.parseUShort();return{input:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(l,_t)}})};if(i===2)return{substFormat:i,coverage:this.parsePointer(J.coverage),classDef:this.parsePointer(J.classDef),classSets:this.parseListOfLists(function(){const s=this.parseUShort(),l=this.parseUShort();return{classes:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(l,_t)}})};if(i===3){const s=this.parseUShort(),l=this.parseUShort();return{substFormat:i,coverages:this.parseList(s,J.pointer(J.coverage)),lookupRecords:this.parseRecordList(l,_t)}}g.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Ye[6]=function(){const e=this.offset+this.relativeOffset,i=this.parseUShort();return i===1?{substFormat:1,coverage:this.parsePointer(J.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(_t)}})}:i===2?{substFormat:2,coverage:this.parsePointer(J.coverage),backtrackClassDef:this.parsePointer(J.classDef),inputClassDef:this.parsePointer(J.classDef),lookaheadClassDef:this.parsePointer(J.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(_t)}})}:i===3?{substFormat:3,backtrackCoverage:this.parseList(J.pointer(J.coverage)),inputCoverage:this.parseList(J.pointer(J.coverage)),lookaheadCoverage:this.parseList(J.pointer(J.coverage)),lookupRecords:this.parseRecordList(_t)}:void g.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Ye[7]=function(){const e=this.parseUShort();g.argument(e===1,"GSUB Extension Substitution subtable identifier-format must be 1");const i=this.parseUShort(),s=new J(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:i,extension:Ye[i].call(s)}},Ye[8]=function(){const e=this.parseUShort();return g.argument(e===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(J.coverage),backtrackCoverage:this.parseList(J.pointer(J.coverage)),lookaheadCoverage:this.parseList(J.pointer(J.coverage)),substitutes:this.parseUShortList()}};const Rt=new Array(9);Rt[1]=function(e){return e.substFormat===1?new W.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new W.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new W.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new W.Coverage(e.coverage)}].concat(W.ushortList("substitute",e.substitute)))},Rt[3]=function(e){return g.assert(e.substFormat===1,"Lookup type 3 substFormat must be 1."),new W.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new W.Coverage(e.coverage)}].concat(W.tableList("altSet",e.alternateSets,function(i){return new W.Table("alternateSetTable",W.ushortList("alternate",i))})))},Rt[4]=function(e){return g.assert(e.substFormat===1,"Lookup type 4 substFormat must be 1."),new W.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new W.Coverage(e.coverage)}].concat(W.tableList("ligSet",e.ligatureSets,function(i){return new W.Table("ligatureSetTable",W.tableList("ligature",i,function(s){return new W.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:s.ligGlyph}].concat(W.ushortList("component",s.components,s.components.length+1)))}))})))};const ws=function(e,i){const s=new J(e,i=i||0),l=s.parseVersion(1);return g.argument(l===1||l===1.1,"Unsupported GSUB table version."),l===1?{version:l,scripts:s.parseScriptList(),features:s.parseFeatureList(),lookups:s.parseLookupList(Ye)}:{version:l,scripts:s.parseScriptList(),features:s.parseFeatureList(),lookups:s.parseLookupList(Ye),variations:s.parseFeatureVariationsList()}},xs=function(e){return new W.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new W.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new W.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new W.LookupList(e.lookups,Rt)}])},Es=function(e,i){const s=new de.Parser(e,i),l=s.parseULong();g.argument(l===1,"Unsupported META table version."),s.parseULong(),s.parseULong();const b=s.parseULong(),E={};for(let k=0;k<b;k++){const M=s.parseTag(),R=s.parseULong(),F=s.parseULong(),$=p.UTF8(e,i+R,F);E[M]=$}return E},Ls=function(e){const i=Object.keys(e).length;let s="";const l=16+12*i,b=new W.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:l},{name:"numTags",type:"ULONG",value:i}]);for(let E in e){const k=s.length;s+=e[E],b.fields.push({name:"tag "+E,type:"TAG",value:E}),b.fields.push({name:"offset "+E,type:"ULONG",value:l+k}),b.fields.push({name:"length "+E,type:"ULONG",value:e[E].length})}return b.fields.push({name:"stringPool",type:"CHARARRAY",value:s}),b};function Ui(e){return Math.log(e)/Math.log(2)|0}function Fi(e){for(;e.length%4!=0;)e.push(0);let i=0;for(let s=0;s<e.length;s+=4)i+=(e[s]<<24)+(e[s+1]<<16)+(e[s+2]<<8)+e[s+3];return i%=Math.pow(2,32),i}function Hi(e,i,s,l){return new W.Record("Table Record",[{name:"tag",type:"TAG",value:e!==void 0?e:""},{name:"checkSum",type:"ULONG",value:i!==void 0?i:0},{name:"offset",type:"ULONG",value:s!==void 0?s:0},{name:"length",type:"ULONG",value:l!==void 0?l:0}])}function ks(e){const i=new W.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);i.tables=e,i.numTables=e.length;const s=Math.pow(2,Ui(i.numTables));i.searchRange=16*s,i.entrySelector=Ui(s),i.rangeShift=16*i.numTables-i.searchRange;const l=[],b=[];let E=i.sizeOf()+Hi().sizeOf()*i.numTables;for(;E%4!=0;)E+=1,b.push({name:"padding",type:"BYTE",value:0});for(let k=0;k<e.length;k+=1){const M=e[k];g.argument(M.tableName.length===4,"Table name"+M.tableName+" is invalid.");const R=M.sizeOf(),F=Hi(M.tableName,Fi(M.encode()),E,R);for(l.push({name:F.tag+" Table Record",type:"RECORD",value:F}),b.push({name:M.tableName+" table",type:"RECORD",value:M}),E+=R,g.argument(!isNaN(E),"Something went wrong calculating the offset.");E%4!=0;)E+=1,b.push({name:"padding",type:"BYTE",value:0})}return l.sort(function(k,M){return k.value.tag>M.value.tag?1:-1}),i.fields=i.fields.concat(l),i.fields=i.fields.concat(b),i}function Ni(e,i,s){for(let l=0;l<i.length;l+=1){const b=e.charToGlyphIndex(i[l]);if(b>0)return e.glyphs.get(b).getMetrics()}return s}function Rs(e){let i=0;for(let s=0;s<e.length;s+=1)i+=e[s];return i/e.length}const As=function(e){const i=[],s=[],l=[],b=[],E=[],k=[],M=[];let R,F=0,$=0,X=0,Z=0,ue=0;for(let Xe=0;Xe<e.glyphs.length;Xe+=1){const vt=e.glyphs.get(Xe),mt=0|vt.unicode;if(isNaN(vt.advanceWidth))throw new Error("Glyph "+vt.name+" ("+Xe+"): advanceWidth is not a number.");(R>mt||R===void 0)&&mt>0&&(R=mt),F<mt&&(F=mt);const ut=Ss(mt);if(ut<32)$|=1<<ut;else if(ut<64)X|=1<<ut-32;else if(ut<96)Z|=1<<ut-64;else{if(!(ut<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");ue|=1<<ut-96}if(vt.name===".notdef")continue;const yt=vt.getMetrics();i.push(yt.xMin),s.push(yt.yMin),l.push(yt.xMax),b.push(yt.yMax),k.push(yt.leftSideBearing),M.push(yt.rightSideBearing),E.push(vt.advanceWidth)}const oe={xMin:Math.min.apply(null,i),yMin:Math.min.apply(null,s),xMax:Math.max.apply(null,l),yMax:Math.max.apply(null,b),advanceWidthMax:Math.max.apply(null,E),advanceWidthAvg:Rs(E),minLeftSideBearing:Math.min.apply(null,k),maxLeftSideBearing:Math.max.apply(null,k),minRightSideBearing:Math.min.apply(null,M)};oe.ascender=e.ascender,oe.descender=e.descender;const ye=rs({flags:3,unitsPerEm:e.unitsPerEm,xMin:oe.xMin,yMin:oe.yMin,xMax:oe.xMax,yMax:oe.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),ne=ns({ascender:oe.ascender,descender:oe.descender,advanceWidthMax:oe.advanceWidthMax,minLeftSideBearing:oe.minLeftSideBearing,minRightSideBearing:oe.minRightSideBearing,xMaxExtent:oe.maxLeftSideBearing+(oe.xMax-oe.xMin),numberOfHMetrics:e.glyphs.length}),ae=us(e.glyphs.length),me=ys({xAvgCharWidth:Math.round(oe.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:R,usLastCharIndex:F,ulUnicodeRange1:$,ulUnicodeRange2:X,ulUnicodeRange3:Z,ulUnicodeRange4:ue,fsSelection:e.tables.os2.fsSelection,sTypoAscender:oe.ascender,sTypoDescender:oe.descender,sTypoLineGap:0,usWinAscent:oe.yMax,usWinDescent:Math.abs(oe.yMin),ulCodePageRange1:1,sxHeight:Ni(e,"xyvw",{yMax:Math.round(oe.ascender/2)}).yMax,sCapHeight:Ni(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",oe).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),be=as(e.glyphs),Le=te(e.glyphs),_e=e.getEnglishName("fontFamily"),he=e.getEnglishName("fontSubfamily"),ge=_e+" "+he;let Te=e.getEnglishName("postScriptName");Te||(Te=_e.replace(/\s/g,"")+"-"+he);const we={};for(let Xe in e.names)we[Xe]=e.names[Xe];we.uniqueID||(we.uniqueID={en:e.getEnglishName("manufacturer")+":"+ge}),we.postScriptName||(we.postScriptName={en:Te}),we.preferredFamily||(we.preferredFamily=e.names.fontFamily),we.preferredSubfamily||(we.preferredSubfamily=e.names.fontSubfamily);const Ie=[],We=vs(we,Ie),qe=Ie.length>0?ls(Ie):void 0,Fe=Cs(),ze=ts(e.glyphs,{version:e.getEnglishName("version"),fullName:ge,familyName:_e,weightName:he,postScriptName:Te,unitsPerEm:e.unitsPerEm,fontBBox:[0,oe.yMin,oe.ascender,oe.advanceWidthMax]}),Ue=e.metas&&Object.keys(e.metas).length>0?Ls(e.metas):void 0,Ge=[ye,ne,ae,me,We,Le,Fe,ze,be];qe&&Ge.push(qe),e.tables.gsub&&Ge.push(xs(e.tables.gsub)),Ue&&Ge.push(Ue);const He=ks(Ge),Ke=Fi(He.encode()),Be=He.fields;let $e=!1;for(let Xe=0;Xe<Be.length;Xe+=1)if(Be[Xe].name==="head table"){Be[Xe].value.checkSumAdjustment=2981146554-Ke,$e=!0;break}if(!$e)throw new Error("Could not find head table with checkSum to adjust.");return He};function Ht(e,i){let s=0,l=e.length-1;for(;s<=l;){const b=s+l>>>1,E=e[b].tag;if(E===i)return b;E<i?s=b+1:l=b-1}return-s-1}function Wi(e,i){let s=0,l=e.length-1;for(;s<=l;){const b=s+l>>>1,E=e[b];if(E===i)return b;E<i?s=b+1:l=b-1}return-s-1}function Gi(e,i){let s,l=0,b=e.length-1;for(;l<=b;){const E=l+b>>>1;s=e[E];const k=s.start;if(k===i)return s;k<i?l=E+1:b=E-1}if(l>0)return s=e[l-1],i>s.end?0:s}function ji(e,i){this.font=e,this.tableName=i}ji.prototype={searchTag:Ht,binSearch:Wi,getTable:function(e){let i=this.font.tables[this.tableName];return!i&&e&&(i=this.font.tables[this.tableName]=this.createDefaultTable()),i},getScriptNames:function(){let e=this.getTable();return e?e.scripts.map(function(i){return i.tag}):[]},getDefaultScriptName:function(){let e=this.getTable();if(!e)return;let i=!1;for(let s=0;s<e.scripts.length;s++){const l=e.scripts[s].tag;if(l==="DFLT")return l;l==="latn"&&(i=!0)}return i?"latn":void 0},getScriptTable:function(e,i){const s=this.getTable(i);if(s){e=e||"DFLT";const l=s.scripts,b=Ht(s.scripts,e);if(b>=0)return l[b].script;if(i){const E={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return l.splice(-1-b,0,E),E.script}}},getLangSysTable:function(e,i,s){const l=this.getScriptTable(e,s);if(l){if(!i||i==="dflt"||i==="DFLT")return l.defaultLangSys;const b=Ht(l.langSysRecords,i);if(b>=0)return l.langSysRecords[b].langSys;if(s){const E={tag:i,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return l.langSysRecords.splice(-1-b,0,E),E.langSys}}},getFeatureTable:function(e,i,s,l){const b=this.getLangSysTable(e,i,l);if(b){let E;const k=b.featureIndexes,M=this.font.tables[this.tableName].features;for(let R=0;R<k.length;R++)if(E=M[k[R]],E.tag===s)return E.feature;if(l){const R=M.length;return g.assert(R===0||s>=M[R-1].tag,"Features must be added in alphabetical order."),E={tag:s,feature:{params:0,lookupListIndexes:[]}},M.push(E),k.push(R),E.feature}}},getLookupTables:function(e,i,s,l,b){const E=this.getFeatureTable(e,i,s,b),k=[];if(E){let M;const R=E.lookupListIndexes,F=this.font.tables[this.tableName].lookups;for(let $=0;$<R.length;$++)M=F[R[$]],M.lookupType===l&&k.push(M);if(k.length===0&&b){M={lookupType:l,lookupFlag:0,subtables:[],markFilteringSet:void 0};const $=F.length;return F.push(M),R.push($),[M]}}return k},getGlyphClass:function(e,i){switch(e.format){case 1:return e.startGlyph<=i&&i<e.startGlyph+e.classes.length?e.classes[i-e.startGlyph]:0;case 2:const s=Gi(e.ranges,i);return s?s.classId:0}},getCoverageIndex:function(e,i){switch(e.format){case 1:const s=Wi(e.glyphs,i);return s>=0?s:-1;case 2:const l=Gi(e.ranges,i);return l?l.index+i-l.start:-1}},expandCoverage:function(e){if(e.format===1)return e.glyphs;{const i=[],s=e.ranges;for(let l=0;l<s.length;l++){const b=s[l],E=b.start,k=b.end;for(let M=E;M<=k;M++)i.push(M)}return i}}};const At=ji;function Tt(e){At.call(this,e,"gpos")}Tt.prototype=At.prototype,Tt.prototype.getKerningValue=function(e,i,s){for(let l=0;l<e.length;l++){const b=e[l].subtables;for(let E=0;E<b.length;E++){const k=b[E],M=this.getCoverageIndex(k.coverage,i);if(!(M<0))switch(k.posFormat){case 1:let R=k.pairSets[M];for(let Z=0;Z<R.length;Z++){let ue=R[Z];if(ue.secondGlyph===s)return ue.value1&&ue.value1.xAdvance||0}break;case 2:const F=this.getGlyphClass(k.classDef1,i),$=this.getGlyphClass(k.classDef2,s),X=k.classRecords[F][$];return X.value1&&X.value1.xAdvance||0}}}return 0},Tt.prototype.getKerningTables=function(e,i){if(this.font.tables.gpos)return this.getLookupTables(e,i,"kern",2)};const Ts=Tt;function Ze(e){At.call(this,e,"gsub")}function Ds(e,i){const s=e.length;if(s!==i.length)return!1;for(let l=0;l<s;l++)if(e[l]!==i[l])return!1;return!0}function zi(e,i,s){const l=e.subtables;for(let b=0;b<l.length;b++){const E=l[b];if(E.substFormat===i)return E}if(s)return l.push(s),s}Ze.prototype=At.prototype,Ze.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Ze.prototype.getSingle=function(e,i,s){const l=[],b=this.getLookupTables(i,s,e,1);for(let E=0;E<b.length;E++){const k=b[E].subtables;for(let M=0;M<k.length;M++){const R=k[M],F=this.expandCoverage(R.coverage);let $;if(R.substFormat===1){const X=R.deltaGlyphId;for($=0;$<F.length;$++){const Z=F[$];l.push({sub:Z,by:Z+X})}}else{const X=R.substitute;for($=0;$<F.length;$++)l.push({sub:F[$],by:X[$]})}}}return l},Ze.prototype.getAlternates=function(e,i,s){const l=[],b=this.getLookupTables(i,s,e,3);for(let E=0;E<b.length;E++){const k=b[E].subtables;for(let M=0;M<k.length;M++){const R=k[M],F=this.expandCoverage(R.coverage),$=R.alternateSets;for(let X=0;X<F.length;X++)l.push({sub:F[X],by:$[X]})}}return l},Ze.prototype.getLigatures=function(e,i,s){const l=[],b=this.getLookupTables(i,s,e,4);for(let E=0;E<b.length;E++){const k=b[E].subtables;for(let M=0;M<k.length;M++){const R=k[M],F=this.expandCoverage(R.coverage),$=R.ligatureSets;for(let X=0;X<F.length;X++){const Z=F[X],ue=$[X];for(let oe=0;oe<ue.length;oe++){const ye=ue[oe];l.push({sub:[Z].concat(ye.components),by:ye.ligGlyph})}}}}return l},Ze.prototype.addSingle=function(e,i,s,l){const b=zi(this.getLookupTables(s,l,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});g.assert(b.coverage.format===1,"Ligature: unable to modify coverage table format "+b.coverage.format);const E=i.sub;let k=this.binSearch(b.coverage.glyphs,E);k<0&&(k=-1-k,b.coverage.glyphs.splice(k,0,E),b.substitute.splice(k,0,0)),b.substitute[k]=i.by},Ze.prototype.addAlternate=function(e,i,s,l){const b=zi(this.getLookupTables(s,l,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});g.assert(b.coverage.format===1,"Ligature: unable to modify coverage table format "+b.coverage.format);const E=i.sub;let k=this.binSearch(b.coverage.glyphs,E);k<0&&(k=-1-k,b.coverage.glyphs.splice(k,0,E),b.alternateSets.splice(k,0,0)),b.alternateSets[k]=i.by},Ze.prototype.addLigature=function(e,i,s,l){const b=this.getLookupTables(s,l,e,4,!0)[0];let E=b.subtables[0];E||(E={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},b.subtables[0]=E),g.assert(E.coverage.format===1,"Ligature: unable to modify coverage table format "+E.coverage.format);const k=i.sub[0],M=i.sub.slice(1),R={ligGlyph:i.by,components:M};let F=this.binSearch(E.coverage.glyphs,k);if(F>=0){const $=E.ligatureSets[F];for(let X=0;X<$.length;X++)if(Ds($[X].components,M))return;$.push(R)}else F=-1-F,E.coverage.glyphs.splice(F,0,k),E.ligatureSets.splice(F,0,[R])},Ze.prototype.getFeature=function(e,i,s){if(/ss\d\d/.test(e))return this.getSingle(e,i,s);switch(e){case"aalt":case"salt":return this.getSingle(e,i,s).concat(this.getAlternates(e,i,s));case"dlig":case"liga":case"rlig":return this.getLigatures(e,i,s)}},Ze.prototype.add=function(e,i,s,l){if(/ss\d\d/.test(e))return this.addSingle(e,i,s,l);switch(e){case"aalt":case"salt":return typeof i.by=="number"?this.addSingle(e,i,s,l):this.addAlternate(e,i,s,l);case"dlig":case"liga":case"rlig":return this.addLigature(e,i,s,l)}};const Ms=Ze;function $i(e){const i=new ArrayBuffer(e.length),s=new Uint8Array(i);for(let l=0;l<e.length;++l)s[l]=e[l];return i}function gt(e,i){if(!e)throw i}let qi,ft,Vi,Nt;function Ki(e){this.font=e,this._fpgmState=this._prepState=void 0,this._errorState=0}function Bs(e){return e}function Xi(e){return Math.sign(e)*Math.round(Math.abs(e))}function Os(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Is(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Ps(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Us(e){return Math.sign(e)*Math.floor(Math.abs(e))}const Yi=function(e){const i=this.srPeriod;let s=this.srPhase,l=1;return e<0&&(e=-e,l=-1),e+=this.srThreshold-s,e=Math.trunc(e/i)*i,(e+=s)<0?s*l:e*l},tt={x:1,y:0,axis:"x",distance:function(e,i,s,l){return(s?e.xo:e.x)-(l?i.xo:i.x)},interpolate:function(e,i,s,l){let b,E,k,M,R,F,$;if(!l||l===this)return b=e.xo-i.xo,E=e.xo-s.xo,R=i.x-i.xo,F=s.x-s.xo,k=Math.abs(b),M=Math.abs(E),$=k+M,$===0?void(e.x=e.xo+(R+F)/2):void(e.x=e.xo+(R*M+F*k)/$);b=l.distance(e,i,!0,!0),E=l.distance(e,s,!0,!0),R=l.distance(i,i,!1,!0),F=l.distance(s,s,!1,!0),k=Math.abs(b),M=Math.abs(E),$=k+M,$!==0?tt.setRelative(e,e,(R*M+F*k)/$,l,!0):tt.setRelative(e,e,(R+F)/2,l,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,i,s,l,b){if(!l||l===this)return void(e.x=(b?i.xo:i.x)+s);const E=b?i.xo:i.x,k=b?i.yo:i.y,M=E+s*l.x,R=k+s*l.y;e.x=M+(e.y-R)/l.normalSlope},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},it={x:0,y:1,axis:"y",distance:function(e,i,s,l){return(s?e.yo:e.y)-(l?i.yo:i.y)},interpolate:function(e,i,s,l){let b,E,k,M,R,F,$;if(!l||l===this)return b=e.yo-i.yo,E=e.yo-s.yo,R=i.y-i.yo,F=s.y-s.yo,k=Math.abs(b),M=Math.abs(E),$=k+M,$===0?void(e.y=e.yo+(R+F)/2):void(e.y=e.yo+(R*M+F*k)/$);b=l.distance(e,i,!0,!0),E=l.distance(e,s,!0,!0),R=l.distance(i,i,!1,!0),F=l.distance(s,s,!1,!0),k=Math.abs(b),M=Math.abs(E),$=k+M,$!==0?it.setRelative(e,e,(R*M+F*k)/$,l,!0):it.setRelative(e,e,(R+F)/2,l,!0)},normalSlope:0,setRelative:function(e,i,s,l,b){if(!l||l===this)return void(e.y=(b?i.yo:i.y)+s);const E=b?i.xo:i.x,k=b?i.yo:i.y,M=E+s*l.x,R=k+s*l.y;e.y=R+l.normalSlope*(e.x-M)},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function Ct(e,i){this.x=e,this.y=i,this.axis=void 0,this.slope=i/e,this.normalSlope=-e/i,Object.freeze(this)}function wt(e,i){const s=Math.sqrt(e*e+i*i);return i/=s,(e/=s)==1&&i===0?tt:e===0&&i===1?it:new Ct(e,i)}function rt(e,i,s,l){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*i)/64,this.lastPointOfContour=s,this.onCurve=l,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(tt),Object.freeze(it),Ct.prototype.distance=function(e,i,s,l){return this.x*tt.distance(e,i,s,l)+this.y*it.distance(e,i,s,l)},Ct.prototype.interpolate=function(e,i,s,l){let b,E,k,M,R,F,$;k=l.distance(e,i,!0,!0),M=l.distance(e,s,!0,!0),b=l.distance(i,i,!1,!0),E=l.distance(s,s,!1,!0),R=Math.abs(k),F=Math.abs(M),$=R+F,$!==0?this.setRelative(e,e,(b*F+E*R)/$,l,!0):this.setRelative(e,e,(b+E)/2,l,!0)},Ct.prototype.setRelative=function(e,i,s,l,b){l=l||this;const E=b?i.xo:i.x,k=b?i.yo:i.y,M=E+s*l.x,R=k+s*l.y,F=l.normalSlope,$=this.slope,X=e.x,Z=e.y;e.x=($*X-F*M+R-Z)/($-F),e.y=$*(e.x-X)+Z},Ct.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},rt.prototype.nextTouched=function(e){let i=this.nextPointOnContour;for(;!e.touched(i)&&i!==this;)i=i.nextPointOnContour;return i},rt.prototype.prevTouched=function(e){let i=this.prevPointOnContour;for(;!e.touched(i)&&i!==this;)i=i.prevPointOnContour;return i};const xt=Object.freeze(new rt(0,0)),Fs={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function lt(e,i){switch(this.env=e,this.stack=[],this.prog=i,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=tt,this.round=Xi}}function Dt(e){const i=e.tZone=new Array(e.gZone.length);for(let s=0;s<i.length;s++)i[s]=new rt(0,0)}function Zi(e,i){const s=e.prog;let l,b=e.ip,E=1;do if(l=s[++b],l===88)E++;else if(l===89)E--;else if(l===64)b+=s[b+1]+1;else if(l===65)b+=2*s[b+1]+1;else if(l>=176&&l<=183)b+=l-176+1;else if(l>=184&&l<=191)b+=2*(l-184+1);else if(i&&E===1&&l===27)break;while(E>0);e.ip=b}function Ji(e,i){G.DEBUG&&console.log(i.step,"SVTCA["+e.axis+"]"),i.fv=i.pv=i.dpv=e}function Qi(e,i){G.DEBUG&&console.log(i.step,"SPVTCA["+e.axis+"]"),i.pv=i.dpv=e}function er(e,i){G.DEBUG&&console.log(i.step,"SFVTCA["+e.axis+"]"),i.fv=e}function tr(e,i){const s=i.stack,l=s.pop(),b=s.pop(),E=i.z2[l],k=i.z1[b];let M,R;G.DEBUG&&console.log("SPVTL["+e+"]",l,b),e?(M=E.y-k.y,R=k.x-E.x):(M=k.x-E.x,R=k.y-E.y),i.pv=i.dpv=wt(M,R)}function ir(e,i){const s=i.stack,l=s.pop(),b=s.pop(),E=i.z2[l],k=i.z1[b];let M,R;G.DEBUG&&console.log("SFVTL["+e+"]",l,b),e?(M=E.y-k.y,R=k.x-E.x):(M=k.x-E.x,R=k.y-E.y),i.fv=wt(M,R)}function Wt(e){G.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function rr(e,i){const s=i.stack.pop(),l=i.z0[s],b=i.fv,E=i.pv;G.DEBUG&&console.log(i.step,"MDAP["+e+"]",s);let k=E.distance(l,xt);e&&(k=i.round(k)),b.setRelative(l,xt,k,E),b.touch(l),i.rp0=i.rp1=s}function sr(e,i){const s=i.z2,l=s.length-2;let b,E,k;G.DEBUG&&console.log(i.step,"IUP["+e.axis+"]");for(let M=0;M<l;M++)b=s[M],e.touched(b)||(E=b.prevTouched(e),E!==b&&(k=b.nextTouched(e),E===k&&e.setRelative(b,b,e.distance(E,E,!1,!0),e,!0),e.interpolate(b,E,k,e)))}function nr(e,i){const s=i.stack,l=e?i.rp1:i.rp2,b=(e?i.z0:i.z1)[l],E=i.fv,k=i.pv;let M=i.loop;const R=i.z2;for(;M--;){const F=s.pop(),$=R[F],X=k.distance(b,b,!1,!0);E.setRelative($,$,X,k),E.touch($),G.DEBUG&&console.log(i.step,(i.loop>1?"loop "+(i.loop-M)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",F)}i.loop=1}function or(e,i){const s=i.stack,l=e?i.rp1:i.rp2,b=(e?i.z0:i.z1)[l],E=i.fv,k=i.pv,M=s.pop(),R=i.z2[i.contours[M]];let F=R;G.DEBUG&&console.log(i.step,"SHC["+e+"]",M);const $=k.distance(b,b,!1,!0);do F!==b&&E.setRelative(F,F,$,k),F=F.nextPointOnContour;while(F!==R)}function ar(e,i){const s=i.stack,l=e?i.rp1:i.rp2,b=(e?i.z0:i.z1)[l],E=i.fv,k=i.pv,M=s.pop();let R,F;switch(G.DEBUG&&console.log(i.step,"SHZ["+e+"]",M),M){case 0:R=i.tZone;break;case 1:R=i.gZone;break;default:throw new Error("Invalid zone")}const $=k.distance(b,b,!1,!0),X=R.length-2;for(let Z=0;Z<X;Z++)F=R[Z],E.setRelative(F,F,$,k)}function lr(e,i){const s=i.stack,l=s.pop()/64,b=s.pop(),E=i.z1[b],k=i.z0[i.rp0],M=i.fv,R=i.pv;M.setRelative(E,k,l,R),M.touch(E),G.DEBUG&&console.log(i.step,"MSIRP["+e+"]",l,b),i.rp1=i.rp0,i.rp2=b,e&&(i.rp0=b)}function cr(e,i){const s=i.stack,l=s.pop(),b=s.pop(),E=i.z0[b],k=i.fv,M=i.pv;let R=i.cvt[l];G.DEBUG&&console.log(i.step,"MIAP["+e+"]",l,"(",R,")",b);let F=M.distance(E,xt);e&&(Math.abs(F-R)<i.cvCutIn&&(F=R),F=i.round(F)),k.setRelative(E,xt,F,M),i.zp0===0&&(E.xo=E.x,E.yo=E.y),k.touch(E),i.rp0=i.rp1=b}function hr(e,i){const s=i.stack,l=s.pop(),b=i.z2[l];G.DEBUG&&console.log(i.step,"GC["+e+"]",l),s.push(64*i.dpv.distance(b,xt,e,!1))}function ur(e,i){const s=i.stack,l=s.pop(),b=s.pop(),E=i.z1[l],k=i.z0[b],M=i.dpv.distance(k,E,e,e);G.DEBUG&&console.log(i.step,"MD["+e+"]",l,b,"->",M),i.stack.push(Math.round(64*M))}function Gt(e,i){const s=i.stack,l=s.pop(),b=i.fv,E=i.pv,k=i.ppem,M=i.deltaBase+16*(e-1),R=i.deltaShift,F=i.z0;G.DEBUG&&console.log(i.step,"DELTAP["+e+"]",l,s);for(let $=0;$<l;$++){const X=s.pop(),Z=s.pop();if(M+((240&Z)>>4)!==k)continue;let ue=(15&Z)-8;ue>=0&&ue++,G.DEBUG&&console.log(i.step,"DELTAPFIX",X,"by",ue*R);const oe=F[X];b.setRelative(oe,oe,ue*R,E)}}function Mt(e,i){const s=i.stack,l=s.pop();G.DEBUG&&console.log(i.step,"ROUND[]"),s.push(64*i.round(l/64))}function jt(e,i){const s=i.stack,l=s.pop(),b=i.ppem,E=i.deltaBase+16*(e-1),k=i.deltaShift;G.DEBUG&&console.log(i.step,"DELTAC["+e+"]",l,s);for(let M=0;M<l;M++){const R=s.pop(),F=s.pop();if(E+((240&F)>>4)!==b)continue;let $=(15&F)-8;$>=0&&$++;const X=$*k;G.DEBUG&&console.log(i.step,"DELTACFIX",R,"by",X),i.cvt[R]+=X}}function dr(e,i){const s=i.stack,l=s.pop(),b=s.pop(),E=i.z2[l],k=i.z1[b];let M,R;G.DEBUG&&console.log(i.step,"SDPVTL["+e+"]",l,b),e?(M=E.y-k.y,R=k.x-E.x):(M=k.x-E.x,R=k.y-E.y),i.dpv=wt(M,R)}function ct(e,i){const s=i.stack,l=i.prog;let b=i.ip;G.DEBUG&&console.log(i.step,"PUSHB["+e+"]");for(let E=0;E<e;E++)s.push(l[++b]);i.ip=b}function ht(e,i){let s=i.ip;const l=i.prog,b=i.stack;G.DEBUG&&console.log(i.ip,"PUSHW["+e+"]");for(let E=0;E<e;E++){let k=l[++s]<<8|l[++s];32768&k&&(k=-(1+(65535^k))),b.push(k)}i.ip=s}function ve(e,i,s,l,b,E){const k=E.stack,M=e&&k.pop(),R=k.pop(),F=E.rp0,$=E.z0[F],X=E.z1[R],Z=E.minDis,ue=E.fv,oe=E.dpv;let ye,ne,ae,me;ne=ye=oe.distance(X,$,!0,!0),ae=ne>=0?1:-1,ne=Math.abs(ne),e&&(me=E.cvt[M],l&&Math.abs(ne-me)<E.cvCutIn&&(ne=me)),s&&ne<Z&&(ne=Z),l&&(ne=E.round(ne)),ue.setRelative(X,$,ae*ne,oe),ue.touch(X),G.DEBUG&&console.log(E.step,(e?"MIRP[":"MDRP[")+(i?"M":"m")+(s?">":"_")+(l?"R":"_")+(b===0?"Gr":b===1?"Bl":b===2?"Wh":"")+"]",e?M+"("+E.cvt[M]+","+me+")":"",R,"(d =",ye,"->",ae*ne,")"),E.rp1=E.rp0,E.rp2=R,i&&(E.rp0=R)}Ki.prototype.exec=function(e,i){if(typeof i!="number")throw new Error("Point size is not a number!");if(this._errorState>2)return;const s=this.font;let l=this._prepState;if(!l||l.ppem!==i){let b=this._fpgmState;if(!b){lt.prototype=Fs,b=this._fpgmState=new lt("fpgm",s.tables.fpgm),b.funcs=[],b.font=s,G.DEBUG&&(console.log("---EXEC FPGM---"),b.step=-1);try{ft(b)}catch(k){return console.log("Hinting error in FPGM:"+k),void(this._errorState=3)}}lt.prototype=b,l=this._prepState=new lt("prep",s.tables.prep),l.ppem=i;const E=s.tables.cvt;if(E){const k=l.cvt=new Array(E.length),M=i/s.unitsPerEm;for(let R=0;R<E.length;R++)k[R]=E[R]*M}else l.cvt=[];G.DEBUG&&(console.log("---EXEC PREP---"),l.step=-1);try{ft(l)}catch(k){this._errorState<2&&console.log("Hinting error in PREP:"+k),this._errorState=2}}if(!(this._errorState>1))try{return Vi(e,l)}catch(b){return this._errorState<1&&(console.log("Hinting error:"+b),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}},Vi=function(e,i){const s=i.ppem/i.font.unitsPerEm,l=s;let b,E,k,M=e.components;if(lt.prototype=i,M){const R=i.font;E=[],b=[];for(let F=0;F<M.length;F++){const $=M[F],X=R.glyphs.get($.glyphIndex);k=new lt("glyf",X.instructions),G.DEBUG&&(console.log("---EXEC COMP "+F+"---"),k.step=-1),Nt(X,k,s,l);const Z=Math.round($.dx*s),ue=Math.round($.dy*l),oe=k.gZone,ye=k.contours;for(let ae=0;ae<oe.length;ae++){const me=oe[ae];me.xTouched=me.yTouched=!1,me.xo=me.x=me.x+Z,me.yo=me.y=me.y+ue}const ne=E.length;E.push.apply(E,oe);for(let ae=0;ae<ye.length;ae++)b.push(ye[ae]+ne)}e.instructions&&!k.inhibitGridFit&&(k=new lt("glyf",e.instructions),k.gZone=k.z0=k.z1=k.z2=E,k.contours=b,E.push(new rt(0,0),new rt(Math.round(e.advanceWidth*s),0)),G.DEBUG&&(console.log("---EXEC COMPOSITE---"),k.step=-1),ft(k),E.length-=2)}else k=new lt("glyf",e.instructions),G.DEBUG&&(console.log("---EXEC GLYPH---"),k.step=-1),Nt(e,k,s,l),E=k.gZone;return E},Nt=function(e,i,s,l){const b=e.points||[],E=b.length,k=i.gZone=i.z0=i.z1=i.z2=[],M=i.contours=[];let R,F,$;for(let X=0;X<E;X++)R=b[X],k[X]=new rt(R.x*s,R.y*l,R.lastPointOfContour,R.onCurve);for(let X=0;X<E;X++)R=k[X],F||(F=R,M.push(X)),R.lastPointOfContour?(R.nextPointOnContour=F,F.prevPointOnContour=R,F=void 0):($=k[X+1],R.nextPointOnContour=$,$.prevPointOnContour=R);if(!i.inhibitGridFit){if(G.DEBUG){console.log("PROCESSING GLYPH",i.stack);for(let X=0;X<E;X++)console.log(X,k[X].x,k[X].y)}if(k.push(new rt(0,0),new rt(Math.round(e.advanceWidth*s),0)),ft(i),k.length-=2,G.DEBUG){console.log("FINISHED GLYPH",i.stack);for(let X=0;X<E;X++)console.log(X,k[X].x,k[X].y)}}},ft=function(e){let i=e.prog;if(!i)return;const s=i.length;let l;for(e.ip=0;e.ip<s;e.ip++){if(G.DEBUG&&e.step++,l=qi[i[e.ip]],!l)throw new Error("unknown instruction: 0x"+Number(i[e.ip]).toString(16));l(e)}},qi=[Ji.bind(void 0,it),Ji.bind(void 0,tt),Qi.bind(void 0,it),Qi.bind(void 0,tt),er.bind(void 0,it),er.bind(void 0,tt),tr.bind(void 0,0),tr.bind(void 0,1),ir.bind(void 0,0),ir.bind(void 0,1),function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"SPVFS[]",s,l),e.pv=e.dpv=wt(l,s)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"SPVFS[]",s,l),e.fv=wt(l,s)},function(e){const i=e.stack,s=e.pv;G.DEBUG&&console.log(e.step,"GPV[]"),i.push(16384*s.x),i.push(16384*s.y)},function(e){const i=e.stack,s=e.fv;G.DEBUG&&console.log(e.step,"GFV[]"),i.push(16384*s.x),i.push(16384*s.y)},function(e){e.fv=e.pv,G.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){const i=e.stack,s=i.pop(),l=i.pop(),b=i.pop(),E=i.pop(),k=i.pop(),M=e.z0,R=e.z1,F=M[s],$=M[l],X=R[b],Z=R[E],ue=e.z2[k];G.DEBUG&&console.log("ISECT[], ",s,l,b,E,k);const oe=F.x,ye=F.y,ne=$.x,ae=$.y,me=X.x,be=X.y,Le=Z.x,_e=Z.y,he=(oe-ne)*(be-_e)-(ye-ae)*(me-Le),ge=oe*ae-ye*ne,Te=me*_e-be*Le;ue.x=(ge*(me-Le)-Te*(oe-ne))/he,ue.y=(ge*(be-_e)-Te*(ye-ae))/he},function(e){e.rp0=e.stack.pop(),G.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),G.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),G.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){const i=e.stack.pop();switch(G.DEBUG&&console.log(e.step,"SZP0[]",i),e.zp0=i,i){case 0:e.tZone||Dt(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){const i=e.stack.pop();switch(G.DEBUG&&console.log(e.step,"SZP1[]",i),e.zp1=i,i){case 0:e.tZone||Dt(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){const i=e.stack.pop();switch(G.DEBUG&&console.log(e.step,"SZP2[]",i),e.zp2=i,i){case 0:e.tZone||Dt(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){const i=e.stack.pop();switch(G.DEBUG&&console.log(e.step,"SZPS[]",i),e.zp0=e.zp1=e.zp2=i,i){case 0:e.tZone||Dt(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),G.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){G.DEBUG&&console.log(e.step,"RTG[]"),e.round=Xi},function(e){G.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Is},function(e){const i=e.stack.pop();G.DEBUG&&console.log(e.step,"SMD[]",i),e.minDis=i/64},function(e){G.DEBUG&&console.log(e.step,"ELSE[]"),Zi(e,!1)},function(e){const i=e.stack.pop();G.DEBUG&&console.log(e.step,"JMPR[]",i),e.ip+=i-1},function(e){const i=e.stack.pop();G.DEBUG&&console.log(e.step,"SCVTCI[]",i),e.cvCutIn=i/64},void 0,void 0,function(e){const i=e.stack;G.DEBUG&&console.log(e.step,"DUP[]"),i.push(i[i.length-1])},Wt,function(e){G.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"SWAP[]"),i.push(s),i.push(l)},function(e){const i=e.stack;G.DEBUG&&console.log(e.step,"DEPTH[]"),i.push(i.length)},function(e){const i=e.stack,s=i.pop();G.DEBUG&&console.log(e.step,"CINDEX[]",s),i.push(i[i.length-s])},function(e){const i=e.stack,s=i.pop();G.DEBUG&&console.log(e.step,"MINDEX[]",s),i.push(i.splice(i.length-s,1)[0])},void 0,void 0,void 0,function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"LOOPCALL[]",s,l);const b=e.ip,E=e.prog;e.prog=e.funcs[s];for(let k=0;k<l;k++)ft(e),G.DEBUG&&console.log(++e.step,k+1<l?"next loopcall":"done loopcall",k);e.ip=b,e.prog=E},function(e){const i=e.stack.pop();G.DEBUG&&console.log(e.step,"CALL[]",i);const s=e.ip,l=e.prog;e.prog=e.funcs[i],ft(e),e.ip=s,e.prog=l,G.DEBUG&&console.log(++e.step,"returning from",i)},function(e){if(e.env!=="fpgm")throw new Error("FDEF not allowed here");const i=e.stack,s=e.prog;let l=e.ip;const b=i.pop(),E=l;for(G.DEBUG&&console.log(e.step,"FDEF[]",b);s[++l]!==45;);e.ip=l,e.funcs[b]=s.slice(E+1,l)},void 0,rr.bind(void 0,0),rr.bind(void 0,1),sr.bind(void 0,it),sr.bind(void 0,tt),nr.bind(void 0,0),nr.bind(void 0,1),or.bind(void 0,0),or.bind(void 0,1),ar.bind(void 0,0),ar.bind(void 0,1),function(e){const i=e.stack;let s=e.loop;const l=e.fv,b=i.pop()/64,E=e.z2;for(;s--;){const k=i.pop(),M=E[k];G.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-s)+": ":"")+"SHPIX[]",k,b),l.setRelative(M,M,b),l.touch(M)}e.loop=1},function(e){const i=e.stack,s=e.rp1,l=e.rp2;let b=e.loop;const E=e.z0[s],k=e.z1[l],M=e.fv,R=e.dpv,F=e.z2;for(;b--;){const $=i.pop(),X=F[$];G.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-b)+": ":"")+"IP[]",$,s,"<->",l),M.interpolate(X,E,k,R),M.touch(X)}e.loop=1},lr.bind(void 0,0),lr.bind(void 0,1),function(e){const i=e.stack,s=e.rp0,l=e.z0[s];let b=e.loop;const E=e.fv,k=e.pv,M=e.z1;for(;b--;){const R=i.pop(),F=M[R];G.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-b)+": ":"")+"ALIGNRP[]",R),E.setRelative(F,l,0,k),E.touch(F)}e.loop=1},function(e){G.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Os},cr.bind(void 0,0),cr.bind(void 0,1),function(e){const i=e.prog;let s=e.ip;const l=e.stack,b=i[++s];G.DEBUG&&console.log(e.step,"NPUSHB[]",b);for(let E=0;E<b;E++)l.push(i[++s]);e.ip=s},function(e){let i=e.ip;const s=e.prog,l=e.stack,b=s[++i];G.DEBUG&&console.log(e.step,"NPUSHW[]",b);for(let E=0;E<b;E++){let k=s[++i]<<8|s[++i];32768&k&&(k=-(1+(65535^k))),l.push(k)}e.ip=i},function(e){const i=e.stack;let s=e.store;s||(s=e.store=[]);const l=i.pop(),b=i.pop();G.DEBUG&&console.log(e.step,"WS",l,b),s[b]=l},function(e){const i=e.stack,s=e.store,l=i.pop();G.DEBUG&&console.log(e.step,"RS",l);const b=s&&s[l]||0;i.push(b)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"WCVTP",s,l),e.cvt[l]=s/64},function(e){const i=e.stack,s=i.pop();G.DEBUG&&console.log(e.step,"RCVT",s),i.push(64*e.cvt[s])},hr.bind(void 0,0),hr.bind(void 0,1),void 0,ur.bind(void 0,0),ur.bind(void 0,1),function(e){G.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){G.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"LT[]",s,l),i.push(l<s?1:0)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"LTEQ[]",s,l),i.push(l<=s?1:0)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"GT[]",s,l),i.push(l>s?1:0)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"GTEQ[]",s,l),i.push(l>=s?1:0)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"EQ[]",s,l),i.push(s===l?1:0)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"NEQ[]",s,l),i.push(s!==l?1:0)},function(e){const i=e.stack,s=i.pop();G.DEBUG&&console.log(e.step,"ODD[]",s),i.push(Math.trunc(s)%2?1:0)},function(e){const i=e.stack,s=i.pop();G.DEBUG&&console.log(e.step,"EVEN[]",s),i.push(Math.trunc(s)%2?0:1)},function(e){let i=e.stack.pop();G.DEBUG&&console.log(e.step,"IF[]",i),i||(Zi(e,!0),G.DEBUG&&console.log(e.step,"EIF[]"))},function(e){G.DEBUG&&console.log(e.step,"EIF[]")},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"AND[]",s,l),i.push(s&&l?1:0)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"OR[]",s,l),i.push(s||l?1:0)},function(e){const i=e.stack,s=i.pop();G.DEBUG&&console.log(e.step,"NOT[]",s),i.push(s?0:1)},Gt.bind(void 0,1),function(e){const i=e.stack.pop();G.DEBUG&&console.log(e.step,"SDB[]",i),e.deltaBase=i},function(e){const i=e.stack.pop();G.DEBUG&&console.log(e.step,"SDS[]",i),e.deltaShift=Math.pow(.5,i)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"ADD[]",s,l),i.push(l+s)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"SUB[]",s,l),i.push(l-s)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"DIV[]",s,l),i.push(64*l/s)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"MUL[]",s,l),i.push(l*s/64)},function(e){const i=e.stack,s=i.pop();G.DEBUG&&console.log(e.step,"ABS[]",s),i.push(Math.abs(s))},function(e){const i=e.stack;let s=i.pop();G.DEBUG&&console.log(e.step,"NEG[]",s),i.push(-s)},function(e){const i=e.stack,s=i.pop();G.DEBUG&&console.log(e.step,"FLOOR[]",s),i.push(64*Math.floor(s/64))},function(e){const i=e.stack,s=i.pop();G.DEBUG&&console.log(e.step,"CEILING[]",s),i.push(64*Math.ceil(s/64))},Mt.bind(void 0,0),Mt.bind(void 0,1),Mt.bind(void 0,2),Mt.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"WCVTF[]",s,l),e.cvt[l]=s*e.ppem/e.font.unitsPerEm},Gt.bind(void 0,2),Gt.bind(void 0,3),jt.bind(void 0,1),jt.bind(void 0,2),jt.bind(void 0,3),function(e){let i,s=e.stack.pop();switch(G.DEBUG&&console.log(e.step,"SROUND[]",s),e.round=Yi,192&s){case 0:i=.5;break;case 64:i=1;break;case 128:i=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=i,48&s){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*i;break;case 32:e.srPhase=.5*i;break;case 48:e.srPhase=.75*i;break;default:throw new Error("invalid SROUND value")}s&=15,e.srThreshold=s===0?0:(s/8-.5)*i},function(e){let i,s=e.stack.pop();switch(G.DEBUG&&console.log(e.step,"S45ROUND[]",s),e.round=Yi,192&s){case 0:i=Math.sqrt(2)/2;break;case 64:i=Math.sqrt(2);break;case 128:i=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=i,48&s){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*i;break;case 32:e.srPhase=.5*i;break;case 48:e.srPhase=.75*i;break;default:throw new Error("invalid S45ROUND value")}s&=15,e.srThreshold=s===0?0:(s/8-.5)*i},void 0,void 0,function(e){G.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Bs},void 0,function(e){G.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Ps},function(e){G.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Us},Wt,Wt,void 0,void 0,void 0,void 0,void 0,function(e){const i=e.stack.pop();G.DEBUG&&console.log(e.step,"SCANCTRL[]",i)},dr.bind(void 0,0),dr.bind(void 0,1),function(e){const i=e.stack,s=i.pop();let l=0;G.DEBUG&&console.log(e.step,"GETINFO[]",s),1&s&&(l=35),32&s&&(l|=4096),i.push(l)},void 0,function(e){const i=e.stack,s=i.pop(),l=i.pop(),b=i.pop();G.DEBUG&&console.log(e.step,"ROLL[]"),i.push(l),i.push(s),i.push(b)},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"MAX[]",s,l),i.push(Math.max(l,s))},function(e){const i=e.stack,s=i.pop(),l=i.pop();G.DEBUG&&console.log(e.step,"MIN[]",s,l),i.push(Math.min(l,s))},function(e){const i=e.stack.pop();G.DEBUG&&console.log(e.step,"SCANTYPE[]",i)},function(e){const i=e.stack.pop();let s=e.stack.pop();switch(G.DEBUG&&console.log(e.step,"INSTCTRL[]",i,s),i){case 1:return void(e.inhibitGridFit=!!s);case 2:return void(e.ignoreCvt=!!s);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,ct.bind(void 0,1),ct.bind(void 0,2),ct.bind(void 0,3),ct.bind(void 0,4),ct.bind(void 0,5),ct.bind(void 0,6),ct.bind(void 0,7),ct.bind(void 0,8),ht.bind(void 0,1),ht.bind(void 0,2),ht.bind(void 0,3),ht.bind(void 0,4),ht.bind(void 0,5),ht.bind(void 0,6),ht.bind(void 0,7),ht.bind(void 0,8),ve.bind(void 0,0,0,0,0,0),ve.bind(void 0,0,0,0,0,1),ve.bind(void 0,0,0,0,0,2),ve.bind(void 0,0,0,0,0,3),ve.bind(void 0,0,0,0,1,0),ve.bind(void 0,0,0,0,1,1),ve.bind(void 0,0,0,0,1,2),ve.bind(void 0,0,0,0,1,3),ve.bind(void 0,0,0,1,0,0),ve.bind(void 0,0,0,1,0,1),ve.bind(void 0,0,0,1,0,2),ve.bind(void 0,0,0,1,0,3),ve.bind(void 0,0,0,1,1,0),ve.bind(void 0,0,0,1,1,1),ve.bind(void 0,0,0,1,1,2),ve.bind(void 0,0,0,1,1,3),ve.bind(void 0,0,1,0,0,0),ve.bind(void 0,0,1,0,0,1),ve.bind(void 0,0,1,0,0,2),ve.bind(void 0,0,1,0,0,3),ve.bind(void 0,0,1,0,1,0),ve.bind(void 0,0,1,0,1,1),ve.bind(void 0,0,1,0,1,2),ve.bind(void 0,0,1,0,1,3),ve.bind(void 0,0,1,1,0,0),ve.bind(void 0,0,1,1,0,1),ve.bind(void 0,0,1,1,0,2),ve.bind(void 0,0,1,1,0,3),ve.bind(void 0,0,1,1,1,0),ve.bind(void 0,0,1,1,1,1),ve.bind(void 0,0,1,1,1,2),ve.bind(void 0,0,1,1,1,3),ve.bind(void 0,1,0,0,0,0),ve.bind(void 0,1,0,0,0,1),ve.bind(void 0,1,0,0,0,2),ve.bind(void 0,1,0,0,0,3),ve.bind(void 0,1,0,0,1,0),ve.bind(void 0,1,0,0,1,1),ve.bind(void 0,1,0,0,1,2),ve.bind(void 0,1,0,0,1,3),ve.bind(void 0,1,0,1,0,0),ve.bind(void 0,1,0,1,0,1),ve.bind(void 0,1,0,1,0,2),ve.bind(void 0,1,0,1,0,3),ve.bind(void 0,1,0,1,1,0),ve.bind(void 0,1,0,1,1,1),ve.bind(void 0,1,0,1,1,2),ve.bind(void 0,1,0,1,1,3),ve.bind(void 0,1,1,0,0,0),ve.bind(void 0,1,1,0,0,1),ve.bind(void 0,1,1,0,0,2),ve.bind(void 0,1,1,0,0,3),ve.bind(void 0,1,1,0,1,0),ve.bind(void 0,1,1,0,1,1),ve.bind(void 0,1,1,0,1,2),ve.bind(void 0,1,1,0,1,3),ve.bind(void 0,1,1,1,0,0),ve.bind(void 0,1,1,1,0,1),ve.bind(void 0,1,1,1,0,2),ve.bind(void 0,1,1,1,0,3),ve.bind(void 0,1,1,1,1,0),ve.bind(void 0,1,1,1,1,1),ve.bind(void 0,1,1,1,1,2),ve.bind(void 0,1,1,1,1,3)];const Hs=Ki;function De(e){(e=e||{}).empty||(gt(e.familyName,"When creating a new Font object, familyName is required."),gt(e.styleName,"When creating a new Font object, styleName is required."),gt(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),gt(e.ascender,"When creating a new Font object, ascender is required."),gt(e.descender,"When creating a new Font object, descender is required."),gt(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||e.familyName+e.styleName},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new pt.GlyphSet(this,e.glyphs||[]),this.encoding=new Ne(this),this.position=new Ts(this),this.substitution=new Ms(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:this.outlinesFormat==="truetype"?this._hinting=new Hs(this):void 0}})}De.prototype.hasChar=function(e){return this.encoding.charToGlyphIndex(e)!==null},De.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},De.prototype.charToGlyph=function(e){const i=this.charToGlyphIndex(e);let s=this.glyphs.get(i);return s||(s=this.glyphs.get(0)),s},De.prototype.stringToGlyphs=function(e,i){i=i||this.defaultRenderOptions;const s=[];for(let k=0;k<e.length;k+=1){const M=e[k];s.push(this.charToGlyphIndex(M))}let l=s.length;if(i.features){const k=i.script||this.substitution.getDefaultScriptName();let M=[];i.features.liga&&(M=M.concat(this.substitution.getFeature("liga",k,i.language))),i.features.rlig&&(M=M.concat(this.substitution.getFeature("rlig",k,i.language)));for(let R=0;R<l;R+=1)for(let F=0;F<M.length;F++){const $=M[F],X=$.sub,Z=X.length;let ue=0;for(;ue<Z&&X[ue]===s[R+ue];)ue++;ue===Z&&(s.splice(R,Z,$.by),l=l-Z+1)}}const b=new Array(l),E=this.glyphs.get(0);for(let k=0;k<l;k+=1)b[k]=this.glyphs.get(s[k])||E;return b},De.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},De.prototype.nameToGlyph=function(e){const i=this.nameToGlyphIndex(e);let s=this.glyphs.get(i);return s||(s=this.glyphs.get(0)),s},De.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},De.prototype.getKerningValue=function(e,i){return e=e.index||e,i=i.index||i,this.kerningPairs[e+","+i]||0},De.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},De.prototype.forEachGlyph=function(e,i,s,l,b,E){i=i!==void 0?i:0,s=s!==void 0?s:0,l=l!==void 0?l:72,b=b||this.defaultRenderOptions;const k=1/this.unitsPerEm*l,M=this.stringToGlyphs(e,b);let R;if(b.kerning){const F=b.script||this.position.getDefaultScriptName();R=this.position.getKerningTables(F,b.language)}for(let F=0;F<M.length;F+=1){const $=M[F];E.call(this,$,i,s,l,b),$.advanceWidth&&(i+=$.advanceWidth*k),b.kerning&&F<M.length-1&&(i+=(R?this.position.getKerningValue(R,$.index,M[F+1].index):this.getKerningValue($,M[F+1]))*k),b.letterSpacing?i+=b.letterSpacing*l:b.tracking&&(i+=b.tracking/1e3*l)}return i},De.prototype.getPath=function(e,i,s,l,b){const E=new r;return this.forEachGlyph(e,i,s,l,b,function(k,M,R,F){const $=k.getPath(M,R,F,b,this);E.extend($)}),E},De.prototype.getPaths=function(e,i,s,l,b){const E=[];return this.forEachGlyph(e,i,s,l,b,function(k,M,R,F){const $=k.getPath(M,R,F,b,this);E.push($)}),E},De.prototype.getAdvanceWidth=function(e,i,s){return this.forEachGlyph(e,0,0,i,s,function(){})},De.prototype.draw=function(e,i,s,l,b,E){this.getPath(i,s,l,b,E).draw(e)},De.prototype.drawPoints=function(e,i,s,l,b,E){this.forEachGlyph(i,s,l,b,E,function(k,M,R,F){k.drawPoints(e,M,R,F)})},De.prototype.drawMetrics=function(e,i,s,l,b,E){this.forEachGlyph(i,s,l,b,E,function(k,M,R,F){k.drawMetrics(e,M,R,F)})},De.prototype.getEnglishName=function(e){const i=this.names[e];if(i)return i.en},De.prototype.validate=function(){const e=this;function i(l,b){}function s(l){const b=e.getEnglishName(l);b&&b.trim().length>0}s("fontFamily"),s("weightName"),s("manufacturer"),s("copyright"),s("version"),this.unitsPerEm>0},De.prototype.toTables=function(){return As(this)},De.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},De.prototype.toArrayBuffer=function(){const e=this.toTables().encode(),i=new ArrayBuffer(e.length),s=new Uint8Array(i);for(let l=0;l<e.length;l++)s[l]=e[l];return i},De.prototype.download=function(e){const i=this.getEnglishName("fontFamily"),s=this.getEnglishName("fontSubfamily");e=e||i.replace(/\s/g,"")+"-"+s+".otf";const l=this.toArrayBuffer();if(typeof window<"u")window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,l.byteLength,function(b){b.root.getFile(e,{create:!0},function(E){E.createWriter(function(k){const M=new DataView(l),R=new Blob([M],{type:"font/opentype"});k.write(R),k.addEventListener("writeend",function(){location.href=E.toURL()},!1)})})},function(b){throw new Error(b.name+": "+b.message)});else{const b=u(89),E=function(k){const M=new Buffer(k.byteLength),R=new Uint8Array(k);for(let F=0;F<M.length;++F)M[F]=R[F];return M}(l);b.writeFileSync(e,E)}},De.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},De.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},De.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};const fr=De;function Ns(e,i,s){const l={},b=new de.Parser(e,i);return l.tag=b.parseTag(),l.minValue=b.parseFixed(),l.defaultValue=b.parseFixed(),l.maxValue=b.parseFixed(),b.skip("uShort",1),l.name=s[b.parseUShort()]||{},l}function Ws(e,i,s,l){const b={},E=new de.Parser(e,i);b.name=l[E.parseUShort()]||{},E.skip("uShort",1),b.coordinates={};for(let k=0;k<s.length;++k)b.coordinates[s[k].tag]=E.parseFixed();return b}const Gs=function(e,i,s){const l=new de.Parser(e,i),b=l.parseULong();g.argument(b===65536,"Unsupported fvar table version.");const E=l.parseOffset16();l.skip("uShort",1);const k=l.parseUShort(),M=l.parseUShort(),R=l.parseUShort(),F=l.parseUShort(),$=[];for(let ue=0;ue<k;ue++)$.push(Ns(e,i+E+ue*M,s));const X=[],Z=i+E+k*M;for(let ue=0;ue<R;ue++)X.push(Ws(e,Z+ue*F,$,s));return{axes:$,instances:X}},Je=new Array(10);Je[1]=function(){const e=this.offset+this.relativeOffset,i=this.parseUShort();return i===1?{posFormat:1,coverage:this.parsePointer(J.coverage),value:this.parseValueRecord()}:i===2?{posFormat:2,coverage:this.parsePointer(J.coverage),values:this.parseValueRecordList()}:void g.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Je[2]=function(){const e=this.offset+this.relativeOffset,i=this.parseUShort(),s=this.parsePointer(J.coverage),l=this.parseUShort(),b=this.parseUShort();if(i===1)return{posFormat:i,coverage:s,valueFormat1:l,valueFormat2:b,pairSets:this.parseList(J.pointer(J.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(l),value2:this.parseValueRecord(b)}})))};if(i===2){const E=this.parsePointer(J.classDef),k=this.parsePointer(J.classDef),M=this.parseUShort(),R=this.parseUShort();return{posFormat:i,coverage:s,valueFormat1:l,valueFormat2:b,classDef1:E,classDef2:k,class1Count:M,class2Count:R,classRecords:this.parseList(M,J.list(R,function(){return{value1:this.parseValueRecord(l),value2:this.parseValueRecord(b)}}))}}g.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.")},Je[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Je[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Je[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Je[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Je[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Je[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Je[9]=function(){return{error:"GPOS Lookup 9 not supported"}},new Array(10);const js=function(e,i){const s=new J(e,i=i||0),l=s.parseVersion(1);return g.argument(l===1||l===1.1,"Unsupported GPOS table version "+l),l===1?{version:l,scripts:s.parseScriptList(),features:s.parseFeatureList(),lookups:s.parseLookupList(Je)}:{version:l,scripts:s.parseScriptList(),features:s.parseFeatureList(),lookups:s.parseLookupList(Je),variations:s.parseFeatureVariationsList()}},zs=function(e,i){const s=new de.Parser(e,i),l=s.parseUShort();if(l===0)return function(b){const E={};b.skip("uShort");const k=b.parseUShort();g.argument(k===0,"Unsupported kern sub-table version."),b.skip("uShort",2);const M=b.parseUShort();b.skip("uShort",3);for(let R=0;R<M;R+=1){const F=b.parseUShort(),$=b.parseUShort(),X=b.parseShort();E[F+","+$]=X}return E}(s);if(l===1)return function(b){const E={};b.skip("uShort"),b.parseULong()>1&&console.warn("Only the first kern subtable is supported."),b.skip("uLong");const k=255&b.parseUShort();if(b.skip("uShort"),k===0){const M=b.parseUShort();b.skip("uShort",3);for(let R=0;R<M;R+=1){const F=b.parseUShort(),$=b.parseUShort(),X=b.parseShort();E[F+","+$]=X}}return E}(s);throw new Error("Unsupported kern table version ("+l+").")},$s=function(e,i,s,l){const b=new de.Parser(e,i),E=l?b.parseUShort:b.parseULong,k=[];for(let M=0;M<s+1;M+=1){let R=E.call(b);l&&(R*=2),k.push(R)}return k};function qs(e,i){u(89).readFile(e,function(s,l){if(s)return i(s.message);i(null,$i(l))})}function Vs(e,i){const s=new XMLHttpRequest;s.open("get",e,!0),s.responseType="arraybuffer",s.onload=function(){return s.response?i(null,s.response):i("Font could not be loaded: "+s.statusText)},s.onerror=function(){i("Font could not be loaded")},s.send()}function pr(e,i){const s=[];let l=12;for(let b=0;b<i;b+=1){const E=de.getTag(e,l),k=de.getULong(e,l+4),M=de.getULong(e,l+8),R=de.getULong(e,l+12);s.push({tag:E,checksum:k,offset:M,length:R,compression:!1}),l+=16}return s}function Oe(e,i){if(i.compression==="WOFF"){const s=new Uint8Array(e.buffer,i.offset+2,i.compressedLength-2),l=new Uint8Array(i.length);if(m()(s,l),l.byteLength!==i.length)throw new Error("Decompression error: "+i.tag+" decompressed length doesn't match recorded length");return{data:new DataView(l.buffer,0),offset:0}}return{data:e,offset:i.offset}}function zt(e){let i,s;const l=new fr({empty:!0}),b=new DataView(e,0);let E,k=[];const M=de.getTag(b,0);if(M===String.fromCharCode(0,1,0,0)||M==="true"||M==="typ1")l.outlinesFormat="truetype",E=de.getUShort(b,4),k=pr(b,E);else if(M==="OTTO")l.outlinesFormat="cff",E=de.getUShort(b,4),k=pr(b,E);else{if(M!=="wOFF")throw new Error("Unsupported OpenType signature "+M);{const _e=de.getTag(b,4);if(_e===String.fromCharCode(0,1,0,0))l.outlinesFormat="truetype";else{if(_e!=="OTTO")throw new Error("Unsupported OpenType flavor "+M);l.outlinesFormat="cff"}E=de.getUShort(b,12),k=function(he,ge){const Te=[];let we=44;for(let Ie=0;Ie<ge;Ie+=1){const We=de.getTag(he,we),qe=de.getULong(he,we+4),Fe=de.getULong(he,we+8),ze=de.getULong(he,we+12);let Ue;Ue=Fe<ze&&"WOFF",Te.push({tag:We,offset:qe,compression:Ue,compressedLength:Fe,length:ze}),we+=20}return Te}(b,E)}}let R,F,$,X,Z,ue,oe,ye,ne,ae,me;for(let _e=0;_e<E;_e+=1){const he=k[_e];let ge;switch(he.tag){case"cmap":ge=Oe(b,he),l.tables.cmap=Re(ge.data,ge.offset),l.encoding=new nt(l.tables.cmap);break;case"cvt ":ge=Oe(b,he),me=new de.Parser(ge.data,ge.offset),l.tables.cvt=me.parseShortList(he.length/2);break;case"fvar":F=he;break;case"fpgm":ge=Oe(b,he),me=new de.Parser(ge.data,ge.offset),l.tables.fpgm=me.parseByteList(he.length);break;case"head":ge=Oe(b,he),l.tables.head=is(ge.data,ge.offset),l.unitsPerEm=l.tables.head.unitsPerEm,i=l.tables.head.indexToLocFormat;break;case"hhea":ge=Oe(b,he),l.tables.hhea=ss(ge.data,ge.offset),l.ascender=l.tables.hhea.ascender,l.descender=l.tables.hhea.descender,l.numberOfHMetrics=l.tables.hhea.numberOfHMetrics;break;case"hmtx":ue=he;break;case"ltag":ge=Oe(b,he),s=cs(ge.data,ge.offset);break;case"maxp":ge=Oe(b,he),l.tables.maxp=hs(ge.data,ge.offset),l.numGlyphs=l.tables.maxp.numGlyphs;break;case"name":ne=he;break;case"OS/2":ge=Oe(b,he),l.tables.os2=ms(ge.data,ge.offset);break;case"post":ge=Oe(b,he),l.tables.post=bs(ge.data,ge.offset),l.glyphNames=new je(l.tables.post);break;case"prep":ge=Oe(b,he),me=new de.Parser(ge.data,ge.offset),l.tables.prep=me.parseByteList(he.length);break;case"glyf":$=he;break;case"loca":ye=he;break;case"CFF ":R=he;break;case"kern":oe=he;break;case"GPOS":X=he;break;case"GSUB":Z=he;break;case"meta":ae=he}}const be=Oe(b,ne);if(l.tables.name=gs(be.data,be.offset,s),l.names=l.tables.name,$&&ye){const _e=i===0,he=Oe(b,ye),ge=$s(he.data,he.offset,l.numGlyphs,_e),Te=Oe(b,$);l.glyphs=mi.parse(Te.data,Te.offset,ge,l)}else{if(!R)throw new Error("Font doesn't contain TrueType or CFF outlines.");{const _e=Oe(b,R);es(_e.data,_e.offset,l)}}const Le=Oe(b,ue);if(os(Le.data,Le.offset,l.numberOfHMetrics,l.numGlyphs,l.glyphs),function(_e){let he;const ge=_e.tables.cmap.glyphIndexMap,Te=Object.keys(ge);for(let we=0;we<Te.length;we+=1){const Ie=Te[we],We=ge[Ie];he=_e.glyphs.get(We),he.addUnicode(parseInt(Ie))}for(let we=0;we<_e.glyphs.length;we+=1)he=_e.glyphs.get(we),_e.cffEncoding?_e.isCIDFont?he.name="gid"+we:he.name=_e.cffEncoding.charset[we]:_e.glyphNames.names&&(he.name=_e.glyphNames.glyphIndexToName(we))}(l),oe){const _e=Oe(b,oe);l.kerningPairs=zs(_e.data,_e.offset)}else l.kerningPairs={};if(X){const _e=Oe(b,X);l.tables.gpos=js(_e.data,_e.offset)}if(Z){const _e=Oe(b,Z);l.tables.gsub=ws(_e.data,_e.offset)}if(F){const _e=Oe(b,F);l.tables.fvar=Gs(_e.data,_e.offset,l.names)}if(ae){const _e=Oe(b,ae);l.tables.meta=Es(_e.data,_e.offset),l.metas=l.tables.meta}return l}function Ks(e,i){(typeof window>"u"?qs:Vs)(e,function(s,l){if(s)return i(s);let b;try{b=zt(l)}catch(E){return i(E,null)}return i(null,b)})}function Xs(e){return zt($i(u(89).readFileSync(e)))}},896:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(978);class m extends C.Writable{constructor(){super(...arguments),this.offset=0,this._waiters=[],this._closed=!1}_write(h,o,r){let n=0;const _=()=>{for(;this._waiters.length>0;){const g=this._waiters[0];if(this._buffer){const w=this._buffer.size-this._buffer.offset;if(!(w+h.length>=g.size)){if(!g.skip){const p=Buffer.alloc(w+h.length);this._buffer.buf.copy(p,0,this._buffer.offset,this._buffer.size),h.copy(p,w,0,h.length),this._buffer.buf=p}this._buffer.offset=0,this._buffer.size=w+h.length,r();break}if(g.skip)this._buffer=void 0,g.resolve();else{const p=Math.min(w,g.size),S=Buffer.alloc(g.size);this._buffer.buf.copy(S,0,this._buffer.offset,this._buffer.offset+p),h.copy(S,p,0,g.size-p),g.resolve(S)}if(this.offset+=g.size,this._waiters.shift(),this._buffer=void 0,w+h.length===g.size){r();break}n+=g.size-w}else{if(!(h.length-n>=g.size)){this._buffer={buf:g.skip?void 0:h.slice(n),offset:0,size:h.length-n},n=h.length,r();break}if(g.skip?g.resolve():g.resolve(h.slice(n,n+g.size)),this.offset+=g.size,this._waiters.shift(),n+=g.size,h.length===n){r();break}}}this._processTrigger=h.length-n>0?_:void 0};_()}_destroy(h,o){this._processTrigger=void 0;for(const r of this._waiters)r.reject(h||new Error("stream destroyed"));this._waiters=[],this._closed=!0}_final(h){this._processTrigger=void 0;for(const o of this._waiters)o.reject(new Error("not enough data in stream"));this._waiters=[],this._closed=!0}read(h){return new Promise((o,r)=>{this._closed&&r(new Error("stream is closed")),this._waiters.push({resolve:o,reject:r,size:h,skip:!1}),this._processTrigger&&this._processTrigger()})}skip(h){return new Promise((o,r)=>{this._closed&&r(new Error("stream is closed")),this._waiters.push({resolve:o,reject:r,size:h,skip:!0}),this._processTrigger&&this._processTrigger()})}}function a(){return new m}f.exports=Object.assign(a,{default:a}),d.default=a},311:f=>{function d(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function u(D,H){this.source=D,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=H,this.destLen=0,this.ltree=new d,this.dtree=new d}var C=new d,m=new d,a=new Uint8Array(30),t=new Uint16Array(30),h=new Uint8Array(30),o=new Uint16Array(30),r=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),n=new d,_=new Uint8Array(320);function g(D,H,L,O){var I,P;for(I=0;I<L;++I)D[I]=0;for(I=0;I<30-L;++I)D[I+L]=I/L|0;for(P=O,I=0;I<30;++I)H[I]=P,P+=1<<D[I]}var w=new Uint16Array(16);function p(D,H,L,O){var I,P;for(I=0;I<16;++I)D.table[I]=0;for(I=0;I<O;++I)D.table[H[L+I]]++;for(D.table[0]=0,P=0,I=0;I<16;++I)w[I]=P,P+=D.table[I];for(I=0;I<O;++I)H[L+I]&&(D.trans[w[H[L+I]]++]=I)}function S(D){D.bitcount--||(D.tag=D.source[D.sourceIndex++],D.bitcount=7);var H=1&D.tag;return D.tag>>>=1,H}function x(D,H,L){if(!H)return L;for(;D.bitcount<24;)D.tag|=D.source[D.sourceIndex++]<<D.bitcount,D.bitcount+=8;var O=D.tag&65535>>>16-H;return D.tag>>>=H,D.bitcount-=H,O+L}function A(D,H){for(;D.bitcount<24;)D.tag|=D.source[D.sourceIndex++]<<D.bitcount,D.bitcount+=8;var L=0,O=0,I=0,P=D.tag;do O=2*O+(1&P),P>>>=1,++I,L+=H.table[I],O-=H.table[I];while(O>=0);return D.tag=P,D.bitcount-=I,H.trans[L+O]}function T(D,H,L){var O,I,P,Q,N,K;for(O=x(D,5,257),I=x(D,5,1),P=x(D,4,4),Q=0;Q<19;++Q)_[Q]=0;for(Q=0;Q<P;++Q){var V=x(D,3,0);_[r[Q]]=V}for(p(n,_,0,19),N=0;N<O+I;){var re=A(D,n);switch(re){case 16:var j=_[N-1];for(K=x(D,2,3);K;--K)_[N++]=j;break;case 17:for(K=x(D,3,3);K;--K)_[N++]=0;break;case 18:for(K=x(D,7,11);K;--K)_[N++]=0;break;default:_[N++]=re}}p(H,_,0,O),p(L,_,O,I)}function B(D,H,L){for(;;){var O,I,P,Q,N=A(D,H);if(N===256)return 0;if(N<256)D.dest[D.destLen++]=N;else for(O=x(D,a[N-=257],t[N]),I=A(D,L),Q=P=D.destLen-x(D,h[I],o[I]);Q<P+O;++Q)D.dest[D.destLen++]=D.dest[Q]}}function U(D){for(var H,L;D.bitcount>8;)D.sourceIndex--,D.bitcount-=8;if((H=256*(H=D.source[D.sourceIndex+1])+D.source[D.sourceIndex])!==(65535&~(256*D.source[D.sourceIndex+3]+D.source[D.sourceIndex+2])))return-3;for(D.sourceIndex+=4,L=H;L;--L)D.dest[D.destLen++]=D.source[D.sourceIndex++];return D.bitcount=0,0}(function(D,H){var L;for(L=0;L<7;++L)D.table[L]=0;for(D.table[7]=24,D.table[8]=152,D.table[9]=112,L=0;L<24;++L)D.trans[L]=256+L;for(L=0;L<144;++L)D.trans[24+L]=L;for(L=0;L<8;++L)D.trans[168+L]=280+L;for(L=0;L<112;++L)D.trans[176+L]=144+L;for(L=0;L<5;++L)H.table[L]=0;for(H.table[5]=32,L=0;L<32;++L)H.trans[L]=L})(C,m),g(a,t,4,3),g(h,o,2,1),a[28]=0,t[28]=258,f.exports=function(D,H){var L,O,I=new u(D,H);do{switch(L=S(I),x(I,2,0)){case 0:O=U(I);break;case 1:O=B(I,C,m);break;case 2:T(I,I.ltree,I.dtree),O=B(I,I.ltree,I.dtree);break;default:O=-3}if(O!==0)throw new Error("Data error")}while(!L);return I.destLen<I.dest.length?typeof I.dest.slice=="function"?I.dest.slice(0,I.destLen):I.dest.subarray(0,I.destLen):I.dest}},371:f=>{f.exports=function(d){d.prototype[Symbol.iterator]=function*(){for(let u=this.head;u;u=u.next)yield u.value}}},411:(f,d,u)=>{function C(o){var r=this;if(r instanceof C||(r=new C),r.tail=null,r.head=null,r.length=0,o&&typeof o.forEach=="function")o.forEach(function(g){r.push(g)});else if(arguments.length>0)for(var n=0,_=arguments.length;n<_;n++)r.push(arguments[n]);return r}function m(o,r,n){var _=r===o.head?new h(n,null,r,o):new h(n,r,r.next,o);return _.next===null&&(o.tail=_),_.prev===null&&(o.head=_),o.length++,_}function a(o,r){o.tail=new h(r,o.tail,null,o),o.head||(o.head=o.tail),o.length++}function t(o,r){o.head=new h(r,null,o.head,o),o.tail||(o.tail=o.head),o.length++}function h(o,r,n,_){if(!(this instanceof h))return new h(o,r,n,_);this.list=_,this.value=o,r?(r.next=this,this.prev=r):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}f.exports=C,C.Node=h,C.create=C,C.prototype.removeNode=function(o){if(o.list!==this)throw new Error("removing node which does not belong to this list");var r=o.next,n=o.prev;return r&&(r.prev=n),n&&(n.next=r),o===this.head&&(this.head=r),o===this.tail&&(this.tail=n),o.list.length--,o.next=null,o.prev=null,o.list=null,r},C.prototype.unshiftNode=function(o){if(o!==this.head){o.list&&o.list.removeNode(o);var r=this.head;o.list=this,o.next=r,r&&(r.prev=o),this.head=o,this.tail||(this.tail=o),this.length++}},C.prototype.pushNode=function(o){if(o!==this.tail){o.list&&o.list.removeNode(o);var r=this.tail;o.list=this,o.prev=r,r&&(r.next=o),this.tail=o,this.head||(this.head=o),this.length++}},C.prototype.push=function(){for(var o=0,r=arguments.length;o<r;o++)a(this,arguments[o]);return this.length},C.prototype.unshift=function(){for(var o=0,r=arguments.length;o<r;o++)t(this,arguments[o]);return this.length},C.prototype.pop=function(){if(this.tail){var o=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,o}},C.prototype.shift=function(){if(this.head){var o=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,o}},C.prototype.forEach=function(o,r){r=r||this;for(var n=this.head,_=0;n!==null;_++)o.call(r,n.value,_,this),n=n.next},C.prototype.forEachReverse=function(o,r){r=r||this;for(var n=this.tail,_=this.length-1;n!==null;_--)o.call(r,n.value,_,this),n=n.prev},C.prototype.get=function(o){for(var r=0,n=this.head;n!==null&&r<o;r++)n=n.next;if(r===o&&n!==null)return n.value},C.prototype.getReverse=function(o){for(var r=0,n=this.tail;n!==null&&r<o;r++)n=n.prev;if(r===o&&n!==null)return n.value},C.prototype.map=function(o,r){r=r||this;for(var n=new C,_=this.head;_!==null;)n.push(o.call(r,_.value,this)),_=_.next;return n},C.prototype.mapReverse=function(o,r){r=r||this;for(var n=new C,_=this.tail;_!==null;)n.push(o.call(r,_.value,this)),_=_.prev;return n},C.prototype.reduce=function(o,r){var n,_=this.head;if(arguments.length>1)n=r;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");_=this.head.next,n=this.head.value}for(var g=0;_!==null;g++)n=o(n,_.value,g),_=_.next;return n},C.prototype.reduceReverse=function(o,r){var n,_=this.tail;if(arguments.length>1)n=r;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");_=this.tail.prev,n=this.tail.value}for(var g=this.length-1;_!==null;g--)n=o(n,_.value,g),_=_.prev;return n},C.prototype.toArray=function(){for(var o=new Array(this.length),r=0,n=this.head;n!==null;r++)o[r]=n.value,n=n.next;return o},C.prototype.toArrayReverse=function(){for(var o=new Array(this.length),r=0,n=this.tail;n!==null;r++)o[r]=n.value,n=n.prev;return o},C.prototype.slice=function(o,r){(r=r||this.length)<0&&(r+=this.length),(o=o||0)<0&&(o+=this.length);var n=new C;if(r<o||r<0)return n;o<0&&(o=0),r>this.length&&(r=this.length);for(var _=0,g=this.head;g!==null&&_<o;_++)g=g.next;for(;g!==null&&_<r;_++,g=g.next)n.push(g.value);return n},C.prototype.sliceReverse=function(o,r){(r=r||this.length)<0&&(r+=this.length),(o=o||0)<0&&(o+=this.length);var n=new C;if(r<o||r<0)return n;o<0&&(o=0),r>this.length&&(r=this.length);for(var _=this.length,g=this.tail;g!==null&&_>r;_--)g=g.prev;for(;g!==null&&_>o;_--,g=g.prev)n.push(g.value);return n},C.prototype.splice=function(o,r,...n){o>this.length&&(o=this.length-1),o<0&&(o=this.length+o);for(var _=0,g=this.head;g!==null&&_<o;_++)g=g.next;var w=[];for(_=0;g&&_<r;_++)w.push(g.value),g=this.removeNode(g);for(g===null&&(g=this.tail),g!==this.head&&g!==this.tail&&(g=g.prev),_=0;_<n.length;_++)g=m(this,g,n[_]);return w},C.prototype.reverse=function(){for(var o=this.head,r=this.tail,n=o;n!==null;n=n.prev){var _=n.prev;n.prev=n.next,n.next=_}return this.head=r,this.tail=o,this};try{u(371)(C)}catch{}},109:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0});const C=u(98),m=u(104);let a;d.default=async function(h,o){var r,n;if(!a){if(typeof navigator<"u"&&"fonts"in navigator){try{const w=await((n=(r=navigator.permissions).request)===null||n===void 0?void 0:n.call(r,{name:"local-fonts"}));if(w&&w.state!=="granted")throw new Error("Permission to access local fonts not granted.")}catch(w){if(w.name!=="TypeError")throw w}const g={};try{const w=await navigator.fonts.query();for(const p of w)g.hasOwnProperty(p.family)||(g[p.family]=[]),g[p.family].push(p);a=Promise.resolve(g)}catch(w){console.error(w.name,w.message)}}else if(typeof process!="object"&&"queryLocalFonts"in window){const g={};try{const w=await window.queryLocalFonts();for(const p of w)g.hasOwnProperty(p.family)||(g[p.family]=[]),g[p.family].push(p);a=Promise.resolve(g)}catch(w){console.error(w.name,w.message)}}a||(a=Promise.resolve({}))}const _=await a;for(const g of(0,m.default)(h)){if(t.includes(g))return;if(_.hasOwnProperty(g)&&_[g].length>0){const w=_[g][0];if("blob"in w){const p=await w.blob(),S=await p.arrayBuffer();return(0,C.loadBuffer)(S,{cacheSize:o})}return}}};const t=["serif","sans-serif","cursive","fantasy","monospace","system-ui","emoji","math","fangsong"]},833:(f,d,u)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.enableLigatures=void 0;const C=u(109);d.enableLigatures=function(m,a=[]){let t,h,o,r=0;return m.registerCharacterJoiner(n=>{const _=m.options.fontFamily;if(_&&(r===0||t!==_)){h=void 0,r=1,t=_;const g=t;(0,C.default)(g,1e5).then(w=>{g===m.options.fontFamily&&(r=2,h=w,w&&m.refresh(0,m.rows-1))}).catch(w=>{g===m.options.fontFamily&&(r=3,m.options.logLevel==="debug"&&console.debug(o,new Error("Failure while loading font")),h=void 0,o=w)})}return h&&r===2?h.findLigatureRanges(n).map(g=>[g[0],g[1]]):function(g,w){const p=[];for(let S=0;S<g.length;S++)for(let x=0;x<w.length;x++)if(g.startsWith(w[x],S)){p.push([S,S+w[x].length]),S+=w[x].length-1;break}return p}(n,a)})}},104:(f,d)=>{function u(t,h){let o="",r=!1;for(;t.offset<t.input.length;){const n=t.input[t.offset++];if(r)/[\dA-Fa-f]/.test(n)?(t.offset--,o+=m(t)):n!==`
`&&(o+=n),r=!1;else switch(n){case h:return o;case"\\":r=!0;break;default:o+=n}}throw new Error("Unterminated string")}function C(t){let h="",o=!1;for(;t.offset<t.input.length;){const r=t.input[t.offset++];if(o)/[\dA-Fa-f]/.test(r)?(t.offset--,h+=m(t)):h+=r,o=!1;else switch(r){case"\\":o=!0;break;case",":return h;default:/\s/.test(r)?h.endsWith(" ")||(h+=" "):h+=r}}return h}function m(t){let h="";for(;t.offset<t.input.length;){const o=t.input[t.offset++];if(/\s/.test(o))return a(h);if(h.length>=6||!/[\dA-Fa-f]/.test(o))return t.offset--,a(h);h+=o}return a(h)}function a(t){return String.fromCodePoint(parseInt(t,16))}Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(t){if(typeof t!="string")throw new Error("Font family must be a string");const h={input:t,offset:0},o=[];let r="";for(;h.offset<h.input.length;){const n=h.input[h.offset++];switch(n){case"'":case'"':r+=u(h,n);break;case",":o.push(r),r="";break;default:/\s/.test(n)||(h.offset--,r+=C(h),o.push(r),r="")}}return o}},89:f=>{f.exports=ie},56:f=>{f.exports=le},978:f=>{f.exports=pe},269:f=>{f.exports=fe},82:()=>{},456:()=>{}},c={};function y(f){var d=c[f];if(d!==void 0)return d.exports;var u=c[f]={exports:{}};return q[f].call(u.exports,u,u.exports,y),u.exports}y.n=f=>{var d=f&&f.__esModule?()=>f.default:()=>f;return y.d(d,{a:d}),d},y.d=(f,d)=>{for(var u in d)y.o(d,u)&&!y.o(f,u)&&Object.defineProperty(f,u,{enumerable:!0,get:d[u]})},y.o=(f,d)=>Object.prototype.hasOwnProperty.call(f,d),y.r=f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})};var v={};return(()=>{var f=v;Object.defineProperty(f,"__esModule",{value:!0}),f.LigaturesAddon=void 0;const d=y(833);f.LigaturesAddon=class{constructor(u){this._fallbackLigatures=((u==null?void 0:u.fallbackLigatures)||["<--","<---","<<-","<-","->","->>","-->","--->","<==","<===","<<=","<=","=>","=>>","==>","===>",">=",">>=","<->","<-->","<--->","<---->","<=>","<==>","<===>","<====>","-------->","<~~","<~","~>","~~>","::",":::","==","!=","===","!==",":=",":-",":+","<*","<*>","*>","<|","<|>","|>","+:","-:","=:",":>","++","+++","<!--","<!---","<***>"]).sort((C,m)=>m.length-C.length)}activate(u){this._terminal=u,this._characterJoinerId=(0,d.enableLigatures)(u,this._fallbackLigatures)}dispose(){var u;this._characterJoinerId!==void 0&&((u=this._terminal)===null||u===void 0||u.deregisterCharacterJoiner(this._characterJoinerId),this._characterJoinerId=void 0)}}})(),v})()})})(fi,fi.exports);var Kr={exports:{}};(function(Y,G){(function(ie,le){Y.exports=le()})(self,function(){return(()=>{var ie={345:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.forwardEvent=c.EventEmitter=void 0,c.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=y=>(this._listeners.push(y),{dispose:()=>{if(!this._disposed){for(let v=0;v<this._listeners.length;v++)if(this._listeners[v]===y)return void this._listeners.splice(v,1)}}})),this._event}fire(y,v){const f=[];for(let d=0;d<this._listeners.length;d++)f.push(this._listeners[d]);for(let d=0;d<f.length;d++)f[d].call(void 0,y,v)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},c.forwardEvent=function(y,v){return y(f=>v.fire(f))}}},le={};function fe(q){var c=le[q];if(c!==void 0)return c.exports;var y=le[q]={exports:{}};return ie[q](y,y.exports,fe),y.exports}var pe={};return(()=>{var q=pe;Object.defineProperty(q,"__esModule",{value:!0}),q.SearchAddon=void 0;const c=fe(345),y=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";q.SearchAddon=class{constructor(){this._linesCacheTimeoutId=0,this._onDidChangeResults=new c.EventEmitter,this.onDidChangeResults=this._onDidChangeResults.event}activate(v){this._terminal=v,this._onDataDisposable=this._terminal.onWriteParsed(()=>this._updateMatches()),this._onResizeDisposable=this._terminal.onResize(()=>this._updateMatches())}_updateMatches(){var v;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&((v=this._lastSearchOptions)===null||v===void 0?void 0:v.decorations)&&(this._highlightTimeout=setTimeout(()=>{var f,d;this.findPrevious(this._cachedSearchTerm,Object.assign(Object.assign({},this._lastSearchOptions),{incremental:!0,noScroll:!0})),this._resultIndex=this._searchResults?this._searchResults.size-1:-1,this._onDidChangeResults.fire({resultIndex:this._resultIndex,resultCount:(d=(f=this._searchResults)===null||f===void 0?void 0:f.size)!==null&&d!==void 0?d:-1})},200))}dispose(){var v,f;this.clearDecorations(),(v=this._onDataDisposable)===null||v===void 0||v.dispose(),(f=this._onResizeDisposable)===null||f===void 0||f.dispose()}clearDecorations(v){var f,d,u,C;(f=this._selectedDecoration)===null||f===void 0||f.dispose(),(d=this._searchResults)===null||d===void 0||d.clear(),(u=this._resultDecorations)===null||u===void 0||u.forEach(m=>{for(const a of m)a.dispose()}),(C=this._resultDecorations)===null||C===void 0||C.clear(),this._searchResults=void 0,this._resultDecorations=void 0,v||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){var v;(v=this._selectedDecoration)===null||v===void 0||v.dispose(),this._selectedDecoration=void 0}findNext(v,f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._lastSearchOptions=f,f!=null&&f.decorations&&(this._resultIndex===void 0&&this._cachedSearchTerm!==void 0&&v===this._cachedSearchTerm||this._highlightAllMatches(v,f)),this._fireResults(v,this._findNextAndSelect(v,f),f)}_highlightAllMatches(v,f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!v||v.length===0)return void this.clearDecorations();f=f||{},this.clearDecorations(!0),this._searchResults=new Map,this._resultDecorations=new Map;const d=this._resultDecorations;let u=this._find(v,0,0,f);for(;u&&!this._searchResults.get(`${u.row}-${u.col}`);)if(this._searchResults.set(`${u.row}-${u.col}`,u),u=this._find(v,u.col+u.term.length>=this._terminal.cols?u.row+1:u.row,u.col+u.term.length>=this._terminal.cols?0:u.col+1,f),this._searchResults.size>1e3)return this.clearDecorations(),void(this._resultIndex=void 0);this._searchResults.forEach(C=>{const m=this._createResultDecoration(C,f.decorations);if(m){const a=d.get(m.marker.line)||[];a.push(m),d.set(m.marker.line,a)}})}_find(v,f,d,u){var C;if(!this._terminal||!v||v.length===0)return(C=this._terminal)===null||C===void 0||C.clearSelection(),void this.clearDecorations();if(d>this._terminal.cols)throw new Error(`Invalid col: ${d} to search in terminal of ${this._terminal.cols} cols`);let m;this._initLinesCache();const a={startRow:f,startCol:d};if(m=this._findInLine(v,a,u),!m)for(let t=f+1;t<this._terminal.buffer.active.baseY+this._terminal.rows&&(a.startRow=t,a.startCol=0,m=this._findInLine(v,a,u),!m);t++);return m}_findNextAndSelect(v,f){var d;if(!this._terminal||!v||v.length===0)return(d=this._terminal)===null||d===void 0||d.clearSelection(),this.clearDecorations(),this._cachedSearchTerm=void 0,this._resultIndex=-1,!1;this._cachedSearchTerm!==v&&(this._resultIndex=void 0,this._terminal.clearSelection());let u,C=0,m=0;if(this._terminal.hasSelection()){const h=!!f&&f.incremental;u=this._terminal.getSelectionPosition(),m=h?u.start.y:u.end.y,C=h?u.start.x:u.end.x}this._initLinesCache();const a={startRow:m,startCol:C};let t=this._findInLine(v,a,f);if(!t)for(let h=m+1;h<this._terminal.buffer.active.baseY+this._terminal.rows&&(a.startRow=h,a.startCol=0,t=this._findInLine(v,a,f),!t);h++);if(!t&&m!==0)for(let h=0;h<m&&(a.startRow=h,a.startCol=0,t=this._findInLine(v,a,f),!t);h++);return!t&&u&&(a.startRow=u.start.y,a.startCol=0,t=this._findInLine(v,a,f)),this._searchResults&&(this._searchResults.size===0?this._resultIndex=-1:this._resultIndex===void 0?this._resultIndex=0:(this._resultIndex++,this._resultIndex>=this._searchResults.size&&(this._resultIndex=0))),this._selectResult(t,f==null?void 0:f.decorations,f==null?void 0:f.noScroll)}findPrevious(v,f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._lastSearchOptions=f,f!=null&&f.decorations&&(this._resultIndex===void 0&&this._cachedSearchTerm!==void 0&&v===this._cachedSearchTerm||this._highlightAllMatches(v,f)),this._fireResults(v,this._findPreviousAndSelect(v,f),f)}_fireResults(v,f,d){var u;return d!=null&&d.decorations&&(this._resultIndex!==void 0&&((u=this._searchResults)===null||u===void 0?void 0:u.size)!==void 0?this._onDidChangeResults.fire({resultIndex:this._resultIndex,resultCount:this._searchResults.size}):this._onDidChangeResults.fire(void 0)),this._cachedSearchTerm=v,f}_findPreviousAndSelect(v,f){var d;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");let u;if(!this._terminal||!v||v.length===0)return u=void 0,(d=this._terminal)===null||d===void 0||d.clearSelection(),this.clearDecorations(),this._resultIndex=-1,!1;this._cachedSearchTerm!==v&&(this._resultIndex=void 0,this._terminal.clearSelection());let C=this._terminal.buffer.active.baseY+this._terminal.rows,m=this._terminal.cols;const a=!0,t=!!f&&f.incremental;let h;this._terminal.hasSelection()&&(h=this._terminal.getSelectionPosition(),C=h.start.y,m=h.start.x),this._initLinesCache();const o={startRow:C,startCol:m};if(t?(u=this._findInLine(v,o,f,!1),u&&u.row===C&&u.col===m||(h&&(o.startRow=h.end.y,o.startCol=h.end.x),u=this._findInLine(v,o,f,!0))):u=this._findInLine(v,o,f,a),!u){o.startCol=Math.max(o.startCol,this._terminal.cols);for(let r=C-1;r>=0&&(o.startRow=r,u=this._findInLine(v,o,f,a),!u);r--);}if(!u&&C!==this._terminal.buffer.active.baseY+this._terminal.rows)for(let r=this._terminal.buffer.active.baseY+this._terminal.rows;r>=C&&(o.startRow=r,u=this._findInLine(v,o,f,a),!u);r--);return this._searchResults&&(this._searchResults.size===0?this._resultIndex=-1:this._resultIndex===void 0||this._resultIndex<0?this._resultIndex=this._searchResults.size-1:(this._resultIndex--,this._resultIndex===-1&&(this._resultIndex=this._searchResults.size-1))),!(u||!h)||this._selectResult(u,f==null?void 0:f.decorations,f==null?void 0:f.noScroll)}_initLinesCache(){const v=this._terminal;this._linesCache||(this._linesCache=new Array(v.buffer.active.length),this._cursorMoveListener=v.onCursorMove(()=>this._destroyLinesCache()),this._resizeListener=v.onResize(()=>this._destroyLinesCache())),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(v,f,d){return(v===0||y.includes(f[v-1]))&&(v+d.length===f.length||y.includes(f[v+d.length]))}_findInLine(v,f,d={},u=!1){var C;const m=this._terminal,a=f.startRow,t=f.startCol,h=m.buffer.active.getLine(a);if(h!=null&&h.isWrapped)return u?void(f.startCol+=m.cols):(f.startRow--,f.startCol+=m.cols,this._findInLine(v,f,d));let o=(C=this._linesCache)===null||C===void 0?void 0:C[a];o||(o=this._translateBufferLineToStringWithWrap(a,!0),this._linesCache&&(this._linesCache[a]=o));const[r,n]=o,_=this._bufferColsToStringOffset(a,t),g=d.caseSensitive?v:v.toLowerCase(),w=d.caseSensitive?r:r.toLowerCase();let p=-1;if(d.regex){const S=RegExp(g,"g");let x;if(u)for(;x=S.exec(w.slice(0,_));)p=S.lastIndex-x[0].length,v=x[0],S.lastIndex-=v.length-1;else x=S.exec(w.slice(_)),x&&x[0].length>0&&(p=_+(S.lastIndex-x[0].length),v=x[0])}else u?_-g.length>=0&&(p=w.lastIndexOf(g,_-g.length)):p=w.indexOf(g,_);if(p>=0){if(d.wholeWord&&!this._isWholeWord(p,w,v))return;let S=0;for(;S<n.length-1&&p>=n[S+1];)S++;let x=S;for(;x<n.length-1&&p+v.length>=n[x+1];)x++;const A=p-n[S],T=p+v.length-n[x],B=this._stringLengthToBufferSize(a+S,A);return{term:v,col:B,row:a+S,size:this._stringLengthToBufferSize(a+x,T)-B+m.cols*(x-S)}}}_stringLengthToBufferSize(v,f){const d=this._terminal.buffer.active.getLine(v);if(!d)return 0;for(let u=0;u<f;u++){const C=d.getCell(u);if(!C)break;const m=C.getChars();m.length>1&&(f-=m.length-1);const a=d.getCell(u+1);a&&a.getWidth()===0&&f++}return f}_bufferColsToStringOffset(v,f){const d=this._terminal;let u=v,C=0,m=d.buffer.active.getLine(u);for(;f>0&&m;){for(let a=0;a<f&&a<d.cols;a++){const t=m.getCell(a);if(!t)break;t.getWidth()&&(C+=t.getCode()===0?1:t.getChars().length)}if(u++,m=d.buffer.active.getLine(u),m&&!m.isWrapped)break;f-=d.cols}return C}_translateBufferLineToStringWithWrap(v,f){var d;const u=this._terminal,C=[],m=[0];let a=u.buffer.active.getLine(v);for(;a;){const t=u.buffer.active.getLine(v+1),h=!!t&&t.isWrapped;let o=a.translateToString(!h&&f);if(h&&t){const r=a.getCell(a.length-1);r&&r.getCode()===0&&r.getWidth()===1&&((d=t.getCell(0))===null||d===void 0?void 0:d.getWidth())===2&&(o=o.slice(0,-1))}if(C.push(o),!h)break;m.push(m[m.length-1]+o.length),v++,a=t}return[C.join(""),m]}_selectResult(v,f,d){var u,C;const m=this._terminal;if(this.clearActiveDecoration(),!v)return m.clearSelection(),!1;if(m.select(v.col,v.row,v.size),f){const a=m.registerMarker(-m.buffer.active.baseY-m.buffer.active.cursorY+v.row);a&&(this._selectedDecoration=m.registerDecoration({marker:a,x:v.col,width:v.size,backgroundColor:f.activeMatchBackground,layer:"top",overviewRulerOptions:{color:f.activeMatchColorOverviewRuler}}),(u=this._selectedDecoration)===null||u===void 0||u.onRender(t=>this._applyStyles(t,f.activeMatchBorder,!0)),(C=this._selectedDecoration)===null||C===void 0||C.onDispose(()=>a.dispose()))}if(!d&&(v.row>=m.buffer.active.viewportY+m.rows||v.row<m.buffer.active.viewportY)){let a=v.row-m.buffer.active.viewportY;a-=Math.floor(m.rows/2),m.scrollLines(a)}return!0}_applyStyles(v,f,d){v.clientWidth<=0||(v.classList.contains("xterm-find-result-decoration")||(v.classList.add("xterm-find-result-decoration"),f&&(v.style.outline=`1px solid ${f}`)),d&&v.classList.add("xterm-find-active-result-decoration"))}_createResultDecoration(v,f){var d;const u=this._terminal,C=u.registerMarker(-u.buffer.active.baseY-u.buffer.active.cursorY+v.row);if(!C)return;const m=u.registerDecoration({marker:C,x:v.col,width:v.size,backgroundColor:f.matchBackground,overviewRulerOptions:!((d=this._resultDecorations)===null||d===void 0)&&d.get(C.line)?void 0:{color:f.matchOverviewRuler,position:"center"}});return m==null||m.onRender(a=>this._applyStyles(a,f.matchBorder,!1)),m==null||m.onDispose(()=>C.dispose()),m}}})(),pe})()})})(Kr);var Xr={exports:{}};(function(Y,G){(function(ie,le){Y.exports=le()})(self,function(){return(()=>{var ie={6:(q,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.LinkComputer=c.WebLinkProvider=void 0,c.WebLinkProvider=class{constructor(v,f,d,u={}){this._terminal=v,this._regex=f,this._handler=d,this._options=u}provideLinks(v,f){const d=y.computeLink(v,this._regex,this._terminal,this._handler);f(this._addCallbacks(d))}_addCallbacks(v){return v.map(f=>(f.leave=this._options.leave,f.hover=(d,u)=>{if(this._options.hover){const{range:C}=f;this._options.hover(d,u,C)}},f))}};class y{static computeLink(f,d,u,C){const m=new RegExp(d.source,(d.flags||"")+"g"),[a,t]=y._translateBufferLineToStringWithWrap(f-1,!1,u);let h,o=-1;const r=[];for(;(h=m.exec(a))!==null;){const n=h[1];if(!n){console.log("match found without corresponding matchIndex");break}if(o=a.indexOf(n,o+1),m.lastIndex=o+n.length,o<0)break;let _=o+n.length,g=t+1;for(;_>u.cols;)_-=u.cols,g++;let w=o+1,p=t+1;for(;w>u.cols;)w-=u.cols,p++;const S={start:{x:w,y:p},end:{x:_,y:g}};r.push({range:S,text:n,activate:C})}return r}static _translateBufferLineToStringWithWrap(f,d,u){let C,m,a="";do{const h=u.buffer.active.getLine(f);if(!h)break;h.isWrapped&&f--,m=h.isWrapped}while(m);const t=f;do{const h=u.buffer.active.getLine(f+1);C=!!h&&h.isWrapped;const o=u.buffer.active.getLine(f);if(!o)break;a+=o.translateToString(!C&&d).substring(0,u.cols),f++}while(C);return[a,t]}}c.LinkComputer=y}},le={};function fe(q){var c=le[q];if(c!==void 0)return c.exports;var y=le[q]={exports:{}};return ie[q](y,y.exports,fe),y.exports}var pe={};return(()=>{var q=pe;Object.defineProperty(q,"__esModule",{value:!0}),q.WebLinksAddon=void 0;const c=fe(6),y=new RegExp(`(?:^|[^\\da-z\\.-]+)((https?:\\/\\/)((([\\da-z\\.-]+)\\.([a-z\\.]{2,18}))|((\\d{1,3}\\.){3}\\d{1,3})|(localhost))(:\\d{1,5})?((\\/[\\/\\w\\.\\-%~:+@]*)*([^:"'\\s]))?(\\?[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?(#[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?)($|[^\\/\\w\\.\\-%]+)`);function v(f,d){const u=window.open();if(u){try{u.opener=null}catch{}u.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}q.WebLinksAddon=class{constructor(f=v,d={}){this._handler=f,this._options=d}activate(f){this._terminal=f;const d=this._options,u=d.urlRegex||y;this._linkProvider=this._terminal.registerLinkProvider(new c.WebLinkProvider(this._terminal,u,this._handler,d))}dispose(){var f;(f=this._linkProvider)===null||f===void 0||f.dispose()}}})(),pe})()})})(Xr);const Ur=()=>{const Y=document.documentElement.style;function G(ie){return Y.getPropertyValue(ie)}return{cursor:G("--vscode-editorCursor-foreground"),foreground:G("--vscode-terminal-foreground"),background:G("--vscode-editor-background"),brightBlack:G("--vscode-terminal-ansiBrightBlack"),black:G("--vscode-terminal-ansiBlack"),brightBlue:G("--vscode-terminal-ansBrightiBlue"),blue:G("--vscode-terminal-ansiBlue"),brightGreen:G("--vscode-terminal-ansiBrightGreen"),green:G("--vscode-terminal-ansiGreen"),brightRed:G("--vscode-terminal-ansiBrightRed"),red:G("--vscode-terminal-ansiRed"),brightCyan:G("--vscode-terminal-ansiBrightCyan"),cyan:G("--vscode-terminal-ansiCyan"),brightPurple:G("--vscode-terminal-ansiBrightMagenta"),purple:G("--vscode-terminal-ansiMagenta"),brightYellow:G("--vscode-terminal-ansiBrightYellow"),yellow:G("--vscode-terminal-ansiYellow"),brightWhite:G("--vscode-terminal-ansiBrightWhite"),white:G("--vscode-terminal-ansiWhite"),selectionBackground:G("--vscode-editor-selectionBackground")}};/*!
 * xterm-addon-search-bar.js v0.2.0
 * (c) 2018-2020 yinshuxun
 * Released under the MIT License.
 */function pn(Y,G){G===void 0&&(G={});var ie=G.insertAt;if(!(!Y||typeof document>"u")){var le=document.head||document.getElementsByTagName("head")[0],fe=document.createElement("style");fe.type="text/css",ie==="top"&&le.firstChild?le.insertBefore(fe,le.firstChild):le.appendChild(fe),fe.styleSheet?fe.styleSheet.cssText=Y:fe.appendChild(document.createTextNode(Y))}}var _n='.xterm-search-bar__addon{position:absolute;max-width:1467px;top:0;right:28px;color:#000;background:#fff;padding:5px 10px;box-shadow:0 2px 8px #000;background-color:#252526;z-index:999;display:flex}.xterm-search-bar__addon .search-bar__input{background-color:#3c3c3c;color:#ccc;border:0;padding:2px;height:20px;width:227px}.xterm-search-bar__addon .search-bar__btn{min-width:20px;width:20px;height:20px;display:flex;display:-webkit-flex;flex:initial;background-position:50%;margin-left:3px;background-repeat:no-repeat;background-color:#252526;border:0;cursor:pointer}.xterm-search-bar__addon .search-bar__btn:hover{background-color:#666}.xterm-search-bar__addon .search-bar__btn.prev{margin-left:20px;background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTUuNCA4YS42LjYgMCAwMS4xNzYtLjQyNGw0LTRhLjU5OC41OTggMCAwMS44NDggMCAuNTk4LjU5OCAwIDAxMCAuODQ4TDYuODQ5IDhsMy41NzUgMy41NzZhLjU5OC41OTggMCAwMTAgLjg0OC41OTguNTk4IDAgMDEtLjg0OCAwbC00LTRBLjYuNiAwIDAxNS40IDgiLz48L3N2Zz4=")}.xterm-search-bar__addon .search-bar__btn.next{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTEwLjYgOGEuNi42IDAgMDEtLjE3Ni40MjRsLTQgNGEuNTk4LjU5OCAwIDAxLS44NDggMCAuNTk4LjU5OCAwIDAxMC0uODQ4TDkuMTUxIDggNS41NzYgNC40MjRhLjU5OC41OTggMCAwMTAtLjg0OC41OTguNTk4IDAgMDEuODQ4IDBsNCA0QS42LjYgMCAwMTEwLjYgOCIvPjwvc3ZnPg==")}.xterm-search-bar__addon .search-bar__btn.close{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTcgNmwyLTJhLjcxMS43MTEgMCAwMDAtMSAuNzExLjcxMSAwIDAwLTEgMEw2IDUgNCAzYS43MTEuNzExIDAgMDAtMSAwIC43MTEuNzExIDAgMDAwIDFsMiAyLTIgMmEuNzExLjcxMSAwIDAwMCAxIC43MTEuNzExIDAgMDAxIDBsMi0yIDIgMmEuNzExLjcxMSAwIDAwMSAwIC43MTEuNzExIDAgMDAwLTFMNyA2eiIvPjwvc3ZnPg==")}';pn(_n);const di="xterm-search-bar__addon";class gn{constructor(G){this.options=G||{},this.options&&this.options.searchAddon&&(this.searchAddon=this.options.searchAddon)}activate(G){this.terminal=G,this.searchAddon||console.error("Cannot use search bar addon until search addon has been loaded!")}dispose(){this.hidden()}show(){if(!this.terminal||!this.terminal.element)return;if(this.searchBarElement){this.searchBarElement.style.visibility="visible",this.searchBarElement.querySelector("input").select();return}this.terminal.element.style.position="relative";const G=document.createElement("div");G.innerHTML=`
       <input type="text" class="search-bar__input" name="search-bar__input"/>
       <button class="search-bar__btn prev"></button>
       <button class="search-bar__btn next"></button>
       <button class="search-bar__btn close"></button>
    `,G.className=di;const ie=this.terminal.element.parentElement;this.searchBarElement=G,["relative","absoulte","fixed"].includes(ie.style.position)||(ie.style.position="relative"),ie.appendChild(this.searchBarElement),this.on(".search-bar__btn.close","click",()=>{this.hidden()}),this.on(".search-bar__btn.next","click",()=>{this.searchAddon.findNext(this.searchKey,{incremental:!1})}),this.on(".search-bar__btn.prev","click",()=>{this.searchAddon.findPrevious(this.searchKey,{incremental:!1})}),this.on(".search-bar__input","keyup",le=>{this.searchKey=le.target.value,this.searchAddon.findNext(this.searchKey,{incremental:le.key!=="Enter"})}),this.searchBarElement.querySelector("input").select()}hidden(){this.searchBarElement&&this.terminal.element.parentElement&&(this.searchBarElement.style.visibility="hidden")}on(G,ie,le){const fe=this.terminal.element.parentElement;fe.addEventListener(ie,pe=>{let q=pe.target;for(;q!==document.querySelector(G);){if(q===fe){q=null;break}q=q.parentElement}q===document.querySelector(G)&&(le.call(this,pe),pe.stopPropagation())})}addNewStyle(G){let ie=document.getElementById(di);ie||(ie=document.createElement("style"),ie.type="text/css",ie.id=di,document.getElementsByTagName("head")[0].appendChild(ie)),ie.appendChild(document.createTextNode(G))}}const vn={mixins:[Js],data(){return{terminal:null,isSSH:!1}},mounted(){this.on("terminalConfig",Y=>{let G=!1;const ie=new Fr.exports.Terminal({theme:Ur(),cursorStyle:"bar",cursorBlink:!0,allowProposedApi:!0,fontSize:Y.fontSize,fontFamily:Y.fontFamily,disableStdin:!1,lineHeight:1.1,cursorBlink:!0,scrollback:1e4,tabStopWidth:8,bellStyle:"sound"});this.terminal=ie;const le=new Gr.exports.FitAddon,fe=new Kr.exports.SearchAddon,pe=new gn({searchAddon:fe});ie.attachCustomKeyEventHandler(f=>{if(f.code=="Escape"&&pe.hidden(),f.shiftKey&&f.code=="Insert")return!1;if(_r(f)&&!f.altKey&&!f.shiftKey){const C=f.code;if(C=="KeyC"&&ie.hasSelection())return document.execCommand("copy"),!1;if(C=="KeyV")return!1;if(C=="KeyF")return pe.show(),!1;if(["PageDown","PageUp"].includes(C))return!1}const u=new f.constructor(f.type,f);return document.body.dispatchEvent(u),!0});const q=document.getElementById("terminal-container");ie.open(q),ie.loadAddon(le),ie.loadAddon(fe),ie.loadAddon(pe),ie.loadAddon(new Nr.exports.CanvasAddon),ie.loadAddon(new fi.exports.LigaturesAddon);let c;ie.loadAddon(new Xr.exports.WebLinksAddon((f,d)=>{if(!_r(f)){const u=c;if(c=new Date().getTime(),!u||c-u>200)return}this.emit("openLink",d)})),le.fit(),ie.focus(),ie.onKey(f=>{}),ie.onData(f=>{this.emit("data",f)});const y=()=>{le.fit(),this.emit("resize",{cols:ie.cols,rows:ie.rows})};window.addEventListener("resize",y,!1),window.onfocus=()=>{ie.focus()},document.querySelector("#terminal-container").oncontextmenu=async f=>{f.stopPropagation(),ie.hasSelection()?(document.execCommand("copy"),ie.clearSelection()):this.emit("data",await navigator.clipboard.readText())};let v=!1;this.on("connecting",f=>{ie.write(f),ie.write("\x1B[2K\r")}).on("data",f=>{v||(ie.clear(),v=!0),ie.write(f)}).on("init-terminal",f=>{this.isSSH=!0,y()}).on("error",f=>{G||(G=!0,ie.write(f))}).on("theme",f=>{ie.options.theme=Ur()}),this.emit("initTerminal",{cols:ie.cols,rows:ie.rows})}).init()},methods:{showProgres(){let Y="echo Top Memory Progress: && ps -eo pid,user,rss,pmem,pcpu,cputime,comm,cmd | ";Y+=`awk 'NR<2{print $0;next}{print $0| "sort -k 3 -nr"}' | head -30 | `,Y+="numfmt --header --to=iec --from-unit=1024 --field 3 | cut -c 1-130",this.send(Y)},send(Y){this.emit("data",""),setTimeout(()=>{var G;this.emit("data",`${Y}
`),(G=this.terminal)==null||G.focus()},100)}}};var mn=function(){var G=this,ie=G._self._c;return ie("div",{staticClass:"box"},[G.isSSH?ie("div",{staticClass:"terminal-toolbar pl-3 gap-x-4 h-[25px] flex items-center"},[ie("div",{staticClass:"terminal-toolbar-selection"},[G._v(" Vim: "),ie("i",{staticClass:"el-icon-edit",attrs:{title:"Edit Profile"},on:{click:function(le){return G.send("vi /etc/profile")}}}),ie("i",{staticClass:"el-icon-wind-power",attrs:{title:"Show Line Number"},on:{click:function(le){return G.send(":set nu")}}}),ie("i",{staticClass:"el-icon-set-up",attrs:{title:"Format"},on:{click:function(le){return G.send("gg=G")}}}),ie("i",{staticClass:"el-icon-check",attrs:{title:"Save"},on:{click:function(le){return G.send(":wq")}}}),ie("i",{staticClass:"el-icon-close",attrs:{title:"Close"},on:{click:function(le){return G.send(":q!")}}})]),ie("div",{staticClass:"terminal-toolbar-selection"},[G._v(" Util: "),ie("i",{staticClass:"el-icon-data-line",attrs:{title:"List Progress"},on:{click:G.showProgres}}),ie("i",{staticClass:"el-icon-document-delete",attrs:{title:"Clear Screen"},on:{click:function(le){return G.send("clear")}}})])]):G._e(),ie("div",{staticClass:"terminal",attrs:{id:"terminal-container"}})])},yn=[],Sn=Zs(vn,mn,yn,!1,null,"ff463937",null,null);const wn=Sn.exports;export{wn as default};
