import{_ as n,a as r}from"./table.1f7dee3a.js";import{_ as o}from"./switch.67e5957d.js";import{n as c,g as l}from"./vueConfig.6bb507c3.js";import"./checkbox.8e4b3b00.js";import"./scrollbar.29868dfd.js";import"./index.acd7c038.js";import"./checkbox-group.060c446e.js";import"./index.cc8e878c.js";import"./focus.ffc03aa6.js";let i;const p={data(){return{autoRefresh:!1,refreshTimer:null,refreshInterval:2e3,connectionStatus:{},statusConnection:null}},computed:{DBKeys(){const e=[];for(const t in this.connectionStatus)if(t.startsWith("db")){const a=this.connectionStatus[t].split(",");e.push({db:t,keys:a[0].split("=")[1],expires:a[1].split("=")[1],avg_ttl:a[2].split("=")[1]})}return e},AllRedisInfo(){const e=[];for(const t in this.connectionStatus)e.push({key:t,value:this.connectionStatus[t]});return e}},mounted(){i=l(),this.refreshInit(),i.on("info",e=>{this.initStatus(e)}),i.emit("routed")},destroyed(){clearInterval(this.refreshTimer),i.destroy()},methods:{refreshInit(){this.refreshTimer=setInterval(()=>{this.autoRefresh&&i.emit("routed")},2e3)},sortByKeys(e,t){return e.keys-t.keys},sortByExpires(e,t){return e.expires-t.expires},sortByTTL(e,t){return e.avg_ttl-t.avg_ttl},initStatus(e){if(!e)return{};e=e.split(`
`);const t={};for(let s of e){if(s=s.replace(/\s/gi,""),s.startsWith("#")||!s)continue;const a=s.split(":");t[a[0]]=a[1]}this.connectionStatus=t}}};var v=function(){var t=this,s=t._self._c;return s("div",{staticClass:"redis-status-container",attrs:{id:"app"}},[s("div",[s("vsc-tag",{attrs:{type:"info"}},[s("i",{staticClass:"el-icon-refresh"}),t._v(" Auto Refresh ")]),s("vsc-tooltip",{staticClass:"item",staticStyle:{"margin-left":"20px"},attrs:{effect:"dark",content:"Auto Refresh Switch, Refresh Every 2 Seconds",placement:"bottom"}},[s(o,{on:{change:t.refreshInit},model:{value:t.autoRefresh,callback:function(a){t.autoRefresh=a},expression:"autoRefresh"}})],1)],1),s("div",{staticClass:"grid grid-cols-3 gap-4 mt-4 px-3"},[s("div",{staticClass:"col-span-1"},[s("div",{staticClass:"box-card p-3 bg-secondBg mb-3"},[s("span",{staticClass:"text-base mb-2 block"},[t._v("Server")]),s("p",{staticClass:"server-status-tag-p"},[s("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[t._v(" Redis Version: "),s("span",{staticClass:"server-status-text"},[t._v(t._s(t.connectionStatus.redis_version))])])],1),s("p",{staticClass:"server-status-tag-p"},[s("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[t._v(" OS: "),s("span",{staticClass:"server-status-text",attrs:{title:t.connectionStatus.os}},[t._v(t._s(t.connectionStatus.os))])])],1),s("p",{staticClass:"server-status-tag-p"},[s("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[t._v(" Process ID: "),s("span",{staticClass:"server-status-text"},[t._v(t._s(t.connectionStatus.process_id))])])],1)])]),s("div",{staticClass:"col-span-1"},[s("div",{staticClass:"box-card p-3 bg-secondBg mb-3"},[s("span",{staticClass:"text-base mb-2 block"},[t._v(" Memory")]),s("p",{staticClass:"server-status-tag-p"},[s("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[t._v(" Used Memory: "),s("span",{staticClass:"server-status-text"},[t._v(t._s(t.connectionStatus.used_memory_human))])])],1),s("p",{staticClass:"server-status-tag-p"},[s("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[t._v(" Used Memory Peak: "),s("span",{staticClass:"server-status-text"},[t._v(t._s(t.connectionStatus.used_memory_peak_human))])])],1),s("p",{staticClass:"server-status-tag-p"},[s("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[t._v(" Used Memory Lua: "),s("span",{staticClass:"server-status-text"},[t._v(t._s(Math.round(t.connectionStatus.used_memory_lua/1024))+"K")])])],1)])]),s("div",{staticClass:"col-span-1"},[s("div",{staticClass:"box-card p-3 bg-secondBg mb-3"},[s("span",{staticClass:"text-base mb-2 block"},[t._v("Stats")]),s("p",{staticClass:"server-status-tag-p"},[s("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[t._v(" Connected Clients: "),s("span",{staticClass:"server-status-text"},[t._v(t._s(t.connectionStatus.connected_clients))])])],1),s("p",{staticClass:"server-status-tag-p"},[s("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[t._v(" Total Connections: "),s("span",{staticClass:"server-status-text"},[t._v(t._s(t.connectionStatus.total_connections_received))])])],1),s("p",{staticClass:"server-status-tag-p"},[s("vsc-tag",{staticClass:"server-status-container",attrs:{type:"info",size:"big"}},[t._v(" Total Commands: "),s("span",{staticClass:"server-status-text"},[t._v(t._s(t.connectionStatus.total_commands_processed))])])],1)])])]),s("div",{staticClass:"mt-4 px-3"},[s("div",{staticClass:"box-card p-3 bg-secondBg mb-3"},[s("span",{staticClass:"text-base mb-2 block"},[t._v("Key Statistics")]),s(n,{attrs:{data:t.DBKeys}},[s(r,{attrs:{prop:"db",label:"DB"}}),s(r,{attrs:{sortable:"",prop:"keys",label:"Keys","sort-method":t.sortByKeys}}),s(r,{attrs:{sortable:"",prop:"expires",label:"Expires","sort-method":t.sortByExpires}}),s(r,{attrs:{sortable:"",prop:"avg_ttl",label:"Avg TTL","sort-method":t.sortByTTL}})],1)],1)]),s("div",{staticClass:"mt-4 px-3"},[s("div",{staticClass:"box-card p-3 bg-secondBg mb-3"},[s("span",{staticClass:"text-base mb-2 block"},[t._v(" All Redis Info")]),s(n,{attrs:{data:t.AllRedisInfo}},[s(r,{attrs:{prop:"key",label:"Key"}}),s(r,{attrs:{prop:"value",label:"Value"}})],1)],1)])])},u=[],_=c(p,v,u,!1,null,"10cde06a",null,null);const S=_.exports;export{S as default};
